!function e(n,t,r){function o(a,c){if(!t[a]){if(!n[a]){var l="function"==typeof require&&require;if(!c&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var s=t[a]={exports:{}};n[a][0].call(s.exports,function(e){var t=n[a][1][e];return o(t?t:e)},s,s.exports,e,n,t,r)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,t){"use strict";var r=e("./dragularModule");r.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(n,t,r){function o(e){try{return JSON.parse(e)}catch(n){return void 0}}var i=n[r.dragular]||o(r.dragular);i&&i.containersModel&&"string"==typeof i.containersModel&&(i.containersModel=n.$eval(i.containersModel)),e(t[0],i)}}}])},{"./dragularModule":2}],2:[function(e,n,t){"use strict";n.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,n,t){"use strict";var r=e("./dragularModule");r.factory("dragularService",["$rootScope",function(e){function n(e,n,t,r){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i=angular.element(e);o[t]&&i[n](o[t],r),i[n](t,r)}function t(){return!1}function r(){return!0}function o(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}return e.nextElementSibling||n()}function i(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function a(e){var n=h[e];return n?n.lastIndex=0:h[e]=n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),n}function c(e,n){var t=e.className;t.length?a(n).test(t)||(e.className+=" "+n):e.className=n}function l(e,n){e.className=e.className.replace(a(n)," ").trim()}function u(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function s(e,n){var t=u(n),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in t)&&r[e]in t&&(e=r[e]),t[e]}function f(e){return e.width||e.right-e.left}function p(e){return e.height||e.bottom-e.top}function d(e,n){return Array.prototype.indexOf.call(angular.element(n).children(),e)}function g(e,n,t,r,o,i,a){e&&(m.item=t,m.source=r,m.sourceModel=o,m.initialIndex=i,m.extra=a,e.dispatchEvent?e.dispatchEvent(n):e.fireEvent("on"+n.eventType,n))}var m,v,h={},y={},E={};return m=function(a,u){function m(e,n,t){e[n]||(e[n]=[]),Array.prototype.push.apply(e[n],t)}function h(e,n){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,n):[e]}function x(n){e.applyAsync(function(){var e=Array.isArray(n)?n:h(n);e.forEach(function(e){angular.forEach(we.nameSpace,function(n){var t;t=E[n].indexOf(e),E[n].splice(t,1),we.containersModel&&y[n].splice(t,1)})})})}function M(e){for(var n=we.nameSpace.length;n--;)if(-1!==Oe.containers[we.nameSpace[n]].indexOf(e))return!0;return we.isContainer(e)}function S(e){var t=e?"off":"on";n(xe,t,"mouseup",j),a.forEach(function(e){n(e,"on","mousedown",T)})}function b(e){var t=e?"off":"on";n(xe,t,"mousemove",$)}function w(e){var t=e?"off":"on";n(xe,t,"selectstart",C),n(xe,t,"click",C)}function O(){S(!0),x(a),j({})}function C(e){ye&&e.preventDefault()}function T(e){if(e=e||window.event,!(0!==e.which&&1!==e.which||e.metaKey||e.ctrlKey)){var n=A(e.target);n&&(ye=n,b(),e.preventDefault())}}function $(e){if(b(!0),w(),X(),N(ye),!we.direction){var n=ne.parentElement,t=n.offsetHeight,r=n.offsetWidth,o=ne.clientHeight,i=ne.clientWidth;we.direction=r/i>t/o?"horizontal":"vertical"}var a=Q(ne);re=s("pageX",e)-a.left,oe=s("pageY",e)-a.top,ce=s("clientX",e),le=s("clientY",e),we.boundingBox&&(ie=s("pageX",e)-a.right,ae=s("pageY",e)-a.bottom),e.preventDefault(),c(ee,we.classes.transit),U(),v.style.left=ce-re+"px",v.style.top=le-oe+"px",F(e)}function A(e){if(!Oe.dragging||!v){for(var n=e;e.parentElement&&!me(e.parentElement);){if(we.invalid(e,n))return;if(e=e.parentElement,!e)return}var t=e.parentElement;if(t&&!we.invalid(e,n)&&we.moves(e,t,n))return{item:e,source:t}}}function B(e){var n=A(e);n&&N(n)}function N(e){if(ne=ee=e.item,Z=e.source,fe=pe=o(e.item),we.copy&&(ee=e.item.cloneNode(!0),we.scope&&we.scope.$emit("cloned",ee,e.item)),we.containersModel){var n=a.indexOf(e.source);te=we.containersModel[n],de=d(e.item,e.source)}return Oe.dragging=!0,we.scope&&we.scope.$emit("drag",ne,Z),!0}function Y(){return!1}function X(){Oe.dragging&&k(ee,ee.parentElement)}function D(){ye=!1,b(!0),w(!0)}function j(e){if(D(),Oe.dragging){e=e||window.event,ce=s("clientX",e),le=s("clientY",e);var n=V(v,ce,le),t=z(n,ce,le);!t||we.copy!==!1&&t===Z?we.removeOnSpill?H():L():k(ee,t),ve=null,he&&g(he,Se.dragularrelease,ee,Z,te,de,n),we.scope&&we.scope.$emit("release",ee,Z)}}function k(n,t){if(we.scope&&q(t)?we.scope.$emit("cancel",n,Z,te,de):we.scope&&we.scope.$emit("drop",n,t,Z,te,de),we.containersModel&&!q(t)){var r=n,o=d(r,t);e.$applyAsync(function(){if(t===Z)te.splice(o,0,te.splice(de,1)[0]);else{for(var e,i=we.copy?angular.copy(te[de]):te[de],a=we.nameSpace.length;a--;)if(-1!==Oe.containers[we.nameSpace[a]].indexOf(t)){e=y[we.nameSpace[a]][Oe.containers[we.nameSpace[a]].indexOf(t)];break}t.removeChild(r),we.copy||te.splice(de,1),e.splice(o,0,i)}n.parentElement&&n.parentElement.removeChild(n),R()})}else R()}function H(){if(Oe.dragging){var n=ee.parentElement;n&&n.removeChild(ee),we.containersModel&&e.$applyAsync(function(){te.splice(de,1),R()}),we.scope&&we.scope.$emit(we.copy?"cancel":"remove",ee,n,te,de),we.containersModel||R()}}function L(e){if(Oe.dragging){var n=arguments.length>0?e:we.revertOnSpill,t=ee.parentElement,r=q(t);r===!1&&we.copy===!1&&n&&Z.insertBefore(ee,fe),!we.containersModel||we.copy||n?we.scope&&(r||n?we.scope.$emit("cancel",ee,Z):we.scope.$emit("drop",ee,t,Z)):k(ee,t),(!we.containersModel||we.copy||n||r)&&R()}}function R(){D(),W(),ee&&l(ee,we.classes.transit),Oe.dragging=!1,we.removeOnSpill===!0&&K(),we.scope&&(we.scope.$emit("out",ee,Me,Z),we.scope.$emit("dragend",ee)),Z=ee=ne=fe=pe=te=null,de=ge=Me=null}function q(e,n){var t=n||(v?pe:o(ee));return e===Z&&t===fe}function z(e,n,t){function r(){var r=!1;if(me(o)){var i=_(o,e),a=J(o,i,n,t),c=q(o,a);r=c||we.accepts(ee,o,Z,a,te,de),ve!==o&&(ve=o)}return r}for(var o=e;o&&!r();)o=o.parentElement;return o}function F(e){function n(e){we.scope&&we.scope.$emit(e,ee,Me,Z),we.removeOnSpill===!0&&("over"===e?I():K())}function t(){d&&n("over")}function r(){Me&&n("out")}if(v){e=e||window.event,ce=s("clientX",e),le=s("clientY",e);var i,a,c,l=ce-re,u=le-oe;we.boundingBox&&(i=s("pageX",e),a=s("pageY",e),c=Q(we.boundingBox)),we.lockY||(!we.boundingBox||i>c.left+re&&i<c.right+ie?v.style.left=l+"px":we.boundingBox&&(v.style.left=i<c.left+re?ce-(i-c.left)+"px":ce-ue-(i-c.right)+"px")),we.lockX||(!we.boundingBox||a>c.top+oe&&a<c.bottom+ae?v.style.top=u+"px":we.boundingBox&&(v.style.top=a<c.top+oe?le-(a-c.top)+"px":le-se-(a-c.bottom)+"px"));var f=V(v,ce,le),p=z(f,ce,le),d=p!==Me;if(f!==he&&(g(f,Se.dragularenter,ee,Z,te,de,!!p),he&&g(he,Se.dragularleave,ee,Z,te,de,f),he=f),d&&(r(),Me=p,t()),p===Z&&we.copy)return void(ee.parentElement&&ee.parentElement.removeChild(ee));var m,h=_(p,f);if(null!==h)m=J(p,h,ce,le);else{if(we.revertOnSpill!==!0||we.copy)return void(we.copy&&null!==ee.parentElement&&ee.parentElement.removeChild(ee));m=fe,p=Z}(null===m||m!==ee&&m!==o(ee)&&m!==pe)&&(pe=m,p.insertBefore(ee,m),we.scope&&we.scope.$emit("shadow",ee,p))}}function I(){l(ee,we.classes.hide)}function K(){Oe.dragging&&c(ee,we.classes.hide)}function P(e){if(ve){var n=ve.scrollTop;ve.scrollTop+=e.deltaY,n!==ve.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function U(){if(!v){var e=ne.getBoundingClientRect();v=ne.cloneNode(!0),ue=e.width,se=e.height,v.style.width=f(e)+"px",v.style.height=p(e)+"px",l(v,we.classes.transit),c(v,we.classes.mirror),we.mirrorContainer.appendChild(v),n(xe,"on","mousemove",F),c(Ee,we.classes.unselectable),n(v,"on","wheel",P),we.scope&&we.scope.$emit("cloned",v,ne)}}function W(){v&&(l(Ee,we.classes.unselectable),n(xe,"off","mousemove",F),n(v,"off","wheel",P),v.parentElement.removeChild(v),v=null)}function _(e,n){for(var t=n;t!==e&&t.parentElement!==e;)t=t.parentElement;return t===xe?null:t}function J(e,n,t,r){function i(){var n,o,i,a=e.children.length;for(n=0;a>n;n++){if(o=e.children[n],i=o.getBoundingClientRect(),l&&i.left>t)return o;if(!l&&i.top>r)return o}return null}function a(){var e=n.getBoundingClientRect();return c(l?t>e.left+f(e)/2:r>e.top+p(e)/2)}function c(e){return e?o(n):n}var l="horizontal"===we.direction,u=n!==e?a():i();return u}function G(e,n){return"undefined"!=typeof window[n]?window[n]:xe.clientHeight?xe[e]:Ee[e]}function Q(e){var n=e.getBoundingClientRect(),t=G("scrollTop","pageYOffset"),r=G("scrollLeft","pageXOffset");return{left:n.left+r,right:n.right+r,top:n.top+t,bottom:n.bottom+t}}function V(e,n,t){var r,o=e||{},i=o.className;return o.className+=" "+we.classes.hide,r=document.elementFromPoint(n,t),o.className=i,r}1!==arguments.length||Array.isArray(a)||angular.isElement(a)||a[0]||(u=a,a=[]);var Z,ee,ne,te,re,oe,ie,ae,ce,le,ue,se,fe,pe,de,ge,me,ve,he,ye,Ee=document.body,xe=document.documentElement,Me=null,Se={},be={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},we={dragOverEventNames:["dragularenter","dragularleave","dragularrelease"],classes:be,containers:!1,moves:r,accepts:r,isContainer:t,copy:!1,invalid:Y,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1};i(we.boundingBox)||(we.boundingBox=null),u&&u.classes&&(angular.extend(be,u.classes),angular.extend(u.classes,be)),angular.extend(we,u),we.mirrorContainer||(we.mirrorContainer=document.body),a=we.containers||a||[],a=h(a),we.containersModel&&(we.containersModel=Array.isArray(we.containersModel[0])?we.containersModel:[we.containersModel]),we.nameSpace||(we.nameSpace=["dragularCommon"]),Array.isArray(we.nameSpace)||(we.nameSpace=[we.nameSpace]),we.nameSpace.forEach(function(e){m(E,e,a),we.containersModel&&m(y,e,we.containersModel)}),me=M,S(),angular.forEach(we.dragOverEventNames,function(e){document.createEvent?(Se[e]=document.createEvent("HTMLEvents"),Se[e].initEvent(e,!0,!0)):(Se[e]=document.createEventObject(),Se[e].eventType=e)});var Oe={containers:E,containersModel:y,start:B,end:X,cancel:L,remove:H,destroy:O,dragging:!1};return Oe},m.cleanEnviroment=function(){h={},y={},E={},v=void 0},m}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map