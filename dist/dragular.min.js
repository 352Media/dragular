!function e(n,r,t){function o(a,c){if(!r[a]){if(!n[a]){var l="function"==typeof require&&require;if(!c&&l)return l(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var u=r[a]={exports:{}};n[a][0].call(u.exports,function(e){var r=n[a][1][e];return o(r?r:e)},u,u.exports,e,n,r,t)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<t.length;a++)o(t[a]);return o}({1:[function(e,n,r){"use strict";var t=e("./dragularModule");t.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(n,r,t){function o(e){try{return JSON.parse(e)}catch(n){return void 0}}var i=n[t.dragular]||o(t.dragular);i&&i.containersModel&&"string"==typeof i.containersModel&&(i.containersModel=n.$eval(i.containersModel)),e(r[0],i)}}}])},{"./dragularModule":2}],2:[function(e,n,r){"use strict";n.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,n,r){"use strict";var t=e("./dragularModule");t.factory("dragularService",["$rootScope","$timeout",function(e,n){function r(e,n,r,t){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove",wheel:"wheel"},i=angular.element(e);i[n](o[r],t),i[n](r,t)}function t(){return!1}function o(){return!0}function i(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}return e.nextElementSibling||n()}function a(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function c(e){var n=x[e];return n?n.lastIndex=0:x[e]=n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),n}function l(e,n){var r=e.className;r.length?c(n).test(r)||(e.className+=" "+n):e.className=n}function s(e,n){e.className=e.className.replace(c(n)," ").trim()}function u(e,n){return(" "+e.className+" ").indexOf(" "+n+" ")>-1}function d(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function f(e,n){var r=d(n),t={pageX:"clientX",pageY:"clientY"};return e in t&&!(e in r)&&t[e]in r&&(e=t[e]),r[e]}function p(e){return e.width||e.right-e.left}function g(e){return e.height||e.bottom-e.top}function v(e,n){return Array.prototype.indexOf.call(angular.element(n).children(),e)}var m,h={},y={},x={};return function(c,d){function x(e,n,r,t){n[r]||(n[r]=[]),Array.prototype.push.apply(n[r],t),e[r]=n[r]}function M(e){if(Array.isArray(e))return e;if(e.length){for(var n=e.length,r=[];n;)n--,r.push(e[n]);return r}return[e]}function O(e){return function(n){var r=Array.isArray(n)?n:M(n);r.forEach(function(n){Se.nameSpace?angular.forEach(Se.nameSpace,function(r,t){"add"===e?(we[t].push(n),console.warn&&void 0):(we[t].splice(we.indexOf(n),1),console.warn&&void 0)}):"add"===e?(we.push(n),console.warn&&void 0):(we.splice(we.indexOf(n),1),console.warn&&void 0)})}}function w(e){return-1!==Ce.containers.indexOf(e)||Se.isContainer(e)}function b(e){var n;for(n in Ce.containers)if(Ce.containers.hasOwnProperty(n)&&-1!==Ce.containers[n].indexOf(e))return!0;return!1}function E(e){var n=e?"off":"on";r(Me,n,"mouseup",T),c.forEach(function(e){r(e,"on","mousedown",C)})}function S(){E(!0),Ce.removeContainer(we),T({})}function C(e){e=e||window.event;var r=e.target;if(!(0!==e.which&&1!==e.which||e.metaKey||e.ctrlKey)&&$(r)===!0){if(!Se.direction){var t=r.parentElement,o=t.offsetHeight,i=t.offsetWidth,a=r.clientHeight,c=r.clientWidth;Se.direction=i/c>o/a?"horizontal":"vertical"}var l=W(J);ee=f("pageX",e)-l.left,ne=f("pageY",e)-l.top,oe=f("clientX",e),ie=f("clientY",e),Se.boundingBox&&(re=f("pageX",e)-l.right,te=f("pageY",e)-l.bottom),"number"==typeof Se.delay?me=n(function(){A(e)},Se.delay):A(e),e.preventDefault()}}function A(e){l(ge||J,Se.classes.transit),P(),m.style.left=oe-ee+"px",m.style.top=ie-ne+"px",R(e)}function $(e){var n=e;if(!(Ce.dragging&&m||he(e))){for(;e.parentElement&&!he(e.parentElement);){if(Se.invalid(e,n))return;if(e=e.parentElement,!e)return}var r=e.parentElement;if(r&&r&&!Se.invalid(e,n)&&Se.moves(e,r,n,Q,G)){if(B(),Se.containersModel){var t=c.indexOf(r),o=v(e,r);ue=de=o,G=Se.containersModel[t],V=G,Q=G[o],Se.copy&&(ve=angular.copy(Q))}return Se.copy&&(ge=e.cloneNode(!0),Se.scope&&Se.scope.$emit("cloned",ge,e,ve,Q)),I=r,J=e,le=se=i(e),Ce.dragging=!0,Se.scope&&Se.scope.$emit("drag",J,I),!0}}}function N(e){return"A"===e.tagName||"BUTTON"===e.tagName}function B(){if(Ce.dragging){var e=ge||J;Y(e,e.parentElement)}}function T(e){if(Ce.dragging){e=e||window.event,oe=f("clientX",e),ie=f("clientY",e);var n=ge||J,r=_(m,oe,ie),t=H(r,oe,ie);!t||Se.copy!==!1&&t===I?Se.removeOnSpill?X():D():Y(n,t),ye=null,Se.dragOverClasses&&fe&&(s(fe,pe),fe=null)}}function Y(e,n){Se.scope&&k(n)?Se.scope.$emit("cancel",e,I,ve||Q,G,V):Se.scope&&Se.scope.$emit("drop",e,n,I,ve||Q,G,V),j()}function X(){if(Ce.dragging){var e=ge||J,n=e.parentElement;if(Se.containersModel){var r=ve||Q;V.splice(V.indexOf(r),1)}else n&&n.removeChild(e);Se.scope&&Se.scope.$emit(Se.copy?"cancel":"remove",e,n,r,G,V),j()}}function D(e){if(Ce.dragging){var n=arguments.length>0?e:Se.revertOnSpill,r=ge||J,t=r.parentElement;t===I&&Se.copy&&(Se.containersModel?V.splice(V.indexOf(ve),1,ve):t.removeChild(ge));var o=k(t);o===!1&&Se.copy===!1&&n&&(Se.containersModel?(Z=V,V=G,q(ue)):I.insertBefore(r,le)),Se.scope&&(o||n)?Se.scope.$emit("cancel",r,I):Se.scope&&Se.scope.$emit("drop",r,t,I),j()}}function j(){var e=ge||J;U(),e&&s(e,Se.classes.transit),me&&n.cancel(me),Ce.dragging=!1,Se.scope&&(Se.scope.$emit("dragend",e),Se.scope.$emit("out",e,Oe,I)),I=J=ge=le=se=G=null,Q=ve=ue=de=me=Oe=null}function k(e,n){var r=n||(m?se:i(J||ge));return e===I&&r===le}function H(e,n,r){function t(){var t=!1;if(he(o)){ye=o;var i=z(o,e),a=F(o,i,n,r),c=k(o,a);if(t=c?!0:Se.accepts(J,o,I,a,Q,G),t&&Se.containersModel)if(Z=V,Se.nameSpace){for(var d in Ce.containers)if(Ce.containers.hasOwnProperty(d)&&-1!==Ce.containers[d].indexOf(o)){Z=V,V=be[d][Ce.containers[d].indexOf(o)];break}}else V=be[Ce.containers.indexOf(o)]}return Se.dragOverClasses&&u(o,Se.classes.overActive)&&o!==fe&&(fe&&s(fe,pe),pe=t?Se.classes.overAccepts:Se.classes.overDeclines,l(o,pe),fe=o),t}for(var o=e;o&&!t();)o=o.parentElement;return o}function R(n){function r(e){Se.scope.$emit(e,d,Oe,I)}function t(){h&&r("over")}function o(){Oe&&r("out")}if(m){n=n||window.event,oe=f("clientX",n),ie=f("clientY",n);var a,c,l,s=oe-ee,u=ie-ne;Se.boundingBox&&(a=f("pageX",n),c=f("pageY",n),l=W(Se.boundingBox)),Se.lockY||(!Se.boundingBox||a>l.left+ee&&a<l.right+re?m.style.left=s+"px":Se.boundingBox&&(m.style.left=a<l.left+ee?oe-(a-l.left)+"px":oe-ae-(a-l.right)+"px")),Se.lockX||(!Se.boundingBox||c>l.top+ne&&c<l.bottom+te?m.style.top=u+"px":Se.boundingBox&&(m.style.top=c<l.top+ne?ie-(c-l.top)+"px":ie-ce-(c-l.bottom)+"px"));var d=ge||J,p=_(m,oe,ie),g=H(p,oe,ie),h=null!==g&&g!==Oe;if((h||null===g)&&(Se.scope?(o(),Oe=g,t()):Oe=g),g===I&&Se.copy)return void(!Se.containersModel&&d.parentElement?d.parentElement.removeChild(d):Se.containersModel&&-1!==Z.indexOf(ve)&&(Z.splice(Z.indexOf(ve),1),e.$applyAsync()));var y,x=z(g,p);if(Se.containersModel)var M;if(null!==x)y=F(g,x,oe,ie),Se.containersModel&&(M=y?v(y,g):null);else{if(Se.revertOnSpill!==!0||Se.copy)return void(!Se.copy&&Se.removeOnSpill!==!0||null===d.parentElement||(Se.containersModel?(V.splice(M,1),e.$applyAsync()):d.parentElement.removeChild(d)));y=le,g=I,Se.containersModel&&(M=ue,Z=V,V=G)}(null===y||y!==d&&y!==i(d)&&y!==se)&&(se=y,Se.containersModel?q(M):g.insertBefore(d,y),Se.scope&&Se.scope.$emit("shadow",d,g))}}function q(n){if(Z===V){null===n&&(n=V.length);var r=n>de?n-1:n;V.splice(r,0,Z.splice(de,1)[0]),de=r}else null===n&&(n=V.length-1),Se.copy&&Z===G||Z.splice(de,1),Se.copy&&-1!==V.indexOf(ve)||(V.splice(n,0,ve||Q),de=n);e.$applyAsync()}function L(e){ye&&(ye.scrollTop+=e.deltaY,e.stopPropagation(),e.preventDefault())}function P(){if(!m){var e=J.getBoundingClientRect();m=J.cloneNode(!0),ae=e.width,ce=e.height,m.style.width=p(e)+"px",m.style.height=g(e)+"px",s(m,Se.classes.transit),l(m,Se.classes.mirror),Se.mirrorContainer.appendChild(m),r(Me,"on","mousemove",R),l(xe,Se.classes.unselectable),r(m,"on","wheel",L),Se.scope&&Se.scope.$emit("cloned",m,J)}}function U(){m&&(s(xe,Se.classes.unselectable),r(Me,"off","mousemove",R),r(m,"off","wheel",L),m.parentElement.removeChild(m),m=null)}function z(e,n){for(var r=n;r!==e&&r.parentElement!==e;)r=r.parentElement;return r===Me?null:r}function F(e,n,r,t){function o(){var n,o,i,a=e.children.length;for(n=0;a>n;n++){if(o=e.children[n],i=o.getBoundingClientRect(),l&&i.left>r)return o;if(!l&&i.top>t)return o}return null}function a(){var e=n.getBoundingClientRect();return c(l?r>e.left+p(e)/2:t>e.top+g(e)/2)}function c(e){return e?i(n):n}var l="horizontal"===Se.direction,s=n!==e?a():o();return s}function K(e,n){return"undefined"!=typeof window[n]?window[n]:Me.clientHeight?Me[e]:xe[e]}function W(e){var n=e.getBoundingClientRect(),r=K("scrollTop","pageYOffset"),t=K("scrollLeft","pageXOffset");return{left:n.left+t,right:n.right+t,top:n.top+r,bottom:n.bottom+r}}function _(e,n,r){if(!n&&!r)return null;var t,o=e||{},i=o.className;return o.className+=" "+Se.classes.hide,t=document.elementFromPoint(n,r),o.className=i,t}1!==arguments.length||Array.isArray(c)||angular.isElement(c)||c[0]||(d=c,c=[]);var I,J,G,Q,V,Z,ee,ne,re,te,oe,ie,ae,ce,le,se,ue,de,fe,pe,ge,ve,me,he,ye,xe=document.body,Me=document.documentElement,Oe=null,we={},be={},Ee={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit",overActive:"gu-over-active",overAccepts:"gu-over-accept",overDeclines:"gu-over-decline"},Se={classes:Ee,containers:!1,moves:o,accepts:o,isContainer:t,copy:!1,delay:!1,invalid:N,revertOnSpill:!1,removeOnSpill:!1,dragOverClasses:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1};a(Se.boundingBox)||(Se.boundingBox=null),d&&d.classes&&(angular.extend(Ee,d.classes),angular.extend(d.classes,Ee)),angular.extend(Se,d),Se.delay===!0&&(Se.delay=300),void 0===Se.mirrorContainer&&(Se.mirrorContainer=document.body),c=Se.containers||(c?M(c):[]),Se.containers&&(c=M(c)),Se.containersModel&&(Se.containersModel=Array.isArray(Se.containersModel[0])?Se.containersModel:[Se.containersModel]),Se.nameSpace?(Array.isArray(Se.nameSpace)||(Se.nameSpace=[Se.nameSpace]),Se.nameSpace.forEach(function(e){x(we,h,e,c),Se.containersModel&&x(be,y,e,Se.containersModel)}),he=b):(we=c,he=w,Se.containersModel&&(be=Se.containersModel)),E();var Ce={addContainer:O("add"),removeContainer:O("remove"),containers:we,start:$,end:B,cancel:D,remove:X,destroy:S,dragging:!1};return Ce}}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map