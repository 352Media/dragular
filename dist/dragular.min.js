!function e(n,t,r){function o(l,a){if(!t[l]){if(!n[l]){var c="function"==typeof require&&require;if(!a&&c)return c(l,!0);if(i)return i(l,!0);var s=new Error("Cannot find module '"+l+"'");throw s.code="MODULE_NOT_FOUND",s}var u=t[l]={exports:{}};n[l][0].call(u.exports,function(e){var t=n[l][1][e];return o(t?t:e)},u,u.exports,e,n,t,r)}return t[l].exports}for(var i="function"==typeof require&&require,l=0;l<r.length;l++)o(r[l]);return o}({1:[function(e,n,t){"use strict";var r=e("./dragularModule");r.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(n,t,r){function o(e){try{return JSON.parse(e)}catch(n){return void 0}}var i=n[r.dragular]||o(r.dragular);i&&i.containersModel&&"string"==typeof i.containersModel&&(i.containersModel=n.$eval(i.containersModel)),e(t[0],i)}}}])},{"./dragularModule":2}],2:[function(e,n,t){"use strict";n.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,n,t){"use strict";var r=e("./dragularModule");r.factory("dragularService",["$rootScope",function(e){function n(e,n,t,r){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i=angular.element(e);o[t]&&i[n](o[t],r),i[n](t,r)}function t(){return!1}function r(){return!0}function o(){return{}}function i(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}return e.nextElementSibling||n()}function l(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function a(e){var n=v.classesCache[e];return n?n.lastIndex=0:v.classesCache[e]=n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),n}function c(e,n){var t=e.className;t.length?a(n).test(t)||(e.className+=" "+n):e.className=n}function s(e,n){e.className=e.className.replace(a(n)," ").trim()}function u(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function d(e,n){var t=u(n),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in t)&&r[e]in t&&(e=r[e]),t[e]}function m(e){return e.width||e.right-e.left}function f(e){return e.height||e.bottom-e.top}function g(e,n){return Array.prototype.indexOf.call(angular.element(n).children(),e)}function p(e,n,t){e&&(v.extra=t,e.dispatchEvent?e.dispatchEvent(n):e.fireEvent("on"+n.eventType,n))}var v={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,sourceItem:null,sourceModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,isContainerModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},h=function(a,u){function h(e,n){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,n):[e]}function x(n){e.applyAsync(function(){var e=Array.isArray(n)?n:h(n);e.forEach(function(e){angular.forEach(ee.nameSpace,function(n){var t;t=v.containers[n].indexOf(e),v.containers[n].splice(t,1),v.containersCtx[n].splice(t,1)})})})}function y(e){var t=e?"off":"on";n(V,t,"mouseup",A),a.forEach(function(e){n(e,"on","mousedown",S)})}function E(e){var t=e?"off":"on";n(V,t,"mousemove",Y)}function C(e){var t=e?"off":"on";n(V,t,"selectstart",b),n(V,t,"click",b),n(V,t,"touchmove",b)}function M(){y(!0),x(a),A({})}function b(e){v.grabbed&&e.preventDefault()}function S(e){if(e=e||window.event,!(0!==e.which&&1!==e.which||e.metaKey||e.ctrlKey)){var n=X(e.target);n&&(v.grabbed=n,E(),"mousedown"===e.type&&e.preventDefault())}}function Y(e){if(E(!0),C(),B(),I(v.grabbed),!ee.direction){var n=v.sourceItem.parentElement,t=n.offsetHeight,r=n.offsetWidth,o=v.sourceItem.clientHeight,i=v.sourceItem.clientWidth;ee.direction=r/i>t/o?"horizontal":"vertical"}var l=_(v.sourceItem);v.offsetX=d("pageX",e)-l.left,v.offsetY=d("pageY",e)-l.top,v.clientX=d("clientX",e),v.clientY=d("clientY",e),ee.boundingBox&&(v.offsetXr=d("pageX",e)-l.right,v.offsetYb=d("pageY",e)-l.bottom),e.preventDefault(),c(v.item,ee.classes.transit),z(),v.mirror.style.left=v.clientX-v.offsetX+"px",v.mirror.style.top=v.clientY-v.offsetY+"px",L(e)}function X(e){if(!ne.dragging||!v.mirror){for(var n=e;e.parentElement&&!G(e.parentElement);){if(ee.invalid(e,n))return;if(e=e.parentElement,!e)return}var t=e.parentElement;if(t&&!ee.invalid(e,n)&&ee.moves(e,t,n))return{item:e,source:t}}}function O(e){var n=X(e);n&&I(n)}function I(e){v.sourceItem=v.item=e.item,v.source=e.source,v.initialSibling=v.currentSibling=i(e.item),ee.copy&&(v.item=e.item.cloneNode(!0),ee.scope&&ee.scope.$emit("cloned",v.item,e.item));var n=a.indexOf(e.source);return v.sourceModel=ee.containersModel[n],v.initialIndex=g(e.item,e.source),ne.dragging=!0,ee.scope&&ee.scope.$emit("drag",v.sourceItem,v.source),!0}function w(){return!1}function B(){ne.dragging&&$(v.item,v.item.parentElement)}function T(){v.grabbed=!1,E(!0),C(!0)}function A(e){if(T(),ne.dragging){e=e||window.event,v.clientX=d("clientX",e),v.clientY=d("clientY",e);var n=J(v.mirror,v.clientX,v.clientY),t=k(n,v.clientX,v.clientY);!t||ee.copy!==!1&&t===v.source?ee.removeOnSpill?D():N():$(v.item,t),v.target=null,v.lastElementBehindCursor&&p(v.lastElementBehindCursor,v.dragOverEvents.dragularrelease,n),ee.scope&&ee.scope.$emit("release",v.item,v.source)}}function $(n,t){if(ee.scope&&j(t)?ee.scope.$emit("cancel",n,v.source,v.sourceModel,v.initialIndex):ee.scope&&ee.scope.$emit("drop",n,t,v.source,v.sourceModel,v.initialIndex),v.sourceModel&&!j(t)){var r=n,o=g(r,t);e.$applyAsync(function(){t===v.source?v.sourceModel.splice(o,0,v.sourceModel.splice(v.initialIndex,1)[0]):(v.dropElmModel=ee.copy?angular.copy(v.sourceModel[v.initialIndex]):v.sourceModel[v.initialIndex],v.targetModel=v.isContainerModel?v.isContainerModel:v.targetCtx.m,t.removeChild(r),ee.copy||v.sourceModel.splice(v.initialIndex,1),v.targetModel.splice(o,0,v.dropElmModel)),n.parentElement&&n.parentElement.removeChild(n),H()})}else H()}function D(){if(ne.dragging){var n=v.item.parentElement;n&&n.removeChild(v.item),v.sourceModel&&e.$applyAsync(function(){v.sourceModel.splice(v.initialIndex,1),H()}),ee.scope&&ee.scope.$emit(ee.copy?"cancel":"remove",v.item,n,v.sourceModel,v.initialIndex),v.sourceModel||H()}}function N(e){if(ne.dragging){var n=arguments.length>0?e:ee.revertOnSpill,t=v.item.parentElement,r=j(t);r===!1&&ee.copy===!1&&n&&v.source.insertBefore(v.item,v.initialSibling),!v.sourceModel||ee.copy||n?ee.scope&&(r||n?ee.scope.$emit("cancel",v.item,v.source):ee.scope.$emit("drop",v.item,t,v.source)):$(v.item,t),(!v.sourceModel||ee.copy||n||r)&&H()}}function H(){T(),F(),v.item&&s(v.item,ee.classes.transit),ne.dragging=!1,ee.removeOnSpill===!0&&W(),ee.scope&&(ee.scope.$emit("out",v.item,v.lastDropTarget,v.source),ee.scope.$emit("dragend",v.item)),v.source=v.item=v.sourceItem=v.initialSibling=v.currentSibling=v.sourceModel=null,v.initialIndex=v.currentIndex=v.lastDropTarget=v.isContainerModel=v.targetModel=null,v.dropElmModel=v.targetCtx=null}function j(e,n){var t=n||(v.mirror?v.currentSibling:i(v.item));return e===v.source&&t===v.initialSibling}function k(e,n,t){function r(){var r=!1;if(G(o)){for(var i=K(o,e),l=P(o,i,n,t),a=j(o,l),c=ee.nameSpace.length;c--;){if(-1!==v.containers[ee.nameSpace[c]].indexOf(o)){v.targetCtx=v.containersCtx[ee.nameSpace[c]][v.containers[ee.nameSpace[c]].indexOf(o)];break}v.targetCtx||(v.targetCtx=v.containersCtx.dragularCommon[v.containers.dragularCommon.indexOf(o)])}r=a||v.targetCtx.o.accepts(v.item,o,v.source,l,v.sourceModel,v.initialIndex)&&ee.canBeAccepted(v.item,o,v.source,l,v.sourceModel,v.initialIndex),v.target!==o&&(v.target=o)}return r}for(var o=e;o&&!r();)o=o.parentElement;return o}function L(e){function n(e){ee.scope&&ee.scope.$emit(e,v.item,v.lastDropTarget,v.source),ee.removeOnSpill===!0&&("over"===e?R():W())}function t(){f&&n("over")}function r(){v.lastDropTarget&&n("out")}if(v.mirror){e=e||window.event,v.clientX=d("clientX",e),v.clientY=d("clientY",e);var o,l,a,c=v.clientX-v.offsetX,s=v.clientY-v.offsetY;ee.boundingBox&&(o=d("pageX",e),l=d("pageY",e),a=_(ee.boundingBox)),ee.lockY||(!ee.boundingBox||o>a.left+v.offsetX&&o<a.right+v.offsetXr?v.mirror.style.left=c+"px":ee.boundingBox&&(v.mirror.style.left=o<a.left+v.offsetX?v.clientX-(o-a.left)+"px":v.clientX-v.mirrorWidth-(o-a.right)+"px")),ee.lockX||(!ee.boundingBox||l>a.top+v.offsetY&&l<a.bottom+v.offsetYb?v.mirror.style.top=s+"px":ee.boundingBox&&(v.mirror.style.top=l<a.top+v.offsetY?v.clientY-(l-a.top)+"px":v.clientY-v.mirrorHeight-(l-a.bottom)+"px"));var u=J(v.mirror,v.clientX,v.clientY),m=k(u,v.clientX,v.clientY),f=m!==v.lastDropTarget;if(u!==v.lastElementBehindCursor&&(p(u,v.dragOverEvents.dragularenter,!!m),v.lastElementBehindCursor&&p(v.lastElementBehindCursor,v.dragOverEvents.dragularleave,u),v.lastElementBehindCursor=u),f&&(r(),v.lastDropTarget=m,t()),m===v.source&&ee.copy)return void(v.item.parentElement&&v.item.parentElement.removeChild(v.item));var g,h=K(m,u);if(null!==h)g=P(m,h,v.clientX,v.clientY);else{if(ee.revertOnSpill!==!0||ee.copy)return void(ee.copy&&null!==v.item.parentElement&&v.item.parentElement.removeChild(v.item));g=v.initialSibling,m=v.source}(null===g||g!==v.item&&g!==i(v.item)&&g!==v.currentSibling)&&(v.currentSibling=g,m.insertBefore(v.item,g),ee.scope&&ee.scope.$emit("shadow",v.item,m))}}function R(){s(v.item,ee.classes.hide)}function W(){ne.dragging&&c(v.item,ee.classes.hide)}function q(e){if(v.target){var n=v.target.scrollTop;v.target.scrollTop+=e.deltaY,n!==v.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function z(){if(!v.mirror){var e=v.sourceItem.getBoundingClientRect();v.mirror=v.sourceItem.cloneNode(!0),v.mirrorWidth=e.width,v.mirrorHeight=e.height,v.mirror.style.width=m(e)+"px",v.mirror.style.height=f(e)+"px",s(v.mirror,ee.classes.transit),c(v.mirror,ee.classes.mirror),ee.mirrorContainer.appendChild(v.mirror),n(V,"on","mousemove",L),c(Q,ee.classes.unselectable),n(v.mirror,"on","wheel",q),ee.scope&&ee.scope.$emit("cloned",v.mirror,v.sourceItem)}}function F(){v.mirror&&(s(Q,ee.classes.unselectable),n(V,"off","mousemove",L),n(v.mirror,"off","wheel",q),v.mirror.parentElement.removeChild(v.mirror),v.mirror=null)}function K(e,n){for(var t=n;t!==e&&t.parentElement!==e;)t=t.parentElement;return t===V?null:t}function P(e,n,t,r){function o(){var n,o,i,l=e.children.length;for(n=0;l>n;n++){if(o=e.children[n],i=o.getBoundingClientRect(),c&&i.left>t)return o;if(!c&&i.top>r)return o}return null}function l(){var e=n.getBoundingClientRect();return a(c?t>e.left+m(e)/2:r>e.top+f(e)/2)}function a(e){return e?i(n):n}var c="horizontal"===ee.direction,s=n!==e?l():o();return s}function U(e,n){return"undefined"!=typeof window[n]?window[n]:V.clientHeight?V[e]:Q[e]}function _(e){var n=e.getBoundingClientRect(),t=U("scrollTop","pageYOffset"),r=U("scrollLeft","pageXOffset");return{left:n.left+r,right:n.right+r,top:n.top+t,bottom:n.bottom+t}}function J(e,n,t){var r,o=e||{},i=o.className;return o.className+=" "+ee.classes.hide,r=document.elementFromPoint(n,t),o.className=i,r}1!==arguments.length||Array.isArray(a)||angular.isElement(a)||a[0]||(u=a,a=[]);var G,Q=document.body,V=document.documentElement,Z={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},ee={dragOverEventNames:["dragularenter","dragularleave","dragularrelease"],classes:Z,containers:!1,moves:r,accepts:r,canBeAccepted:r,isContainer:t,copy:!1,invalid:w,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1,isContainerModel:o};l(ee.boundingBox)||(ee.boundingBox=null),u&&u.classes&&(angular.extend(Z,u.classes),angular.extend(u.classes,Z)),angular.extend(ee,u),ee.mirrorContainer||(ee.mirrorContainer=document.body),a=ee.containers||a||[],a=h(a),ee.containersModel=ee.containersModel?Array.isArray(ee.containersModel[0])?ee.containersModel:[ee.containersModel]:[],ee.nameSpace||(ee.nameSpace=["dragularCommon"]),Array.isArray(ee.nameSpace)||(ee.nameSpace=[ee.nameSpace]),ee.nameSpace.forEach(function(e){v.containers[e]||(v.containers[e]=[],v.containersCtx[e]=[]);for(var n=a.length,t=v.containers[e].length,r=0;n>r;r++)v.containers[e][r+t]=a[r],v.containersCtx[e][r+t]={o:ee,m:ee.containersModel[r]}}),y(),angular.forEach(ee.dragOverEventNames,function(e){document.createEvent?(v.dragOverEvents[e]=document.createEvent("HTMLEvents"),v.dragOverEvents[e].initEvent(e,!0,!0)):(v.dragOverEvents[e]=document.createEventObject(),v.dragOverEvents[e].eventType=e)}),G=function(e){for(var n=ee.nameSpace.length;n--;)if(-1!==v.containers[ee.nameSpace[n]].indexOf(e))return!0;return ee.isContainer(e)?(v.isContainerModel=ee.isContainerModel(e),!0):(v.isContainerModel=null,!1)};var ne={containers:v.containers,containersCtx:v.containersCtx,isContainer:G,start:O,end:B,cancel:N,remove:D,destroy:M,dragging:!1};return ne};return h.cleanEnviroment=function(){v.classesCache={},v.containersCtx={},v.containers={},v.mirror=void 0},h.shared=v,h}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map