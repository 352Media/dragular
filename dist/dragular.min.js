!function e(n,t,r){function o(a,c){if(!t[a]){if(!n[a]){var l="function"==typeof require&&require;if(!c&&l)return l(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var u=t[a]={exports:{}};n[a][0].call(u.exports,function(e){var t=n[a][1][e];return o(t?t:e)},u,u.exports,e,n,t,r)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,t){"use strict";var r=e("./dragularModule");r.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(n,t,r){function o(e){try{return JSON.parse(e)}catch(n){return void 0}}var i=n[r.dragular]||o(r.dragular);i&&i.containersModel&&"string"==typeof i.containersModel&&(i.containersModel=n.$eval(i.containersModel)),e(t[0],i)}}}])},{"./dragularModule":2}],2:[function(e,n,t){"use strict";n.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,n,t){"use strict";var r=e("./dragularModule");r.factory("dragularService",["$rootScope",function(e){function n(e,n,t,r){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i=angular.element(e);o[t]&&i[n](o[t],r),i[n](t,r)}function t(){return!1}function r(){return!0}function o(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}return e.nextElementSibling||n()}function i(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function a(e){var n=x[e];return n?n.lastIndex=0:x[e]=n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),n}function c(e,n){var t=e.className;t.length?a(n).test(t)||(e.className+=" "+n):e.className=n}function l(e,n){e.className=e.className.replace(a(n)," ").trim()}function s(e,n){return(" "+e.className+" ").indexOf(" "+n+" ")>-1}function u(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function f(e,n){var t=u(n),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in t)&&r[e]in t&&(e=r[e]),t[e]}function d(e){return e.width||e.right-e.left}function p(e){return e.height||e.bottom-e.top}function v(e,n){return Array.prototype.indexOf.call(angular.element(n).children(),e)}function g(e,n){e&&(e.dispatchEvent?e.dispatchEvent(n):e.fireEvent("on"+n.eventType,n))}var m,h={},y={},x={};return function(a,u){function x(e,n,t,r){n[t]||(n[t]=[]),Array.prototype.push.apply(n[t],r),e[t]=n[t]}function E(e,n){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,n):[e]}function M(n){e.applyAsync(function(){var e=Array.isArray(n)?n:E(n);e.forEach(function(e){He.nameSpace?angular.forEach(He.nameSpace,function(n){var t;t=Xe[n].indexOf(e),Xe[n].splice(t,1),He.containersModel&&je[n].splice(t,1)}):Xe.splice(Xe.indexOf(e),1)})})}function O(e){return-1!==Le.containers.indexOf(e)||He.isContainer(e)}function b(e){var n;for(n in Le.containers)if(Le.containers.hasOwnProperty(n)&&-1!==Le.containers[n].indexOf(e))return!0;return!1}function w(e){var t=e?"off":"on";n(Ye,t,"mouseup",H),a.forEach(function(e){n(e,"on","mousedown",$)})}function S(e){var t=e?"off":"on";n(Ye,t,"mousemove",B)}function A(e){var t=e?"off":"on";n(Ye,t,"selectstart",T),n(Ye,t,"click",T)}function C(){w(!0),M(a),H({})}function T(e){$e&&e.preventDefault()}function $(e){if(e=e||window.event,!(0!==e.which&&1!==e.which||e.metaKey||e.ctrlKey)){var n=e.target,t=N(n);t&&($e=t,S(),"mousedown"===e.type&&e.preventDefault())}}function B(e){if(S(!0),A(),j(),D($e),!He.direction){var n=re.parentElement,t=n.offsetHeight,r=n.offsetWidth,o=re.clientHeight,i=re.clientWidth;He.direction=r/i>t/o?"horizontal":"vertical"}var a=ee(re);le=f("pageX",e)-a.left,se=f("pageY",e)-a.top,de=f("clientX",e),pe=f("clientY",e),He.boundingBox&&(ue=f("pageX",e)-a.right,fe=f("pageY",e)-a.bottom),e.preventDefault(),c(Oe||re,He.classes.transit),J(),m.style.left=de-le+"px",m.style.top=pe-se+"px",K(e)}function N(e){if(!(Le.dragging&&m||we(e))){for(var n=e;e.parentElement&&!we(e.parentElement);){if(He.invalid(e,n))return;if(e=e.parentElement,!e)return}var t=e.parentElement;if(t&&t&&!He.invalid(e,n)&&He.moves(e,t,n,ie,oe))return{item:e,source:t}}}function Y(e){var n=N(e);n&&D(n)}function D(e){if(He.containersModel){var n=a.indexOf(e.source),t=v(e.item,e.source);ye=xe=t,oe=He.containersModel[n],ae=oe,ie=oe[t],He.copy&&(be=angular.copy(ie))}return He.copy&&(Oe=e.item.cloneNode(!0),He.scope&&He.scope.$emit("cloned",Oe,e.item,be,ie)),te=e.source,re=e.item,me=he=o(e.item),Le.dragging=!0,He.scope&&He.scope.$emit("drag",re,te),!0}function X(){return!1}function j(){if(Le.dragging){var e=Oe||re;L(e,e.parentElement)}}function k(){$e=!1,S(!0),A(!0)}function H(e){if(k(),Le.dragging){e=e||window.event,de=f("clientX",e),pe=f("clientY",e);var n=Oe||re,t=ne(m,de,pe),r=F(t,de,pe);!r||He.copy!==!1&&r===te?He.removeOnSpill?R():q():(L(n,r),He.containersModel&&_(Be,!0)),Se=null,He.dragOverClasses&&Ee&&(l(Ee,Me),Ee=null),He.scope&&He.scope.$emit("release",n,te)}}function L(e,n){He.scope&&z(n)?He.scope.$emit("cancel",e,te,be||ie,oe,ae):He.scope&&He.scope.$emit("drop",e,n,te,be||ie,oe,ae),He.containersModel||P()}function R(){if(Le.dragging){var n,t=Oe||re,r=t.parentElement;He.containersModel?e.$applyAsync(function(){ae.splice(ae.indexOf(be||ie),1),P()}):r&&r.removeChild(t),He.scope&&He.scope.$emit(He.copy?"cancel":"remove",t,r,n,oe,ae),He.containresModel||P()}}function q(e){if(Le.dragging){var n=arguments.length>0?e:He.revertOnSpill,t=Oe||re,r=t.parentElement;r===te&&He.copy&&r.removeChild(Oe);var o=z(r);o===!1&&He.copy===!1&&n&&(He.containersModel?(ce=ae,ae=oe,_(ye,!0)):te.insertBefore(t,me)),He.scope&&(o||n)?He.scope.$emit("cancel",t,te):He.scope&&He.scope.$emit("drop",t,r,te),(!He.containersModel||He.copy)&&P()}}function P(){k();var e=Oe||re;G(),e&&l(e,He.classes.transit),Le.dragging=!1,He.removeOnSpill===!0&&W(),He.scope&&(He.scope.$emit("out",e,De,te),He.scope.$emit("dragend",e)),te=re=Oe=me=he=oe=null,ie=be=ye=xe=De=null}function z(e,n){var t=n||(m?he:o(re||Oe));return e===te&&t===me}function F(e,n,t){function r(){var r=!1;if(we(o)){var i=Q(o,e),a=V(o,i,n,t),u=z(o,a);if(r=u?!0:He.accepts(re,o,te,a,ie,oe),Se!==o&&(Se=o,r&&He.containersModel))if(He.nameSpace){for(var f in Le.containers)if(Le.containers.hasOwnProperty(f)&&-1!==Le.containers[f].indexOf(o)){ce=ae,ae=je[f][Le.containers[f].indexOf(o)];break}}else ce=ae,ae=je[Le.containers.indexOf(o)]}return He.dragOverClasses&&s(o,He.classes.overActive)&&o!==Ee&&(Ee&&l(Ee,Me),Me=r?He.classes.overAccepts:He.classes.overDeclines,c(o,Me),Ee=o),r}for(var o=e;o&&!r();)o=o.parentElement;return o}function K(e){function n(e){He.scope&&He.scope.$emit(e,re,De,te),He.removeOnSpill===!0&&("over"===e?U():W())}function t(){h&&n("over")}function r(){De&&n("out")}if(m){e=e||window.event,de=f("clientX",e),pe=f("clientY",e);var i,a,c,l=de-le,s=pe-se;He.boundingBox&&(i=f("pageX",e),a=f("pageY",e),c=ee(He.boundingBox)),He.lockY||(!He.boundingBox||i>c.left+le&&i<c.right+ue?m.style.left=l+"px":He.boundingBox&&(m.style.left=i<c.left+le?de-(i-c.left)+"px":de-ve-(i-c.right)+"px")),He.lockX||(!He.boundingBox||a>c.top+se&&a<c.bottom+fe?m.style.top=s+"px":He.boundingBox&&(m.style.top=a<c.top+se?pe-(a-c.top)+"px":pe-ge-(a-c.bottom)+"px"));var u=Oe||re,d=ne(m,de,pe),p=F(d,de,pe),h=null!==p&&p!==De;if(d!==Te&&(g(d,Ae),Te&&g(Te,Ce),Te=d),(h||null===p)&&(r(),De=p,t()),p===te&&He.copy)return void(u.parentElement&&u.parentElement.removeChild(u));var y,x=Q(p,d);if(null!==x)y=V(p,x,de,pe),He.containersModel&&(Be=y?v(Oe||re,p):null);else{if(He.revertOnSpill!==!0||He.copy)return void(He.copy&&null!==u.parentElement&&u.parentElement.removeChild(u));y=me,p=te,He.containersModel&&(Be=ye,ce=ae,ae=oe)}(null===y||y!==u&&y!==o(u)&&y!==he)&&(he=y,p.insertBefore(u,y),He.scope&&He.scope.$emit("shadow",u,p))}}function U(){var e=Oe||re;l(e,He.classes.hide)}function W(){var e=Oe||re;Le.dragging&&c(e,He.classes.hide)}function _(n,t){e.$applyAsync(function(){if(null===n&&(n=ae.length),ce===ae?ae.splice(n,0,ce.splice(xe,1)[0]):(He.copy&&ce===oe||ce.splice(xe,1),He.copy&&-1!==ae.indexOf(be)||ae.splice(n,0,be||ie)),xe=n,t){var e=Oe||re;e.parentElement&&e.parentElement.removeChild(e),P()}})}function I(e){if(Se){var n=Se.scrollTop;Se.scrollTop+=e.deltaY,n!==Se.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function J(){if(!m){var e=re.getBoundingClientRect();m=re.cloneNode(!0),ve=e.width,ge=e.height,m.style.width=d(e)+"px",m.style.height=p(e)+"px",l(m,He.classes.transit),c(m,He.classes.mirror),He.mirrorContainer.appendChild(m),n(Ye,"on","mousemove",K),c(Ne,He.classes.unselectable),n(m,"on","wheel",I),He.scope&&He.scope.$emit("cloned",m,re)}}function G(){m&&(l(Ne,He.classes.unselectable),n(Ye,"off","mousemove",K),n(m,"off","wheel",I),m.parentElement.removeChild(m),m=null)}function Q(e,n){for(var t=n;t!==e&&t.parentElement!==e;)t=t.parentElement;return t===Ye?null:t}function V(e,n,t,r){function i(){var n,o,i,a=e.children.length;for(n=0;a>n;n++){if(o=e.children[n],i=o.getBoundingClientRect(),l&&i.left>t)return o;if(!l&&i.top>r)return o}return null}function a(){var e=n.getBoundingClientRect();return c(l?t>e.left+d(e)/2:r>e.top+p(e)/2)}function c(e){return e?o(n):n}var l="horizontal"===He.direction,s=n!==e?a():i();return s}function Z(e,n){return"undefined"!=typeof window[n]?window[n]:Ye.clientHeight?Ye[e]:Ne[e]}function ee(e){var n=e.getBoundingClientRect(),t=Z("scrollTop","pageYOffset"),r=Z("scrollLeft","pageXOffset");return{left:n.left+r,right:n.right+r,top:n.top+t,bottom:n.bottom+t}}function ne(e,n,t){var r,o=e||{},i=o.className;return o.className+=" "+He.classes.hide,r=document.elementFromPoint(n,t),o.className=i,r}1!==arguments.length||Array.isArray(a)||angular.isElement(a)||a[0]||(u=a,a=[]);var te,re,oe,ie,ae,ce,le,se,ue,fe,de,pe,ve,ge,me,he,ye,xe,Ee,Me,Oe,be,we,Se,Ae,Ce,Te,$e,Be,Ne=document.body,Ye=document.documentElement,De=null,Xe={},je={},ke={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit",overActive:"gu-over-active",overAccepts:"gu-over-accept",overDeclines:"gu-over-decline"},He={classes:ke,containers:!1,moves:r,accepts:r,isContainer:t,copy:!1,delay:!1,invalid:X,revertOnSpill:!1,removeOnSpill:!1,dragOverClasses:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1};i(He.boundingBox)||(He.boundingBox=null),u&&u.classes&&(angular.extend(ke,u.classes),angular.extend(u.classes,ke)),angular.extend(He,u),He.mirrorContainer||(He.mirrorContainer=document.body),a=He.containers||(a?E(a):[]),He.containers&&(a=E(a)),He.containersModel&&(He.containersModel=Array.isArray(He.containersModel[0])?He.containersModel:[He.containersModel]),He.nameSpace?(Array.isArray(He.nameSpace)||(He.nameSpace=[He.nameSpace]),He.nameSpace.forEach(function(e){x(Xe,h,e,a),He.containersModel&&x(je,y,e,He.containersModel)}),we=b):(Xe=a,we=O,He.containersModel&&(je=He.containersModel)),w(),document.createEvent?(Ae=document.createEvent("HTMLEvents"),Ae.initEvent("dragularenter",!0,!0),Ce=document.createEvent("HTMLEvents"),Ce.initEvent("dragularleave",!0,!0)):(Ae=document.createEventObject(),Ae.eventType="dragularenter",Ce=document.createEventObject(),Ce.eventType="dragularleave");var Le={containers:Xe,containersModel:je,start:Y,end:j,cancel:q,remove:R,destroy:C,dragging:!1};return Le}}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map