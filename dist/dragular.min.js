!function e(n,t,r){function o(a,c){if(!t[a]){if(!n[a]){var l="function"==typeof require&&require;if(!c&&l)return l(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var u=t[a]={exports:{}};n[a][0].call(u.exports,function(e){var t=n[a][1][e];return o(t?t:e)},u,u.exports,e,n,t,r)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,t){"use strict";var r=e("./dragularModule");r.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(n,t,r){function o(e){try{return JSON.parse(e)}catch(n){return void 0}}var i=n[r.dragular]||o(r.dragular);i&&i.containersModel&&"string"==typeof i.containersModel&&(i.containersModel=n.$eval(i.containersModel)),e(t[0],i)}}}])},{"./dragularModule":2}],2:[function(e,n,t){"use strict";n.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,n,t){"use strict";var r=e("./dragularModule");r.factory("dragularService",["$rootScope","$timeout",function(e,n){function t(e,n,t,r){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove",wheel:"wheel"},i=angular.element(e);i[n](o[t],r),i[n](t,r)}function r(){return!1}function o(){return!0}function i(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}return e.nextElementSibling||n()}function a(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function c(e){var n=x[e];return n?n.lastIndex=0:x[e]=n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),n}function l(e,n){var t=e.className;t.length?c(n).test(t)||(e.className+=" "+n):e.className=n}function s(e,n){e.className=e.className.replace(c(n)," ").trim()}function u(e,n){return(" "+e.className+" ").indexOf(" "+n+" ")>-1}function d(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function f(e,n){var t=d(n),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in t)&&r[e]in t&&(e=r[e]),t[e]}function p(e){return e.width||e.right-e.left}function g(e){return e.height||e.bottom-e.top}function v(e,n){return Array.prototype.indexOf.call(angular.element(n).children(),e)}var m,h={},y={},x={};return function(c,d){function x(e,n,t,r){n[t]||(n[t]=[]),Array.prototype.push.apply(n[t],r),e[t]=n[t]}function M(e){if(Array.isArray(e))return e;if(e.length){for(var n=e.length,t=[];n;)n--,t.push(e[n]);return t}return[e]}function O(e){return function(n){var t=Array.isArray(n)?n:M(n);t.forEach(function(n){Se.nameSpace?angular.forEach(Se.nameSpace,function(t,r){"add"===e?(we[r].push(n),console.warn&&void 0):(we[r].splice(we.indexOf(n),1),console.warn&&void 0)}):"add"===e?(we.push(n),console.warn&&void 0):(we.splice(we.indexOf(n),1),console.warn&&void 0)})}}function w(e){return-1!==Ce.containers.indexOf(e)||Se.isContainer(e)}function b(e){var n;for(n in Ce.containers)if(Ce.containers.hasOwnProperty(n)&&-1!==Ce.containers[n].indexOf(e))return!0;return!1}function E(e){var n=e?"off":"on";t(Me,n,"mouseup",T),c.forEach(function(e){t(e,"on","mousedown",C)})}function S(){E(!0),Ce.removeContainer(we),T({})}function C(e){e=e||window.event;var t=e.target;if(!(0!==e.which&&1!==e.which||e.metaKey||e.ctrlKey)&&$(t)===!0){if(!Se.direction){var r=t.parentElement,o=r.offsetHeight,i=r.offsetWidth,a=t.clientHeight,c=t.clientWidth;Se.direction=i/c>o/a?"horizontal":"vertical"}var l=W(J);ee=f("pageX",e)-l.left,ne=f("pageY",e)-l.top,oe=f("clientX",e),ie=f("clientY",e),Se.boundingBox&&(te=f("pageX",e)-l.right,re=f("pageY",e)-l.bottom),"number"==typeof Se.delay?me=n(function(){A(e)},Se.delay):A(e),e.preventDefault()}}function A(e){l(ge||J,Se.classes.transit),P(),m.style.left=oe-ee+"px",m.style.top=ie-ne+"px",R(e)}function $(e){var n=e;if(!(Ce.dragging&&m||he(e))){for(;e.parentElement&&!he(e.parentElement);){if(Se.invalid(e,n))return;if(e=e.parentElement,!e)return}var t=e.parentElement;if(t&&t&&!Se.invalid(e,n)&&Se.moves(e,t,n,Q,G)){if(B(),Se.containersModel){var r=c.indexOf(t),o=v(e,t);ue=de=o,G=Se.containersModel[r],V=G,Q=G[o],Se.copy&&(ve=angular.copy(Q))}return Se.copy&&(ge=e.cloneNode(!0),Se.scope&&Se.scope.$emit("cloned",ge,e,ve,Q)),I=t,J=e,le=se=i(e),Ce.dragging=!0,Se.scope&&Se.scope.$emit("drag",J,I),!0}}}function N(e){return"A"===e.tagName||"BUTTON"===e.tagName}function B(){if(Ce.dragging){var e=ge||J;Y(e,e.parentElement)}}function T(e){if(Ce.dragging){e=e||window.event,oe=f("clientX",e),ie=f("clientY",e);var n=ge||J,t=_(m,oe,ie),r=H(t,oe,ie);!r||Se.copy!==!1&&r===I?Se.removeOnSpill?X():D():Y(n,r),ye=null,Se.dragOverClasses&&fe&&(s(fe,pe),fe=null)}}function Y(e,n){Se.scope&&k(n)?Se.scope.$emit("cancel",e,I,ve||Q,G,V):Se.scope&&Se.scope.$emit("drop",e,n,I,ve||Q,G,V),j()}function X(){if(Ce.dragging){var e,n=ge||J,t=n.parentElement;Se.containersModel?(e=ve||Q,V.splice(V.indexOf(e),1)):t&&t.removeChild(n),Se.scope&&Se.scope.$emit(Se.copy?"cancel":"remove",n,t,e,G,V),j()}}function D(e){if(Ce.dragging){var n=arguments.length>0?e:Se.revertOnSpill,t=ge||J,r=t.parentElement;r===I&&Se.copy&&(Se.containersModel?V.splice(V.indexOf(ve),1,ve):r.removeChild(ge));var o=k(r);o===!1&&Se.copy===!1&&n&&(Se.containersModel?(Z=V,V=G,q(ue)):I.insertBefore(t,le)),Se.scope&&(o||n)?Se.scope.$emit("cancel",t,I):Se.scope&&Se.scope.$emit("drop",t,r,I),j()}}function j(){var e=ge||J;U(),e&&s(e,Se.classes.transit),me&&n.cancel(me),Ce.dragging=!1,Se.scope&&(Se.scope.$emit("dragend",e),Se.scope.$emit("out",e,Oe,I)),I=J=ge=le=se=G=null,Q=ve=ue=de=me=Oe=null}function k(e,n){var t=n||(m?se:i(J||ge));return e===I&&t===le}function H(e,n,t){function r(){var r=!1;if(he(o)){ye=o;var i=z(o,e),a=F(o,i,n,t),c=k(o,a);if(r=c?!0:Se.accepts(J,o,I,a,Q,G),r&&Se.containersModel)if(Z=V,Se.nameSpace){for(var d in Ce.containers)if(Ce.containers.hasOwnProperty(d)&&-1!==Ce.containers[d].indexOf(o)){Z=V,V=be[d][Ce.containers[d].indexOf(o)];break}}else V=be[Ce.containers.indexOf(o)]}return Se.dragOverClasses&&u(o,Se.classes.overActive)&&o!==fe&&(fe&&s(fe,pe),pe=r?Se.classes.overAccepts:Se.classes.overDeclines,l(o,pe),fe=o),r}for(var o=e;o&&!r();)o=o.parentElement;return o}function R(n){function t(e){Se.scope.$emit(e,d,Oe,I)}function r(){h&&t("over")}function o(){Oe&&t("out")}if(m){n=n||window.event,oe=f("clientX",n),ie=f("clientY",n);var a,c,l,s=oe-ee,u=ie-ne;Se.boundingBox&&(a=f("pageX",n),c=f("pageY",n),l=W(Se.boundingBox)),Se.lockY||(!Se.boundingBox||a>l.left+ee&&a<l.right+te?m.style.left=s+"px":Se.boundingBox&&(m.style.left=a<l.left+ee?oe-(a-l.left)+"px":oe-ae-(a-l.right)+"px")),Se.lockX||(!Se.boundingBox||c>l.top+ne&&c<l.bottom+re?m.style.top=u+"px":Se.boundingBox&&(m.style.top=c<l.top+ne?ie-(c-l.top)+"px":ie-ce-(c-l.bottom)+"px"));var d=ge||J,p=_(m,oe,ie),g=H(p,oe,ie),h=null!==g&&g!==Oe;if((h||null===g)&&(Se.scope?(o(),Oe=g,r()):Oe=g),g===I&&Se.copy)return void(!Se.containersModel&&d.parentElement?d.parentElement.removeChild(d):Se.containersModel&&-1!==Z.indexOf(ve)&&(Z.splice(Z.indexOf(ve),1),e.$applyAsync()));var y,x,M=z(g,p);if(null!==M)y=F(g,M,oe,ie),Se.containersModel&&(x=y?v(y,g):null);else{if(Se.revertOnSpill!==!0||Se.copy)return void(!Se.copy&&Se.removeOnSpill!==!0||null===d.parentElement||(Se.containersModel?(V.splice(x,1),e.$applyAsync()):d.parentElement.removeChild(d)));y=le,g=I,Se.containersModel&&(x=ue,Z=V,V=G)}(null===y||y!==d&&y!==i(d)&&y!==se)&&(se=y,Se.containersModel?q(x):g.insertBefore(d,y),Se.scope&&Se.scope.$emit("shadow",d,g))}}function q(n){if(Z===V){null===n&&(n=V.length);var t=n>de?n-1:n;V.splice(t,0,Z.splice(de,1)[0]),de=t}else null===n&&(n=V.length-1),Se.copy&&Z===G||Z.splice(de,1),Se.copy&&-1!==V.indexOf(ve)||(V.splice(n,0,ve||Q),de=n);e.$applyAsync()}function L(e){ye&&(ye.scrollTop+=e.deltaY,e.stopPropagation(),e.preventDefault())}function P(){if(!m){var e=J.getBoundingClientRect();m=J.cloneNode(!0),ae=e.width,ce=e.height,m.style.width=p(e)+"px",m.style.height=g(e)+"px",s(m,Se.classes.transit),l(m,Se.classes.mirror),Se.mirrorContainer.appendChild(m),t(Me,"on","mousemove",R),l(xe,Se.classes.unselectable),t(m,"on","wheel",L),Se.scope&&Se.scope.$emit("cloned",m,J)}}function U(){m&&(s(xe,Se.classes.unselectable),t(Me,"off","mousemove",R),t(m,"off","wheel",L),m.parentElement.removeChild(m),m=null)}function z(e,n){for(var t=n;t!==e&&t.parentElement!==e;)t=t.parentElement;return t===Me?null:t}function F(e,n,t,r){function o(){var n,o,i,a=e.children.length;for(n=0;a>n;n++){if(o=e.children[n],i=o.getBoundingClientRect(),l&&i.left>t)return o;if(!l&&i.top>r)return o}return null}function a(){var e=n.getBoundingClientRect();return c(l?t>e.left+p(e)/2:r>e.top+g(e)/2)}function c(e){return e?i(n):n}var l="horizontal"===Se.direction,s=n!==e?a():o();return s}function K(e,n){return"undefined"!=typeof window[n]?window[n]:Me.clientHeight?Me[e]:xe[e]}function W(e){var n=e.getBoundingClientRect(),t=K("scrollTop","pageYOffset"),r=K("scrollLeft","pageXOffset");return{left:n.left+r,right:n.right+r,top:n.top+t,bottom:n.bottom+t}}function _(e,n,t){if(!n&&!t)return null;var r,o=e||{},i=o.className;return o.className+=" "+Se.classes.hide,r=document.elementFromPoint(n,t),o.className=i,r}1!==arguments.length||Array.isArray(c)||angular.isElement(c)||c[0]||(d=c,c=[]);var I,J,G,Q,V,Z,ee,ne,te,re,oe,ie,ae,ce,le,se,ue,de,fe,pe,ge,ve,me,he,ye,xe=document.body,Me=document.documentElement,Oe=null,we={},be={},Ee={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit",overActive:"gu-over-active",overAccepts:"gu-over-accept",overDeclines:"gu-over-decline"},Se={classes:Ee,containers:!1,moves:o,accepts:o,isContainer:r,copy:!1,delay:!1,invalid:N,revertOnSpill:!1,removeOnSpill:!1,dragOverClasses:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1};a(Se.boundingBox)||(Se.boundingBox=null),d&&d.classes&&(angular.extend(Ee,d.classes),angular.extend(d.classes,Ee)),angular.extend(Se,d),Se.delay===!0&&(Se.delay=300),void 0===Se.mirrorContainer&&(Se.mirrorContainer=document.body),c=Se.containers||(c?M(c):[]),Se.containers&&(c=M(c)),Se.containersModel&&(Se.containersModel=Array.isArray(Se.containersModel[0])?Se.containersModel:[Se.containersModel]),Se.nameSpace?(Array.isArray(Se.nameSpace)||(Se.nameSpace=[Se.nameSpace]),Se.nameSpace.forEach(function(e){x(we,h,e,c),Se.containersModel&&x(be,y,e,Se.containersModel)}),he=b):(we=c,he=w,Se.containersModel&&(be=Se.containersModel)),E();var Ce={addContainer:O("add"),removeContainer:O("remove"),containers:we,start:$,end:B,cancel:D,remove:X,destroy:S,dragging:!1};return Ce}}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map