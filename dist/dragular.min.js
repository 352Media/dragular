!function e(n,t,r){function o(a,c){if(!t[a]){if(!n[a]){var l="function"==typeof require&&require;if(!c&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var s=t[a]={exports:{}};n[a][0].call(s.exports,function(e){var t=n[a][1][e];return o(t?t:e)},s,s.exports,e,n,t,r)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,t){"use strict";var r=e("./dragularModule");r.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(n,t,r){function o(e){try{return JSON.parse(e)}catch(n){return void 0}}var i=n[r.dragular]||o(r.dragular);i&&i.containersModel&&"string"==typeof i.containersModel&&(i.containersModel=n.$eval(i.containersModel)),e(t[0],i)}}}])},{"./dragularModule":2}],2:[function(e,n,t){"use strict";n.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,n,t){"use strict";var r=e("./dragularModule");r.factory("dragularService",["$rootScope",function(e){function n(e,n,t,r){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i=angular.element(e);o[t]&&i[n](o[t],r),i[n](t,r)}function t(){return!1}function r(){return!0}function o(){return{}}function i(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}return e.nextElementSibling||n()}function a(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function c(e){var n=y[e];return n?n.lastIndex=0:y[e]=n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),n}function l(e,n){var t=e.className;t.length?c(n).test(t)||(e.className+=" "+n):e.className=n}function u(e,n){e.className=e.className.replace(c(n)," ").trim()}function s(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function f(e,n){var t=s(n),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in t)&&r[e]in t&&(e=r[e]),t[e]}function p(e){return e.width||e.right-e.left}function d(e){return e.height||e.bottom-e.top}function g(e,n){return Array.prototype.indexOf.call(angular.element(n).children(),e)}function m(e,n,t,r,o,i,a){e&&(v.item=t,v.source=r,v.sourceModel=o,v.initialIndex=i,v.extra=a,e.dispatchEvent?e.dispatchEvent(n):e.fireEvent("on"+n.eventType,n))}var v,h,y={},E={},x={};return v=function(c,s){function v(e,n,t){e[n]||(e[n]=[]),Array.prototype.push.apply(e[n],t)}function y(e,n){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,n):[e]}function M(n){e.applyAsync(function(){var e=Array.isArray(n)?n:y(n);e.forEach(function(e){angular.forEach(Ce.nameSpace,function(n){var t;t=x[n].indexOf(e),x[n].splice(t,1),Ce.containersModel&&E[n].splice(t,1)})})})}function S(e){for(var n=Ce.nameSpace.length;n--;)if(-1!==Te.containers[Ce.nameSpace[n]].indexOf(e))return!0;return Ce.isContainer(e)?(he=Ce.isContainerModel(e),!0):(he=null,!1)}function b(e){var t=e?"off":"on";n(Se,t,"mouseup",k),c.forEach(function(e){n(e,"on","mousedown",$)})}function w(e){var t=e?"off":"on";n(Se,t,"mousemove",A)}function O(e){var t=e?"off":"on";n(Se,t,"selectstart",T),n(Se,t,"click",T),n(Se,t,"touchmove",T)}function C(){b(!0),M(c),k({})}function T(e){xe&&e.preventDefault()}function $(e){if(e=e||window.event,!(0!==e.which&&1!==e.which||e.metaKey||e.ctrlKey)){var n=B(e.target);n&&(xe=n,w(),"mousedown"===e.type&&e.preventDefault())}}function A(e){if(w(!0),O(),D(),Y(xe),!Ce.direction){var n=te.parentElement,t=n.offsetHeight,r=n.offsetWidth,o=te.clientHeight,i=te.clientWidth;Ce.direction=r/i>t/o?"horizontal":"vertical"}var a=V(te);oe=f("pageX",e)-a.left,ie=f("pageY",e)-a.top,le=f("clientX",e),ue=f("clientY",e),Ce.boundingBox&&(ae=f("pageX",e)-a.right,ce=f("pageY",e)-a.bottom),e.preventDefault(),l(ne,Ce.classes.transit),W(),h.style.left=le-oe+"px",h.style.top=ue-ie+"px",I(e)}function B(e){if(!Te.dragging||!h){for(var n=e;e.parentElement&&!ve(e.parentElement);){if(Ce.invalid(e,n))return;if(e=e.parentElement,!e)return}var t=e.parentElement;if(t&&!Ce.invalid(e,n)&&Ce.moves(e,t,n))return{item:e,source:t}}}function N(e){var n=B(e);n&&Y(n)}function Y(e){if(te=ne=e.item,ee=e.source,pe=de=i(e.item),Ce.copy&&(ne=e.item.cloneNode(!0),Ce.scope&&Ce.scope.$emit("cloned",ne,e.item)),Ce.containersModel){var n=c.indexOf(e.source);re=Ce.containersModel[n],ge=g(e.item,e.source)}return Te.dragging=!0,Ce.scope&&Ce.scope.$emit("drag",te,ee),!0}function X(){return!1}function D(){Te.dragging&&H(ne,ne.parentElement)}function j(){xe=!1,w(!0),O(!0)}function k(e){if(j(),Te.dragging){e=e||window.event,le=f("clientX",e),ue=f("clientY",e);var n=Z(h,le,ue),t=F(n,le,ue);!t||Ce.copy!==!1&&t===ee?Ce.removeOnSpill?L():R():H(ne,t),ye=null,Ee&&m(Ee,we.dragularrelease,ne,ee,re,ge,n),Ce.scope&&Ce.scope.$emit("release",ne,ee)}}function H(n,t){if(Ce.scope&&z(t)?Ce.scope.$emit("cancel",n,ee,re,ge):Ce.scope&&Ce.scope.$emit("drop",n,t,ee,re,ge),Ce.containersModel&&!z(t)){var r=n,o=g(r,t);e.$applyAsync(function(){if(t===ee)re.splice(o,0,re.splice(ge,1)[0]);else{var e,i=Ce.copy?angular.copy(re[ge]):re[ge];if(he)e=he;else for(var a=Ce.nameSpace.length;a--;)if(-1!==Te.containers[Ce.nameSpace[a]].indexOf(t)){e=E[Ce.nameSpace[a]][Te.containers[Ce.nameSpace[a]].indexOf(t)];break}t.removeChild(r),Ce.copy||re.splice(ge,1),e.splice(o,0,i)}n.parentElement&&n.parentElement.removeChild(n),q()})}else q()}function L(){if(Te.dragging){var n=ne.parentElement;n&&n.removeChild(ne),Ce.containersModel&&e.$applyAsync(function(){re.splice(ge,1),q()}),Ce.scope&&Ce.scope.$emit(Ce.copy?"cancel":"remove",ne,n,re,ge),Ce.containersModel||q()}}function R(e){if(Te.dragging){var n=arguments.length>0?e:Ce.revertOnSpill,t=ne.parentElement,r=z(t);r===!1&&Ce.copy===!1&&n&&ee.insertBefore(ne,pe),!Ce.containersModel||Ce.copy||n?Ce.scope&&(r||n?Ce.scope.$emit("cancel",ne,ee):Ce.scope.$emit("drop",ne,t,ee)):H(ne,t),(!Ce.containersModel||Ce.copy||n||r)&&q()}}function q(){j(),_(),ne&&u(ne,Ce.classes.transit),Te.dragging=!1,Ce.removeOnSpill===!0&&P(),Ce.scope&&(Ce.scope.$emit("out",ne,be,ee),Ce.scope.$emit("dragend",ne)),ee=ne=te=pe=de=re=null,ge=me=be=he=null}function z(e,n){var t=n||(h?de:i(ne));return e===ee&&t===pe}function F(e,n,t){function r(){var r=!1;if(ve(o)){var i=J(o,e),a=G(o,i,n,t),c=z(o,a);r=c||Ce.accepts(ne,o,ee,a,re,ge),ye!==o&&(ye=o)}return r}for(var o=e;o&&!r();)o=o.parentElement;return o}function I(e){function n(e){Ce.scope&&Ce.scope.$emit(e,ne,be,ee),Ce.removeOnSpill===!0&&("over"===e?K():P())}function t(){d&&n("over")}function r(){be&&n("out")}if(h){e=e||window.event,le=f("clientX",e),ue=f("clientY",e);var o,a,c,l=le-oe,u=ue-ie;Ce.boundingBox&&(o=f("pageX",e),a=f("pageY",e),c=V(Ce.boundingBox)),Ce.lockY||(!Ce.boundingBox||o>c.left+oe&&o<c.right+ae?h.style.left=l+"px":Ce.boundingBox&&(h.style.left=o<c.left+oe?le-(o-c.left)+"px":le-se-(o-c.right)+"px")),Ce.lockX||(!Ce.boundingBox||a>c.top+ie&&a<c.bottom+ce?h.style.top=u+"px":Ce.boundingBox&&(h.style.top=a<c.top+ie?ue-(a-c.top)+"px":ue-fe-(a-c.bottom)+"px"));var s=Z(h,le,ue),p=F(s,le,ue),d=p!==be;if(s!==Ee&&(m(s,we.dragularenter,ne,ee,re,ge,!!p),Ee&&m(Ee,we.dragularleave,ne,ee,re,ge,s),Ee=s),d&&(r(),be=p,t()),p===ee&&Ce.copy)return void(ne.parentElement&&ne.parentElement.removeChild(ne));var g,v=J(p,s);if(null!==v)g=G(p,v,le,ue);else{if(Ce.revertOnSpill!==!0||Ce.copy)return void(Ce.copy&&null!==ne.parentElement&&ne.parentElement.removeChild(ne));g=pe,p=ee}(null===g||g!==ne&&g!==i(ne)&&g!==de)&&(de=g,p.insertBefore(ne,g),Ce.scope&&Ce.scope.$emit("shadow",ne,p))}}function K(){u(ne,Ce.classes.hide)}function P(){Te.dragging&&l(ne,Ce.classes.hide)}function U(e){if(ye){var n=ye.scrollTop;ye.scrollTop+=e.deltaY,n!==ye.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function W(){if(!h){var e=te.getBoundingClientRect();h=te.cloneNode(!0),se=e.width,fe=e.height,h.style.width=p(e)+"px",h.style.height=d(e)+"px",u(h,Ce.classes.transit),l(h,Ce.classes.mirror),Ce.mirrorContainer.appendChild(h),n(Se,"on","mousemove",I),l(Me,Ce.classes.unselectable),n(h,"on","wheel",U),Ce.scope&&Ce.scope.$emit("cloned",h,te)}}function _(){h&&(u(Me,Ce.classes.unselectable),n(Se,"off","mousemove",I),n(h,"off","wheel",U),h.parentElement.removeChild(h),h=null)}function J(e,n){for(var t=n;t!==e&&t.parentElement!==e;)t=t.parentElement;return t===Se?null:t}function G(e,n,t,r){function o(){var n,o,i,a=e.children.length;for(n=0;a>n;n++){if(o=e.children[n],i=o.getBoundingClientRect(),l&&i.left>t)return o;if(!l&&i.top>r)return o}return null}function a(){var e=n.getBoundingClientRect();return c(l?t>e.left+p(e)/2:r>e.top+d(e)/2)}function c(e){return e?i(n):n}var l="horizontal"===Ce.direction,u=n!==e?a():o();return u}function Q(e,n){return"undefined"!=typeof window[n]?window[n]:Se.clientHeight?Se[e]:Me[e]}function V(e){var n=e.getBoundingClientRect(),t=Q("scrollTop","pageYOffset"),r=Q("scrollLeft","pageXOffset");return{left:n.left+r,right:n.right+r,top:n.top+t,bottom:n.bottom+t}}function Z(e,n,t){var r,o=e||{},i=o.className;return o.className+=" "+Ce.classes.hide,r=document.elementFromPoint(n,t),o.className=i,r}1!==arguments.length||Array.isArray(c)||angular.isElement(c)||c[0]||(s=c,c=[]);var ee,ne,te,re,oe,ie,ae,ce,le,ue,se,fe,pe,de,ge,me,ve,he,ye,Ee,xe,Me=document.body,Se=document.documentElement,be=null,we={},Oe={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},Ce={dragOverEventNames:["dragularenter","dragularleave","dragularrelease"],classes:Oe,containers:!1,moves:r,accepts:r,isContainer:t,copy:!1,invalid:X,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1,isContainerModel:o};a(Ce.boundingBox)||(Ce.boundingBox=null),s&&s.classes&&(angular.extend(Oe,s.classes),angular.extend(s.classes,Oe)),angular.extend(Ce,s),Ce.mirrorContainer||(Ce.mirrorContainer=document.body),c=Ce.containers||c||[],c=y(c),Ce.containersModel&&(Ce.containersModel=Array.isArray(Ce.containersModel[0])?Ce.containersModel:[Ce.containersModel]),Ce.nameSpace||(Ce.nameSpace=["dragularCommon"]),Array.isArray(Ce.nameSpace)||(Ce.nameSpace=[Ce.nameSpace]),Ce.nameSpace.forEach(function(e){v(x,e,c),Ce.containersModel&&v(E,e,Ce.containersModel)}),ve=S,b(),angular.forEach(Ce.dragOverEventNames,function(e){document.createEvent?(we[e]=document.createEvent("HTMLEvents"),we[e].initEvent(e,!0,!0)):(we[e]=document.createEventObject(),we[e].eventType=e)});var Te={containers:x,containersModel:E,start:N,end:D,cancel:R,remove:L,destroy:C,dragging:!1};return Te},v.cleanEnviroment=function(){y={},E={},x={},h=void 0},v}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map