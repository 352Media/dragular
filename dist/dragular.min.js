!function e(n,t,r){function o(a,c){if(!t[a]){if(!n[a]){var l="function"==typeof require&&require;if(!c&&l)return l(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var u=t[a]={exports:{}};n[a][0].call(u.exports,function(e){var t=n[a][1][e];return o(t?t:e)},u,u.exports,e,n,t,r)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,t){"use strict";var r=e("./dragularModule");r.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(n,t,r){function o(e){try{return JSON.parse(e)}catch(n){return void 0}}var i=n[r.dragular]||o(r.dragular);i&&i.containersModel&&"string"==typeof i.containersModel&&(i.containersModel=n.$eval(i.containersModel)),e(t[0],i)}}}])},{"./dragularModule":2}],2:[function(e,n,t){"use strict";n.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,n,t){"use strict";var r=e("./dragularModule");r.factory("dragularService",["$rootScope",function(e){function n(e,n,t,r){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i=angular.element(e);o[t]&&i[n](o[t],r),i[n](t,r)}function t(){return!1}function r(){return!0}function o(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}return e.nextElementSibling||n()}function i(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function a(e){var n=x[e];return n?n.lastIndex=0:x[e]=n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),n}function c(e,n){var t=e.className;t.length?a(n).test(t)||(e.className+=" "+n):e.className=n}function l(e,n){e.className=e.className.replace(a(n)," ").trim()}function s(e,n){return(" "+e.className+" ").indexOf(" "+n+" ")>-1}function u(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function f(e,n){var t=u(n),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in t)&&r[e]in t&&(e=r[e]),t[e]}function p(e){return e.width||e.right-e.left}function d(e){return e.height||e.bottom-e.top}function v(e,n){return Array.prototype.indexOf.call(angular.element(n).children(),e)}function g(e,n){e&&(e.dispatchEvent?e.dispatchEvent(n):e.fireEvent("on"+n.eventType,n))}var m,h={},y={},x={};return function(a,u){function x(e,n,t,r){n[t]||(n[t]=[]),Array.prototype.push.apply(n[t],r),e[t]=n[t]}function E(e,n){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,n):[e]}function M(n){e.applyAsync(function(){var e=Array.isArray(n)?n:E(n);e.forEach(function(e){Ne.nameSpace?angular.forEach(Ne.nameSpace,function(n){var t;t=Te[n].indexOf(e),Te[n].splice(t,1),Ne.containersModel&&$e[n].splice(t,1)}):Te.splice(Te.indexOf(e),1)})})}function O(e){return-1!==Ye.containers.indexOf(e)||Ne.isContainer(e)}function b(e){var n;for(n in Ye.containers)if(Ye.containers.hasOwnProperty(n)&&-1!==Ye.containers[n].indexOf(e))return!0;return!1}function w(e){var t=e?"off":"on";n(Ae,t,"mouseup",H),a.forEach(function(e){n(e,"on","mousedown",$)})}function S(e){var t=e?"off":"on";n(Ae,t,"mousemove",B)}function A(e){var t=e?"off":"on";n(Ae,t,"selectstart",T),n(Ae,t,"click",T)}function C(){w(!0),M(a),H({})}function T(e){we&&e.preventDefault()}function $(e){if(e=e||window.event,!(0!==e.which&&1!==e.which||e.metaKey||e.ctrlKey)){var n=e.target,t=N(n);t&&(we=t,S(),"mousedown"===e.type&&e.preventDefault())}}function B(e){if(S(!0),A(),j(),D(we),!Ne.direction){var n=te.parentElement,t=n.offsetHeight,r=n.offsetWidth,o=te.clientHeight,i=te.clientWidth;Ne.direction=r/i>t/o?"horizontal":"vertical"}var a=Z(te);oe=f("pageX",e)-a.left,ie=f("pageY",e)-a.top,le=f("clientX",e),se=f("clientY",e),Ne.boundingBox&&(ae=f("pageX",e)-a.right,ce=f("pageY",e)-a.bottom),e.preventDefault(),c(ye||te,Ne.classes.transit),I(),m.style.left=le-oe+"px",m.style.top=se-ie+"px",K(e)}function N(e){if(!(Ye.dragging&&m||xe(e))){for(var n=e;e.parentElement&&!xe(e.parentElement);){if(Ne.invalid(e,n))return;if(e=e.parentElement,!e)return}var t=e.parentElement;if(t&&t&&!Ne.invalid(e,n)&&Ne.moves(e,t,n,re))return{item:e,source:t}}}function Y(e){var n=N(e);n&&D(n)}function D(e){if(Ne.copy&&(ye=e.item.cloneNode(!0),Ne.scope&&Ne.scope.$emit("cloned",ye,e.item)),ne=e.source,te=e.item,pe=de=o(e.item),Ne.containersModel){var n=a.indexOf(e.source);re=Ne.containersModel[n],ve=v(e.item,e.source)}return Ye.dragging=!0,Ne.scope&&Ne.scope.$emit("drag",te,ne),!0}function X(){return!1}function j(){if(Ye.dragging){var e=ye||te;L(e,e.parentElement)}}function k(){we=!1,S(!0),A(!0)}function H(e){if(k(),Ye.dragging){e=e||window.event,le=f("clientX",e),se=f("clientY",e);var n=ye||te,t=ee(m,le,se),r=F(t,le,se);!r||Ne.copy!==!1&&r===ne?Ne.removeOnSpill?R():q():L(n,r),Ee=null,Ne.dragOverClasses&&me&&(l(me,he),me=null),Ne.scope&&Ne.scope.$emit("release",n,ne)}}function L(n,t){if(Ne.scope&&z(t)?Ne.scope.$emit("cancel",n,ne,re):Ne.scope&&Ne.scope.$emit("drop",n,t,ne,re),Ne.containersModel&&!z(t)){var r=ye||te,o=v(r,t);e.$applyAsync(function(){if(t===ne)re.splice(o,0,re.splice(ve,1)[0]);else{var e,n=Ne.copy?angular.copy(re[ve]):re[ve];if(Ne.nameSpace){for(var i in Ye.containers)if(Ye.containers.hasOwnProperty(i)&&-1!==Ye.containers[i].indexOf(t)){e=$e[i][Ye.containers[i].indexOf(t)];break}}else e=$e[Ye.containers.indexOf(t)];Ne.copy||re.splice(ve,1),e.splice(o,0,n),t.removeChild(r)}var a=ye||te;a.parentElement&&a.parentElement.removeChild(a),P()})}else P()}function R(){if(Ye.dragging){var n=ye||te,t=n.parentElement,r=re&&re[ve];t&&t.removeChild(n),Ne.containersModel&&e.$applyAsync(function(){re.splice(ve,1),P()}),Ne.scope&&Ne.scope.$emit(Ne.copy?"cancel":"remove",n,t,r,re),Ne.containersModel||P()}}function q(e){if(Ye.dragging){var n=arguments.length>0?e:Ne.revertOnSpill,t=ye||te,r=t.parentElement,o=z(r);o===!1&&Ne.copy===!1&&n&&ne.insertBefore(t,pe),!Ne.containersModel||Ne.copy||n?Ne.scope&&(o||n?Ne.scope.$emit("cancel",t,ne):Ne.scope.$emit("drop",t,r,ne)):L(t,r),(!Ne.containersModel||Ne.copy||n||o)&&P()}}function P(){k();var e=ye||te;J(),e&&l(e,Ne.classes.transit),Ye.dragging=!1,Ne.removeOnSpill===!0&&W(),Ne.scope&&(Ne.scope.$emit("out",e,Ce,ne),Ne.scope.$emit("dragend",e)),ne=te=ye=pe=de=re=null,ve=ge=Ce=null}function z(e,n){var t=n||(m?de:o(te||ye));return e===ne&&t===pe}function F(e,n,t){function r(){var r=!1;if(xe(o)){var i=G(o,e),a=Q(o,i,n,t),u=z(o,a);r=u?!0:Ne.accepts(te,o,ne,a,re),Ee!==o&&(Ee=o)}return Ne.dragOverClasses&&s(o,Ne.classes.overActive)&&o!==me&&(me&&l(me,he),he=r?Ne.classes.overAccepts:Ne.classes.overDeclines,c(o,he),me=o),r}for(var o=e;o&&!r();)o=o.parentElement;return o}function K(e){function n(e){Ne.scope&&Ne.scope.$emit(e,te,Ce,ne),Ne.removeOnSpill===!0&&("over"===e?U():W())}function t(){v&&n("over")}function r(){Ce&&n("out")}if(m){e=e||window.event,le=f("clientX",e),se=f("clientY",e);var i,a,c,l=le-oe,s=se-ie;Ne.boundingBox&&(i=f("pageX",e),a=f("pageY",e),c=Z(Ne.boundingBox)),Ne.lockY||(!Ne.boundingBox||i>c.left+oe&&i<c.right+ae?m.style.left=l+"px":Ne.boundingBox&&(m.style.left=i<c.left+oe?le-(i-c.left)+"px":le-ue-(i-c.right)+"px")),Ne.lockX||(!Ne.boundingBox||a>c.top+ie&&a<c.bottom+ce?m.style.top=s+"px":Ne.boundingBox&&(m.style.top=a<c.top+ie?se-(a-c.top)+"px":se-fe-(a-c.bottom)+"px"));var u=ye||te,p=ee(m,le,se),d=F(p,le,se),v=null!==d&&d!==Ce;if(p!==be&&(g(p,Me),be&&g(be,Oe),be=p),(v||null===d)&&(r(),Ce=d,t()),d===ne&&Ne.copy)return void(u.parentElement&&u.parentElement.removeChild(u));var h,y=G(d,p);if(null!==y)h=Q(d,y,le,se);else{if(Ne.revertOnSpill!==!0||Ne.copy)return void(Ne.copy&&null!==u.parentElement&&u.parentElement.removeChild(u));h=pe,d=ne}(null===h||h!==u&&h!==o(u)&&h!==de)&&(de=h,d.insertBefore(u,h),Ne.scope&&Ne.scope.$emit("shadow",u,d))}}function U(){var e=ye||te;l(e,Ne.classes.hide)}function W(){var e=ye||te;Ye.dragging&&c(e,Ne.classes.hide)}function _(e){if(Ee){var n=Ee.scrollTop;Ee.scrollTop+=e.deltaY,n!==Ee.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function I(){if(!m){var e=te.getBoundingClientRect();m=te.cloneNode(!0),ue=e.width,fe=e.height,m.style.width=p(e)+"px",m.style.height=d(e)+"px",l(m,Ne.classes.transit),c(m,Ne.classes.mirror),Ne.mirrorContainer.appendChild(m),n(Ae,"on","mousemove",K),c(Se,Ne.classes.unselectable),n(m,"on","wheel",_),Ne.scope&&Ne.scope.$emit("cloned",m,te)}}function J(){m&&(l(Se,Ne.classes.unselectable),n(Ae,"off","mousemove",K),n(m,"off","wheel",_),m.parentElement.removeChild(m),m=null)}function G(e,n){for(var t=n;t!==e&&t.parentElement!==e;)t=t.parentElement;return t===Ae?null:t}function Q(e,n,t,r){function i(){var n,o,i,a=e.children.length;for(n=0;a>n;n++){if(o=e.children[n],i=o.getBoundingClientRect(),l&&i.left>t)return o;if(!l&&i.top>r)return o}return null}function a(){var e=n.getBoundingClientRect();return c(l?t>e.left+p(e)/2:r>e.top+d(e)/2)}function c(e){return e?o(n):n}var l="horizontal"===Ne.direction,s=n!==e?a():i();return s}function V(e,n){return"undefined"!=typeof window[n]?window[n]:Ae.clientHeight?Ae[e]:Se[e]}function Z(e){var n=e.getBoundingClientRect(),t=V("scrollTop","pageYOffset"),r=V("scrollLeft","pageXOffset");return{left:n.left+r,right:n.right+r,top:n.top+t,bottom:n.bottom+t}}function ee(e,n,t){var r,o=e||{},i=o.className;return o.className+=" "+Ne.classes.hide,r=document.elementFromPoint(n,t),o.className=i,r}1!==arguments.length||Array.isArray(a)||angular.isElement(a)||a[0]||(u=a,a=[]);var ne,te,re,oe,ie,ae,ce,le,se,ue,fe,pe,de,ve,ge,me,he,ye,xe,Ee,Me,Oe,be,we,Se=document.body,Ae=document.documentElement,Ce=null,Te={},$e={},Be={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit",overActive:"gu-over-active",overAccepts:"gu-over-accept",overDeclines:"gu-over-decline"},Ne={classes:Be,containers:!1,moves:r,accepts:r,isContainer:t,copy:!1,delay:!1,invalid:X,revertOnSpill:!1,removeOnSpill:!1,dragOverClasses:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1};i(Ne.boundingBox)||(Ne.boundingBox=null),u&&u.classes&&(angular.extend(Be,u.classes),angular.extend(u.classes,Be)),angular.extend(Ne,u),Ne.mirrorContainer||(Ne.mirrorContainer=document.body),a=Ne.containers||(a?E(a):[]),Ne.containers&&(a=E(a)),Ne.containersModel&&(Ne.containersModel=Array.isArray(Ne.containersModel[0])?Ne.containersModel:[Ne.containersModel]),Ne.nameSpace?(Array.isArray(Ne.nameSpace)||(Ne.nameSpace=[Ne.nameSpace]),Ne.nameSpace.forEach(function(e){x(Te,h,e,a),Ne.containersModel&&x($e,y,e,Ne.containersModel)}),xe=b):(Te=a,xe=O,Ne.containersModel&&($e=Ne.containersModel)),w(),document.createEvent?(Me=document.createEvent("HTMLEvents"),Me.initEvent("dragularenter",!0,!0),Oe=document.createEvent("HTMLEvents"),Oe.initEvent("dragularleave",!0,!0)):(Me=document.createEventObject(),Me.eventType="dragularenter",Oe=document.createEventObject(),Oe.eventType="dragularleave");var Ye={containers:Te,containersModel:$e,start:Y,end:j,cancel:q,remove:R,destroy:C,dragging:!1};return Ye}}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map