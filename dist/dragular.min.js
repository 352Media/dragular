!function e(n,t,r){function o(a,c){if(!t[a]){if(!n[a]){var l="function"==typeof require&&require;if(!c&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var s=t[a]={exports:{}};n[a][0].call(s.exports,function(e){var t=n[a][1][e];return o(t?t:e)},s,s.exports,e,n,t,r)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,t){"use strict";var r=e("./dragularModule");r.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(n,t,r){function o(e){try{return JSON.parse(e)}catch(n){return void 0}}var i=n[r.dragular]||o(r.dragular);i&&i.containersModel&&"string"==typeof i.containersModel&&(i.containersModel=n.$eval(i.containersModel)),e(t[0],i)}}}])},{"./dragularModule":2}],2:[function(e,n,t){"use strict";n.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,n,t){"use strict";var r=e("./dragularModule");r.factory("dragularService",["$rootScope",function(e){function n(e,n,t,r){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i=angular.element(e);o[t]&&i[n](o[t],r),i[n](t,r)}function t(){return!1}function r(){return!0}function o(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}return e.nextElementSibling||n()}function i(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function a(e){var n=y[e];return n?n.lastIndex=0:y[e]=n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),n}function c(e,n){var t=e.className;t.length?a(n).test(t)||(e.className+=" "+n):e.className=n}function l(e,n){e.className=e.className.replace(a(n)," ").trim()}function u(e,n){return(" "+e.className+" ").indexOf(" "+n+" ")>-1}function s(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function p(e,n){var t=s(n),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in t)&&r[e]in t&&(e=r[e]),t[e]}function f(e){return e.width||e.right-e.left}function d(e){return e.height||e.bottom-e.top}function g(e,n){return Array.prototype.indexOf.call(angular.element(n).children(),e)}function v(e,n){e&&(e.dispatchEvent?e.dispatchEvent(n):e.fireEvent("on"+n.eventType,n))}var m,h,y={},E={},x={};return m=function(a,s){function m(e,n,t){e[n]||(e[n]=[]),Array.prototype.push.apply(e[n],t)}function y(e,n){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,n):[e]}function M(n){e.applyAsync(function(){var e=Array.isArray(n)?n:y(n);e.forEach(function(e){angular.forEach(Te.nameSpace,function(n){var t;t=x[n].indexOf(e),x[n].splice(t,1),Te.containersModel&&E[n].splice(t,1)})})})}function b(e){for(var n=Te.nameSpace.length;n--;)if(-1!==$e.containers[Te.nameSpace[n]].indexOf(e))return!0;return Te.isContainer(e)}function S(e){var t=e?"off":"on";n(Oe,t,"mouseup",k),a.forEach(function(e){n(e,"on","mousedown",T)})}function w(e){var t=e?"off":"on";n(Oe,t,"mousemove",$)}function O(e){var t=e?"off":"on";n(Oe,t,"selectstart",C),n(Oe,t,"click",C)}function A(){S(!0),M(a),k({})}function C(e){Se&&e.preventDefault()}function T(e){if(e=e||window.event,!(0!==e.which&&1!==e.which||e.metaKey||e.ctrlKey)){var n=B(e.target);n&&(Se=n,w(),"mousedown"===e.type&&e.preventDefault())}}function $(e){if(w(!0),O(),X(),Y(Se),!Te.direction){var n=te.parentElement,t=n.offsetHeight,r=n.offsetWidth,o=te.clientHeight,i=te.clientWidth;Te.direction=r/i>t/o?"horizontal":"vertical"}var a=V(te);oe=p("pageX",e)-a.left,ie=p("pageY",e)-a.top,le=p("clientX",e),ue=p("clientY",e),Te.boundingBox&&(ae=p("pageX",e)-a.right,ce=p("pageY",e)-a.bottom),e.preventDefault(),c(ne,Te.classes.transit),_(),h.style.left=le-oe+"px",h.style.top=ue-ie+"px",K(e)}function B(e){if(!$e.dragging||!h){for(var n=e;e.parentElement&&!ye(e.parentElement);){if(Te.invalid(e,n))return;if(e=e.parentElement,!e)return}var t=e.parentElement;if(t&&!Te.invalid(e,n)&&Te.moves(e,t,n))return{item:e,source:t}}}function N(e){var n=B(e);n&&Y(n)}function Y(e){if(te=ne=e.item,ee=e.source,fe=de=o(e.item),Te.copy&&(ne=e.item.cloneNode(!0),Te.scope&&Te.scope.$emit("cloned",ne,e.item)),Te.containersModel){var n=a.indexOf(e.source);re=Te.containersModel[n],ge=g(e.item,e.source)}return $e.dragging=!0,Te.scope&&Te.scope.$emit("drag",te,ee),!0}function D(){return!1}function X(){$e.dragging&&H(ne,ne.parentElement)}function j(){Se=!1,w(!0),O(!0)}function k(e){if(j(),$e.dragging){e=e||window.event,le=p("clientX",e),ue=p("clientY",e);var n=Z(h,le,ue),t=F(n,le,ue);!t||Te.copy!==!1&&t===ee?Te.removeOnSpill?L():R():H(ne,t),Ee=null,Te.dragOverClasses&&me&&(l(me,he),me=null),Te.scope&&Te.scope.$emit("release",ne,ee)}}function H(n,t){if(Te.scope&&z(t)?Te.scope.$emit("cancel",n,ee,re):Te.scope&&Te.scope.$emit("drop",n,t,ee,re),Te.containersModel&&!z(t)){var r=n,o=g(r,t);e.$applyAsync(function(){if(t===ee)re.splice(o,0,re.splice(ge,1)[0]);else{for(var e,i=Te.copy?angular.copy(re[ge]):re[ge],a=Te.nameSpace.length;a--;)if(-1!==$e.containers[Te.nameSpace[a]].indexOf(t)){e=E[Te.nameSpace[a]][$e.containers[Te.nameSpace[a]].indexOf(t)];break}t.removeChild(r),Te.copy||re.splice(ge,1),e.splice(o,0,i)}n.parentElement&&n.parentElement.removeChild(n),q()})}else q()}function L(){if($e.dragging){var n=ne.parentElement,t=re&&re[ge];n&&n.removeChild(ne),Te.containersModel&&e.$applyAsync(function(){re.splice(ge,1),q()}),Te.scope&&Te.scope.$emit(Te.copy?"cancel":"remove",ne,n,t,re),Te.containersModel||q()}}function R(e){if($e.dragging){var n=arguments.length>0?e:Te.revertOnSpill,t=ne.parentElement,r=z(t);r===!1&&Te.copy===!1&&n&&ee.insertBefore(ne,fe),!Te.containersModel||Te.copy||n?Te.scope&&(r||n?Te.scope.$emit("cancel",ne,ee):Te.scope.$emit("drop",ne,t,ee)):H(ne,t),(!Te.containersModel||Te.copy||n||r)&&q()}}function q(){j(),I(),ne&&l(ne,Te.classes.transit),$e.dragging=!1,Te.removeOnSpill===!0&&U(),Te.scope&&(Te.scope.$emit("out",ne,Ae,ee),Te.scope.$emit("dragend",ne)),ee=ne=te=fe=de=re=null,ge=ve=Ae=null}function z(e,n){var t=n||(h?de:o(ne));return e===ee&&t===fe}function F(e,n,t){function r(){var r=!1;if(ye(o)){var i=J(o,e),a=G(o,i,n,t),s=z(o,a);r=s?!0:Te.accepts(ne,o,ee,a,re),Ee!==o&&(Ee=o)}return Te.dragOverClasses&&u(o,Te.classes.overActive)&&o!==me&&(me&&l(me,he),he=r?Te.classes.overAccepts:Te.classes.overDeclines,c(o,he),me=o),r}for(var o=e;o&&!r();)o=o.parentElement;return o}function K(e){function n(e){Te.scope&&Te.scope.$emit(e,ne,Ae,ee),Te.removeOnSpill===!0&&("over"===e?P():U())}function t(){d&&n("over")}function r(){Ae&&n("out")}if(h){e=e||window.event,le=p("clientX",e),ue=p("clientY",e);var i,a,c,l=le-oe,u=ue-ie;Te.boundingBox&&(i=p("pageX",e),a=p("pageY",e),c=V(Te.boundingBox)),Te.lockY||(!Te.boundingBox||i>c.left+oe&&i<c.right+ae?h.style.left=l+"px":Te.boundingBox&&(h.style.left=i<c.left+oe?le-(i-c.left)+"px":le-se-(i-c.right)+"px")),Te.lockX||(!Te.boundingBox||a>c.top+ie&&a<c.bottom+ce?h.style.top=u+"px":Te.boundingBox&&(h.style.top=a<c.top+ie?ue-(a-c.top)+"px":ue-pe-(a-c.bottom)+"px"));var s=Z(h,le,ue),f=F(s,le,ue),d=null!==f&&f!==Ae;if(s!==be&&(v(s,xe),be&&v(be,Me),be=s),(d||null===f)&&(r(),Ae=f,t()),f===ee&&Te.copy)return void(ne.parentElement&&ne.parentElement.removeChild(ne));var g,m=J(f,s);if(null!==m)g=G(f,m,le,ue);else{if(Te.revertOnSpill!==!0||Te.copy)return void(Te.copy&&null!==ne.parentElement&&ne.parentElement.removeChild(ne));g=fe,f=ee}(null===g||g!==ne&&g!==o(ne)&&g!==de)&&(de=g,f.insertBefore(ne,g),Te.scope&&Te.scope.$emit("shadow",ne,f))}}function P(){l(ne,Te.classes.hide)}function U(){$e.dragging&&c(ne,Te.classes.hide)}function W(e){if(Ee){var n=Ee.scrollTop;Ee.scrollTop+=e.deltaY,n!==Ee.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function _(){if(!h){var e=te.getBoundingClientRect();h=te.cloneNode(!0),se=e.width,pe=e.height,h.style.width=f(e)+"px",h.style.height=d(e)+"px",l(h,Te.classes.transit),c(h,Te.classes.mirror),Te.mirrorContainer.appendChild(h),n(Oe,"on","mousemove",K),c(we,Te.classes.unselectable),n(h,"on","wheel",W),Te.scope&&Te.scope.$emit("cloned",h,te)}}function I(){h&&(l(we,Te.classes.unselectable),n(Oe,"off","mousemove",K),n(h,"off","wheel",W),h.parentElement.removeChild(h),h=null)}function J(e,n){for(var t=n;t!==e&&t.parentElement!==e;)t=t.parentElement;return t===Oe?null:t}function G(e,n,t,r){function i(){var n,o,i,a=e.children.length;for(n=0;a>n;n++){if(o=e.children[n],i=o.getBoundingClientRect(),l&&i.left>t)return o;if(!l&&i.top>r)return o}return null}function a(){var e=n.getBoundingClientRect();return c(l?t>e.left+f(e)/2:r>e.top+d(e)/2)}function c(e){return e?o(n):n}var l="horizontal"===Te.direction,u=n!==e?a():i();return u}function Q(e,n){return"undefined"!=typeof window[n]?window[n]:Oe.clientHeight?Oe[e]:we[e]}function V(e){var n=e.getBoundingClientRect(),t=Q("scrollTop","pageYOffset"),r=Q("scrollLeft","pageXOffset");return{left:n.left+r,right:n.right+r,top:n.top+t,bottom:n.bottom+t}}function Z(e,n,t){var r,o=e||{},i=o.className;return o.className+=" "+Te.classes.hide,r=document.elementFromPoint(n,t),o.className=i,r}1!==arguments.length||Array.isArray(a)||angular.isElement(a)||a[0]||(s=a,a=[]);var ee,ne,te,re,oe,ie,ae,ce,le,ue,se,pe,fe,de,ge,ve,me,he,ye,Ee,xe,Me,be,Se,we=document.body,Oe=document.documentElement,Ae=null,Ce={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit",overActive:"gu-over-active",overAccepts:"gu-over-accept",overDeclines:"gu-over-decline"},Te={classes:Ce,containers:!1,moves:r,accepts:r,isContainer:t,copy:!1,invalid:D,revertOnSpill:!1,removeOnSpill:!1,dragOverClasses:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1};i(Te.boundingBox)||(Te.boundingBox=null),s&&s.classes&&(angular.extend(Ce,s.classes),angular.extend(s.classes,Ce)),angular.extend(Te,s),Te.mirrorContainer||(Te.mirrorContainer=document.body),a=Te.containers||a||[],a=y(a),Te.containersModel&&(Te.containersModel=Array.isArray(Te.containersModel[0])?Te.containersModel:[Te.containersModel]),Te.nameSpace||(Te.nameSpace=["dragularCommon"]),Array.isArray(Te.nameSpace)||(Te.nameSpace=[Te.nameSpace]),Te.nameSpace.forEach(function(e){m(x,e,a),Te.containersModel&&m(E,e,Te.containersModel)}),ye=b,S(),document.createEvent?(xe=document.createEvent("HTMLEvents"),xe.initEvent("dragularenter",!0,!0),Me=document.createEvent("HTMLEvents"),Me.initEvent("dragularleave",!0,!0)):(xe=document.createEventObject(),xe.eventType="dragularenter",Me=document.createEventObject(),Me.eventType="dragularleave");var $e={containers:x,containersModel:E,start:N,end:X,cancel:R,remove:L,destroy:A,dragging:!1};return $e},m.cleanEnviroment=function(){y={},E={},x={},h=void 0},m}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map