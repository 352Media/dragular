!function e(n,t,r){function o(c,a){if(!t[c]){if(!n[c]){var l="function"==typeof require&&require;if(!a&&l)return l(c,!0);if(i)return i(c,!0);var s=new Error("Cannot find module '"+c+"'");throw s.code="MODULE_NOT_FOUND",s}var u=t[c]={exports:{}};n[c][0].call(u.exports,function(e){var t=n[c][1][e];return o(t?t:e)},u,u.exports,e,n,t,r)}return t[c].exports}for(var i="function"==typeof require&&require,c=0;c<r.length;c++)o(r[c]);return o}({1:[function(e,n,t){"use strict";var r=e("./dragularModule");r.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(n,t,r){function o(e){try{return JSON.parse(e)}catch(n){return void 0}}var i=n[r.dragular]||o(r.dragular);i&&i.containersModel&&"string"==typeof i.containersModel&&(i.containersModel=n.$eval(i.containersModel)),e(t[0],i)}}}])},{"./dragularModule":2}],2:[function(e,n,t){"use strict";n.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,n,t){"use strict";var r=e("./dragularModule");r.factory("dragularService",["$rootScope","$timeout",function(e,n){function t(e,n,t,r){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i=angular.element(e);o[t]&&i[n](o[t],r),i[n](t,r)}function r(){return!1}function o(){return!0}function i(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}return e.nextElementSibling||n()}function c(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function a(e){var n=M[e];return n?n.lastIndex=0:M[e]=n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),n}function l(e,n){var t=e.className;t.length?a(n).test(t)||(e.className+=" "+n):e.className=n}function s(e,n){e.className=e.className.replace(a(n)," ").trim()}function u(e,n){return(" "+e.className+" ").indexOf(" "+n+" ")>-1}function f(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function d(e,n){var t=f(n),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in t)&&r[e]in t&&(e=r[e]),t[e]}function p(e){return e.width||e.right-e.left}function g(e){return e.height||e.bottom-e.top}function v(e,n){return Array.prototype.indexOf.call(angular.element(n).children(),e)}function m(e,n){e&&(e.dispatchEvent?e.dispatchEvent(n):e.fireEvent("on"+n.eventType,n))}var h,y={},x={},M={};return function(a,f){function M(e,n,t,r){n[t]||(n[t]=[]),Array.prototype.push.apply(n[t],r),e[t]=n[t]}function O(e,n){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,n):[e]}function E(n){e.applyAsync(function(){var e=Array.isArray(n)?n:O(n);e.forEach(function(e){Le.nameSpace?angular.forEach(Le.nameSpace,function(n){var t;t=je[n].indexOf(e),je[n].splice(t,1),Le.containersModel&&ke[n].splice(t,1)}):je.splice(je.indexOf(e),1)})})}function b(e){return-1!==Re.containers.indexOf(e)||Le.isContainer(e)}function w(e){var n;for(n in Re.containers)if(Re.containers.hasOwnProperty(n)&&-1!==Re.containers[n].indexOf(e))return!0;return!1}function A(e){var n=e?"off":"on";t(De,n,"mouseup",L),a.forEach(function(e){t(e,"on","mousedown",B)})}function S(e){var n=e?"off":"on";t(De,n,"mousemove",N)}function $(e){var n=e?"off":"on";t(De,n,"selectstart",C),t(De,n,"click",C)}function T(){A(!0),E(a),L({})}function C(e){Ne&&e.preventDefault()}function B(e){if(e=e||window.event,!(0!==e.which&&1!==e.which||e.metaKey||e.ctrlKey)){var n=e.target,t=Y(n);t&&(Ne=t,S(),"mousedown"===e.type&&e.preventDefault())}}function N(e){if(S(!0),$(),k(),X(Ne),!Le.direction){var n=oe.parentElement,t=n.offsetHeight,r=n.offsetWidth,o=oe.clientHeight,i=oe.clientWidth;Le.direction=r/i>t/o?"horizontal":"vertical"}var c=ne(oe);se=d("pageX",e)-c.left,ue=d("pageY",e)-c.top,pe=d("clientX",e),ge=d("clientY",e),Le.boundingBox&&(fe=d("pageX",e)-c.right,de=d("pageY",e)-c.bottom),e.preventDefault(),l(be||oe,Le.classes.transit),G(),h.style.left=pe-se+"px",h.style.top=ge-ue+"px",U(e)}function Y(e){if(!(Re.dragging&&h||Se(e))){for(var n=e;e.parentElement&&!Se(e.parentElement);){if(Le.invalid(e,n))return;if(e=e.parentElement,!e)return}var t=e.parentElement;if(t&&t&&!Le.invalid(e,n)&&Le.moves(e,t,n,ce,ie))return{item:e,source:t}}}function D(e){var n=Y(e);n&&X(n)}function X(e){if(Le.containersModel){var n=a.indexOf(e.source),t=v(e.item,e.source);xe=Me=t,ie=Le.containersModel[n],ae=ie,ce=ie[t],Le.copy&&(we=angular.copy(ce))}return Le.copy&&(be=e.item.cloneNode(!0),Le.scope&&Le.scope.$emit("cloned",be,e.item,we,ce)),re=e.source,oe=e.item,he=ye=i(e.item),Re.dragging=!0,Le.scope&&Le.scope.$emit("drag",oe,re),!0}function j(){return!1}function k(){if(Re.dragging){var e=be||oe;R(e,e.parentElement)}}function H(){Ne=!1,S(!0),$(!0)}function L(e){if(H(),Re.dragging){e=e||window.event,pe=d("clientX",e),ge=d("clientY",e);var n=be||oe,t=te(h,pe,ge),r=K(t,pe,ge);!r||Le.copy!==!1&&r===re?Le.removeOnSpill?q():P():R(n,r),$e=null,Le.dragOverClasses&&Oe&&(s(Oe,Ee),Oe=null),Le.scope&&Le.scope.$emit("release",n,re)}}function R(e,n){Le.scope&&F(n)?Le.scope.$emit("cancel",e,re,we||ce,ie,ae):Le.scope&&Le.scope.$emit("drop",e,n,re,we||ce,ie,ae),z()}function q(){if(Re.dragging){var n,t=be||oe,r=t.parentElement;Le.containersModel?e.$applyAsync(function(){ae.splice(ae.indexOf(we||ce),1),z()}):r&&r.removeChild(t),Le.scope&&Le.scope.$emit(Le.copy?"cancel":"remove",t,r,n,ie,ae),Le.containersModel||z()}}function P(e){if(Re.dragging){var n=arguments.length>0?e:Le.revertOnSpill,t=be||oe,r=t.parentElement;r===re&&Le.copy&&(Le.containersModel?ae.splice(ae.indexOf(we),1,we):r.removeChild(be));var o=F(r);o===!1&&Le.copy===!1&&n&&(Le.containersModel?(le=ae,ae=ie,I(xe)):re.insertBefore(t,he)),Le.scope&&(o||n)?Le.scope.$emit("cancel",t,re):Le.scope&&Le.scope.$emit("drop",t,r,re),z()}}function z(){H();var e=be||oe;Q(),e&&s(e,Le.classes.transit),Ae&&n.cancel(Ae),Re.dragging=!1,Le.removeOnSpill===!0&&_(),Le.scope&&(Le.scope.$emit("out",e,Xe,re),Le.scope.$emit("dragend",e)),re=oe=be=he=ye=ie=null,ce=we=xe=Me=Ae=Xe=null}function F(e,n){var t=n||(h?ye:i(oe||be));return e===re&&t===he}function K(e,n,t){function r(){var r=!1;if(Se(o)){$e=o;var i=V(o,e),c=Z(o,i,n,t),a=F(o,c);if(r=a?!0:Le.accepts(oe,o,re,c,ce,ie),r&&Le.containersModel)if(le=ae,Le.nameSpace){for(var f in Re.containers)if(Re.containers.hasOwnProperty(f)&&-1!==Re.containers[f].indexOf(o)){le=ae,ae=ke[f][Re.containers[f].indexOf(o)];break}}else ae=ke[Re.containers.indexOf(o)]}return Le.dragOverClasses&&u(o,Le.classes.overActive)&&o!==Oe&&(Oe&&s(Oe,Ee),Ee=r?Le.classes.overAccepts:Le.classes.overDeclines,l(o,Ee),Oe=o),r}for(var o=e;o&&!r();)o=o.parentElement;return o}function U(n){function t(e){Le.scope&&Le.scope.$emit(e,oe,Xe,re),Le.removeOnSpill===!0&&("over"===e?W():_())}function r(){y&&t("over")}function o(){Xe&&t("out")}if(h){n=n||window.event,pe=d("clientX",n),ge=d("clientY",n);var c,a,l,s=pe-se,u=ge-ue;Le.boundingBox&&(c=d("pageX",n),a=d("pageY",n),l=ne(Le.boundingBox)),Le.lockY||(!Le.boundingBox||c>l.left+se&&c<l.right+fe?h.style.left=s+"px":Le.boundingBox&&(h.style.left=c<l.left+se?pe-(c-l.left)+"px":pe-ve-(c-l.right)+"px")),Le.lockX||(!Le.boundingBox||a>l.top+ue&&a<l.bottom+de?h.style.top=u+"px":Le.boundingBox&&(h.style.top=a<l.top+ue?ge-(a-l.top)+"px":ge-me-(a-l.bottom)+"px"));var f=be||oe,p=te(h,pe,ge),g=K(p,pe,ge),y=null!==g&&g!==Xe;if(p!==Be&&(m(p,Te),Be&&m(Be,Ce),Be=p),(y||null===g)&&(o(),Xe=g,r()),g===re&&Le.copy)return void(!Le.containersModel&&f.parentElement?f.parentElement.removeChild(f):Le.containersModel&&-1!==le.indexOf(we)&&e.$applyAsync(function(){le.splice(le.indexOf(we),1)}));var x,M,O=V(g,p);if(null!==O)x=Z(g,O,pe,ge),Le.containersModel&&(M=x?v(x,g):null);else{if(Le.revertOnSpill!==!0||Le.copy)return void(Le.copy&&null!==f.parentElement?Le.containersModel?ae!==ie&&ae.indexOf(we||ce)&&e.$applyAsync(function(){ae.splice(M,1)}):f.parentElement.removeChild(f):Le.removeOnSpill&&(le=ae,ae=ie,I(xe)));x=he,g=re,Le.containersModel&&(M=xe,le=ae,ae=ie)}(null===x||x!==f&&x!==i(f)&&x!==ye)&&(ye=x,Le.containersModel?I(M):g.insertBefore(f,x),Le.scope&&Le.scope.$emit("shadow",f,g))}}function W(){var n=be||oe;s(n,Le.classes.hide),Le.containersModel&&-1!==ae.indexOf(n)&&e.applyAsync(function(){ae.splice(ae.indexOf(n),1)})}function _(){var n=be||oe;Re.dragging&&(l(n,Le.classes.hide),Le.containersModel&&-1!==ae.indexOf(n)&&e.applyAsync(function(){ae.splice(ae.indexOf(n),1)}))}function I(n){e.$applyAsync(function(){if(le===ae){null===n&&(n=ae.length);var e=n>Me?n-1:n;ae.splice(e,0,le.splice(Me,1)[0]),Me=e}else null===n&&(n=ae.length-1),Le.copy&&le===ie||le.splice(Me,1),Le.copy&&-1!==ae.indexOf(we)||(ae.splice(n,0,we||ce),Me=n)})}function J(e){if($e){var n=$e.scrollTop;$e.scrollTop+=e.deltaY,n!==$e.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function G(){if(!h){var e=oe.getBoundingClientRect();h=oe.cloneNode(!0),ve=e.width,me=e.height,h.style.width=p(e)+"px",h.style.height=g(e)+"px",s(h,Le.classes.transit),l(h,Le.classes.mirror),Le.mirrorContainer.appendChild(h),t(De,"on","mousemove",U),l(Ye,Le.classes.unselectable),t(h,"on","wheel",J),Le.scope&&Le.scope.$emit("cloned",h,oe)}}function Q(){h&&(s(Ye,Le.classes.unselectable),t(De,"off","mousemove",U),t(h,"off","wheel",J),h.parentElement.removeChild(h),h=null)}function V(e,n){for(var t=n;t!==e&&t.parentElement!==e;)t=t.parentElement;return t===De?null:t}function Z(e,n,t,r){function o(){var n,o,i,c=e.children.length;for(n=0;c>n;n++){if(o=e.children[n],i=o.getBoundingClientRect(),l&&i.left>t)return o;if(!l&&i.top>r)return o}return null}function c(){var e=n.getBoundingClientRect();return a(l?t>e.left+p(e)/2:r>e.top+g(e)/2)}function a(e){return e?i(n):n}var l="horizontal"===Le.direction,s=n!==e?c():o();return s}function ee(e,n){return"undefined"!=typeof window[n]?window[n]:De.clientHeight?De[e]:Ye[e]}function ne(e){var n=e.getBoundingClientRect(),t=ee("scrollTop","pageYOffset"),r=ee("scrollLeft","pageXOffset");return{left:n.left+r,right:n.right+r,top:n.top+t,bottom:n.bottom+t}}function te(e,n,t){var r,o=e||{},i=o.className;return o.className+=" "+Le.classes.hide,r=document.elementFromPoint(n,t),o.className=i,r}1!==arguments.length||Array.isArray(a)||angular.isElement(a)||a[0]||(f=a,a=[]);var re,oe,ie,ce,ae,le,se,ue,fe,de,pe,ge,ve,me,he,ye,xe,Me,Oe,Ee,be,we,Ae,Se,$e,Te,Ce,Be,Ne,Ye=document.body,De=document.documentElement,Xe=null,je={},ke={},He={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit",overActive:"gu-over-active",overAccepts:"gu-over-accept",overDeclines:"gu-over-decline"},Le={classes:He,containers:!1,moves:o,accepts:o,isContainer:r,copy:!1,delay:!1,invalid:j,revertOnSpill:!1,removeOnSpill:!1,dragOverClasses:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1};c(Le.boundingBox)||(Le.boundingBox=null),f&&f.classes&&(angular.extend(He,f.classes),angular.extend(f.classes,He)),angular.extend(Le,f),Le.mirrorContainer||(Le.mirrorContainer=document.body),a=Le.containers||(a?O(a):[]),Le.containers&&(a=O(a)),Le.containersModel&&(Le.containersModel=Array.isArray(Le.containersModel[0])?Le.containersModel:[Le.containersModel]),Le.nameSpace?(Array.isArray(Le.nameSpace)||(Le.nameSpace=[Le.nameSpace]),Le.nameSpace.forEach(function(e){M(je,y,e,a),Le.containersModel&&M(ke,x,e,Le.containersModel)}),Se=w):(je=a,Se=b,Le.containersModel&&(ke=Le.containersModel)),A(),document.createEvent?(Te=document.createEvent("HTMLEvents"),Te.initEvent("dragularenter",!0,!0),Ce=document.createEvent("HTMLEvents"),Ce.initEvent("dragularleave",!0,!0)):(Te=document.createEventObject(),Te.eventType="dragularenter",Ce=document.createEventObject(),Ce.eventType="dragularleave");var Re={containers:je,containersModel:ke,start:D,end:k,cancel:P,remove:q,destroy:T,dragging:!1};return Re}}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map