!function e(r,n,t){function o(a,l){if(!n[a]){if(!r[a]){var c="function"==typeof require&&require;if(!l&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var s=n[a]={exports:{}};r[a][0].call(s.exports,function(e){var n=r[a][1][e];return o(n?n:e)},s,s.exports,e,r,n,t)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<t.length;a++)o(t[a]);return o}({1:[function(e,r,n){"use strict";var t=e("./dragularModule");t.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(r,n,t){function o(e){try{return JSON.parse(e)}catch(r){return void 0}}var i=r[t.dragular]||o(t.dragular);i&&i.containersModel&&"string"==typeof i.containersModel&&(i.containersModel=r.$eval(i.containersModel)),e(n[0],i)}}}])},{"./dragularModule":2}],2:[function(e,r,n){"use strict";r.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,r,n){"use strict";var t=e("./dragularModule");t.factory("dragularService",["$rootScope",function(e){function r(e,r,n,t){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i=angular.element(e);o[n]&&i[r](o[n],t),i[r](n,t)}function n(){return!1}function t(){return!0}function o(){return{}}function i(e){function r(){var r=e;do r=r.nextSibling;while(r&&1!==r.nodeType);return r}return e.nextElementSibling||r()}function a(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function l(e){var r=v.classesCache[e];return r?r.lastIndex=0:v.classesCache[e]=r=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),r}function c(e,r){var n=e.className;n.length?l(r).test(n)||(e.className+=" "+r):e.className=r}function u(e,r){e.className=e.className.replace(l(r)," ").trim()}function s(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function d(e,r){var n=s(r),t={pageX:"clientX",pageY:"clientY"};return e in t&&!(e in n)&&t[e]in n&&(e=t[e]),n[e]}function m(e){return e.width||e.right-e.left}function f(e){return e.height||e.bottom-e.top}function g(e,r){return Array.prototype.indexOf.call(angular.element(r).children(),e)}function p(e,r,n){e&&(v.extra=n,e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+r.eventType,r))}var v={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,sourceItem:null,sourceModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,isContainerModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},h=function(l,s){function h(e,r){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,r):[e]}function x(r){e.applyAsync(function(){var e=Array.isArray(r)?r:h(r);e.forEach(function(e){angular.forEach(ee.nameSpace,function(r){var n;n=v.containers[r].indexOf(e),v.containers[r].splice(n,1),v.containersCtx[r].splice(n,1)})})})}function y(e){var n=e?"off":"on";r(V,n,"mouseup",A),l.forEach(function(e){r(e,"on","mousedown",S)})}function E(e){var n=e?"off":"on";r(V,n,"mousemove",Y)}function C(e){var n=e?"off":"on";r(V,n,"selectstart",b),r(V,n,"click",b),r(V,n,"touchmove",b)}function M(){y(!0),x(l),A({})}function b(e){v.grabbed&&e.preventDefault()}function S(e){if(e=e||window.event,!(0!==e.which&&1!==e.which||e.metaKey||e.ctrlKey)){var r=X(e.target);r&&(v.grabbed=r,E(),"mousedown"===e.type&&e.preventDefault())}}function Y(e){if(E(!0),C(),B(),I(v.grabbed),!ee.direction){var r=v.sourceItem.parentElement,n=r.offsetHeight,t=r.offsetWidth,o=v.sourceItem.clientHeight,i=v.sourceItem.clientWidth;ee.direction=t/i>n/o?"horizontal":"vertical"}var a=_(v.sourceItem);v.offsetX=d("pageX",e)-a.left,v.offsetY=d("pageY",e)-a.top,v.clientX=d("clientX",e),v.clientY=d("clientY",e),ee.boundingBox&&(v.offsetXr=d("pageX",e)-a.right,v.offsetYb=d("pageY",e)-a.bottom),e.preventDefault(),c(v.item,ee.classes.transit),z(),v.mirror.style.left=v.clientX-v.offsetX+"px",v.mirror.style.top=v.clientY-v.offsetY+"px",L(e)}function X(e){if(!re.dragging||!v.mirror){for(var r=e;e.parentElement&&!G(e.parentElement);){if(ee.invalid(e,r))return;if(e=e.parentElement,!e)return}var n=e.parentElement;if(n&&!ee.invalid(e,r)&&ee.moves(e,n,r))return{item:e,source:n}}}function O(e){var r=X(e);r&&I(r)}function I(e){v.sourceItem=v.item=e.item,v.source=e.source,v.initialSibling=v.currentSibling=i(e.item),ee.copy&&(v.item=e.item.cloneNode(!0),ee.scope&&ee.scope.$emit("dragularcloned",v.item,e.item));var r=l.indexOf(e.source);return v.sourceModel=ee.containersModel[r],v.initialIndex=g(e.item,e.source),re.dragging=!0,ee.scope&&ee.scope.$emit("dragulardrag",v.sourceItem,v.source),!0}function w(){return!1}function B(){re.dragging&&$(v.item,v.item.parentElement)}function T(){v.grabbed=!1,E(!0),C(!0)}function A(e){if(T(),re.dragging){e=e||window.event,v.clientX=d("clientX",e),v.clientY=d("clientY",e);var r=J(v.mirror,v.clientX,v.clientY),n=k(r,v.clientX,v.clientY);!n||ee.copy!==!1&&n===v.source?ee.removeOnSpill?D():N():$(v.item,n),v.target=null,v.lastElementBehindCursor&&p(v.lastElementBehindCursor,v.dragOverEvents.dragularrelease,r),ee.scope&&ee.scope.$emit("dragularrelease",v.item,v.source)}}function $(r,n){if(ee.scope&&j(n)?ee.scope.$emit("dragularcancel",r,v.source,v.sourceModel,v.initialIndex):ee.scope&&ee.scope.$emit("dragulardrop",r,n,v.source,v.sourceModel,v.initialIndex),v.sourceModel&&!j(n)){var t=r,o=g(t,n);e.$applyAsync(function(){n===v.source?v.sourceModel.splice(o,0,v.sourceModel.splice(v.initialIndex,1)[0]):(v.dropElmModel=ee.copy?angular.copy(v.sourceModel[v.initialIndex]):v.sourceModel[v.initialIndex],v.targetModel=v.isContainerModel?v.isContainerModel:v.targetCtx.m,n.removeChild(t),ee.copy||v.sourceModel.splice(v.initialIndex,1),v.targetModel.splice(o,0,v.dropElmModel)),r.parentElement&&r.parentElement.removeChild(r),H()})}else H()}function D(){if(re.dragging){var r=v.item.parentElement;r&&r.removeChild(v.item),v.sourceModel&&e.$applyAsync(function(){v.sourceModel.splice(v.initialIndex,1),H()}),ee.scope&&ee.scope.$emit(ee.copy?"dragularcancel":"dragularremove",v.item,r,v.sourceModel,v.initialIndex),v.sourceModel||H()}}function N(e){if(re.dragging){var r=arguments.length>0?e:ee.revertOnSpill,n=v.item.parentElement,t=j(n);t===!1&&ee.copy===!1&&r&&v.source.insertBefore(v.item,v.initialSibling),!v.sourceModel||ee.copy||r?ee.scope&&(t||r?ee.scope.$emit("dragularcancel",v.item,v.source):ee.scope.$emit("dragulardrop",v.item,n,v.source)):$(v.item,n),(!v.sourceModel||ee.copy||r||t)&&H()}}function H(){T(),F(),v.item&&u(v.item,ee.classes.transit),re.dragging=!1,ee.removeOnSpill===!0&&W(),ee.scope&&(ee.scope.$emit("dragularout",v.item,v.lastDropTarget,v.source),ee.scope.$emit("dragulardragend",v.item)),v.source=v.item=v.sourceItem=v.initialSibling=v.currentSibling=v.sourceModel=null,v.initialIndex=v.currentIndex=v.lastDropTarget=v.isContainerModel=v.targetModel=null,v.dropElmModel=v.targetCtx=null}function j(e,r){var n=r||(v.mirror?v.currentSibling:i(v.item));return e===v.source&&n===v.initialSibling}function k(e,r,n){function t(){var t=!1;if(G(o)){for(var i=K(o,e),a=P(o,i,r,n),l=j(o,a),c=ee.nameSpace.length;c--;){if(-1!==v.containers[ee.nameSpace[c]].indexOf(o)){v.targetCtx=v.containersCtx[ee.nameSpace[c]][v.containers[ee.nameSpace[c]].indexOf(o)];break}v.targetCtx||(v.targetCtx=v.containersCtx.dragularCommon[v.containers.dragularCommon.indexOf(o)])}t=l||v.targetCtx.o.accepts(v.item,o,v.source,a,v.sourceModel,v.initialIndex)&&ee.canBeAccepted(v.item,o,v.source,a,v.sourceModel,v.initialIndex),v.target!==o&&(v.target=o)}return t}for(var o=e;o&&!t();)o=o.parentElement;return o}function L(e){function r(e){ee.scope&&ee.scope.$emit("dragular"+e,v.item,v.lastDropTarget,v.source),ee.removeOnSpill===!0&&("over"===e?R():W())}function n(){f&&r("over")}function t(){v.lastDropTarget&&r("out")}if(v.mirror){e=e||window.event,v.clientX=d("clientX",e),v.clientY=d("clientY",e);var o,a,l,c=v.clientX-v.offsetX,u=v.clientY-v.offsetY;ee.boundingBox&&(o=d("pageX",e),a=d("pageY",e),l=_(ee.boundingBox)),ee.lockY||(!ee.boundingBox||o>l.left+v.offsetX&&o<l.right+v.offsetXr?v.mirror.style.left=c+"px":ee.boundingBox&&(v.mirror.style.left=o<l.left+v.offsetX?v.clientX-(o-l.left)+"px":v.clientX-v.mirrorWidth-(o-l.right)+"px")),ee.lockX||(!ee.boundingBox||a>l.top+v.offsetY&&a<l.bottom+v.offsetYb?v.mirror.style.top=u+"px":ee.boundingBox&&(v.mirror.style.top=a<l.top+v.offsetY?v.clientY-(a-l.top)+"px":v.clientY-v.mirrorHeight-(a-l.bottom)+"px"));var s=J(v.mirror,v.clientX,v.clientY),m=k(s,v.clientX,v.clientY),f=m!==v.lastDropTarget;if(s!==v.lastElementBehindCursor&&(p(s,v.dragOverEvents.dragularenter,!!m),v.lastElementBehindCursor&&p(v.lastElementBehindCursor,v.dragOverEvents.dragularleave,s),v.lastElementBehindCursor=s),f&&(t(),v.lastDropTarget=m,n()),m===v.source&&ee.copy)return void(v.item.parentElement&&v.item.parentElement.removeChild(v.item));var g,h=K(m,s);if(null!==h)g=P(m,h,v.clientX,v.clientY);else{if(ee.revertOnSpill!==!0||ee.copy)return void(ee.copy&&null!==v.item.parentElement&&v.item.parentElement.removeChild(v.item));g=v.initialSibling,m=v.source}(null===g||g!==v.item&&g!==i(v.item)&&g!==v.currentSibling)&&(v.currentSibling=g,m.insertBefore(v.item,g),ee.scope&&ee.scope.$emit("dragularshadow",v.item,m))}}function R(){u(v.item,ee.classes.hide)}function W(){re.dragging&&c(v.item,ee.classes.hide)}function q(e){if(v.target){var r=v.target.scrollTop;v.target.scrollTop+=e.deltaY,r!==v.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function z(){if(!v.mirror){var e=v.sourceItem.getBoundingClientRect();v.mirror=v.sourceItem.cloneNode(!0),v.mirrorWidth=e.width,v.mirrorHeight=e.height,v.mirror.style.width=m(e)+"px",v.mirror.style.height=f(e)+"px",u(v.mirror,ee.classes.transit),c(v.mirror,ee.classes.mirror),ee.mirrorContainer.appendChild(v.mirror),r(V,"on","mousemove",L),c(Q,ee.classes.unselectable),r(v.mirror,"on","wheel",q),ee.scope&&ee.scope.$emit("dragularcloned",v.mirror,v.sourceItem)}}function F(){v.mirror&&(u(Q,ee.classes.unselectable),r(V,"off","mousemove",L),r(v.mirror,"off","wheel",q),v.mirror.parentElement.removeChild(v.mirror),v.mirror=null)}function K(e,r){for(var n=r;n!==e&&n.parentElement!==e;)n=n.parentElement;return n===V?null:n}function P(e,r,n,t){function o(){var r,o,i,a=e.children.length;for(r=0;a>r;r++){if(o=e.children[r],i=o.getBoundingClientRect(),c&&i.left>n)return o;if(!c&&i.top>t)return o}return null}function a(){var e=r.getBoundingClientRect();return l(c?n>e.left+m(e)/2:t>e.top+f(e)/2)}function l(e){return e?i(r):r}var c="horizontal"===ee.direction,u=r!==e?a():o();return u}function U(e,r){return"undefined"!=typeof window[r]?window[r]:V.clientHeight?V[e]:Q[e]}function _(e){var r=e.getBoundingClientRect(),n=U("scrollTop","pageYOffset"),t=U("scrollLeft","pageXOffset");return{left:r.left+t,right:r.right+t,top:r.top+n,bottom:r.bottom+n}}function J(e,r,n){var t,o=e||{},i=o.className;return o.className+=" "+ee.classes.hide,t=document.elementFromPoint(r,n),o.className=i,t}1!==arguments.length||Array.isArray(l)||angular.isElement(l)||l[0]||(s=l,l=[]);var G,Q=document.body,V=document.documentElement,Z={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},ee={dragOverEventNames:["dragularenter","dragularleave","dragularrelease"],classes:Z,containers:!1,moves:t,accepts:t,canBeAccepted:t,isContainer:n,copy:!1,invalid:w,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1,isContainerModel:o};a(ee.boundingBox)||(ee.boundingBox=null),s&&s.classes&&(angular.extend(Z,s.classes),angular.extend(s.classes,Z)),angular.extend(ee,s),ee.mirrorContainer||(ee.mirrorContainer=document.body),l=ee.containers||l||[],l=h(l),ee.containersModel=ee.containersModel?Array.isArray(ee.containersModel[0])?ee.containersModel:[ee.containersModel]:[],ee.nameSpace||(ee.nameSpace=["dragularCommon"]),Array.isArray(ee.nameSpace)||(ee.nameSpace=[ee.nameSpace]),ee.nameSpace.forEach(function(e){v.containers[e]||(v.containers[e]=[],v.containersCtx[e]=[]);for(var r=l.length,n=v.containers[e].length,t=0;r>t;t++)v.containers[e][t+n]=l[t],v.containersCtx[e][t+n]={o:ee,m:ee.containersModel[t]}}),y(),angular.forEach(ee.dragOverEventNames,function(e){document.createEvent?(v.dragOverEvents[e]=document.createEvent("HTMLEvents"),v.dragOverEvents[e].initEvent(e,!0,!0)):(v.dragOverEvents[e]=document.createEventObject(),v.dragOverEvents[e].eventType=e)}),G=function(e){for(var r=ee.nameSpace.length;r--;)if(-1!==v.containers[ee.nameSpace[r]].indexOf(e))return!0;return ee.isContainer(e)?(v.isContainerModel=ee.isContainerModel(e),!0):(v.isContainerModel=null,!1)};var re={containers:v.containers,containersCtx:v.containersCtx,isContainer:G,start:O,end:B,cancel:N,remove:D,destroy:M,dragging:!1};return re};return h.cleanEnviroment=function(){v.classesCache={},v.containersCtx={},v.containers={},v.mirror=void 0},h.shared=v,h}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map