!function e(n,r,t){function i(a,l){if(!r[a]){if(!n[a]){var c="function"==typeof require&&require;if(!l&&c)return c(a,!0);if(o)return o(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var u=r[a]={exports:{}};n[a][0].call(u.exports,function(e){var r=n[a][1][e];return i(r?r:e)},u,u.exports,e,n,r,t)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<t.length;a++)i(t[a]);return i}({1:[function(e,n,r){"use strict";var t=e("./dragularModule");t.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(n,r,t){function i(e){try{return JSON.parse(e)}catch(n){return void 0}}var o=n[t.dragular]||i(t.dragular);o&&o.containersModel&&"string"==typeof o.containersModel&&(o.containersModel=n.$eval(o.containersModel)),e(r[0],o)}}}])},{"./dragularModule":2}],2:[function(e,n,r){"use strict";n.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,n,r){"use strict";var t=e("./dragularModule");t.factory("dragularService",["$rootScope",function(e){function n(e,n,r,t){var i={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},o=angular.element(e);i[r]&&o[n](i[r],t),o[n](r,t)}function r(){return!1}function t(){return!0}function i(){return{}}function o(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}return e.nextElementSibling||n()}function a(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function l(e){var n=v.classesCache[e];return n?n.lastIndex=0:v.classesCache[e]=n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),n}function c(e,n){var r=e.className;r.length?l(n).test(r)||(e.className+=" "+n):e.className=n}function s(e,n){e.className=e.className.replace(l(n)," ").trim()}function u(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function d(e,n){var r=u(n),t={pageX:"clientX",pageY:"clientY"};return e in t&&!(e in r)&&t[e]in r&&(e=t[e]),r[e]}function m(e){return e.width||e.right-e.left}function f(e){return e.height||e.bottom-e.top}function g(e,n){return Array.prototype.indexOf.call(angular.element(n).children(),e)}function p(e,n,r){e&&(v.extra=r,e.dispatchEvent?e.dispatchEvent(n):e.fireEvent("on"+n.eventType,n))}var v={classesCache:{},containersModel:{},containers:{},mirror:null,source:null,item:null,sourceItem:null,sourceModel:null,lastDropTarget:null,offsetX:null,offsetY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,isContainerModel:null,targetContainer:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},h=function(l,u){function h(e,n,r){e[n]||(e[n]=[]),Array.prototype.push.apply(e[n],r)}function y(e,n){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,n):[e]}function E(n){e.applyAsync(function(){var e=Array.isArray(n)?n:y(n);e.forEach(function(e){angular.forEach(ne.nameSpace,function(n){var r;r=v.containers[n].indexOf(e),v.containers[n].splice(r,1),ne.containersModel&&v.containersModel[n].splice(r,1)})})})}function M(e){var r=e?"off":"on";n(Z,r,"mouseup",A),l.forEach(function(e){n(e,"on","mousedown",Y)})}function b(e){var r=e?"off":"on";n(Z,r,"mousemove",X)}function x(e){var r=e?"off":"on";n(Z,r,"selectstart",S),n(Z,r,"click",S),n(Z,r,"touchmove",S)}function C(){M(!0),E(l),A({})}function S(e){v.grabbed&&e.preventDefault()}function Y(e){if(e=e||window.event,!(0!==e.which&&1!==e.which||e.metaKey||e.ctrlKey)){var n=O(e.target);n&&(v.grabbed=n,b(),"mousedown"===e.type&&e.preventDefault())}}function X(e){if(b(!0),x(),B(),w(v.grabbed),!ne.direction){var n=v.sourceItem.parentElement,r=n.offsetHeight,t=n.offsetWidth,i=v.sourceItem.clientHeight,o=v.sourceItem.clientWidth;ne.direction=t/o>r/i?"horizontal":"vertical"}var a=J(v.sourceItem);v.offsetX=d("pageX",e)-a.left,v.offsetY=d("pageY",e)-a.top,v.clientX=d("clientX",e),v.clientY=d("clientY",e),ne.boundingBox&&(v.offsetXr=d("pageX",e)-a.right,v.offsetYb=d("pageY",e)-a.bottom),e.preventDefault(),c(v.item,ne.classes.transit),F(),v.mirror.style.left=v.clientX-v.offsetX+"px",v.mirror.style.top=v.clientY-v.offsetY+"px",R(e)}function O(e){if(!re.dragging||!v.mirror){for(var n=e;e.parentElement&&!Q(e.parentElement);){if(ne.invalid(e,n))return;if(e=e.parentElement,!e)return}var r=e.parentElement;if(r&&!ne.invalid(e,n)&&ne.moves(e,r,n))return{item:e,source:r}}}function I(e){var n=O(e);n&&w(n)}function w(e){if(v.sourceItem=v.item=e.item,v.source=e.source,v.initialSibling=v.currentSibling=o(e.item),ne.copy&&(v.item=e.item.cloneNode(!0),ne.scope&&ne.scope.$emit("cloned",v.item,e.item)),ne.containersModel){var n=l.indexOf(e.source);v.sourceModel=ne.containersModel[n],v.initialIndex=g(e.item,e.source)}return re.dragging=!0,ne.scope&&ne.scope.$emit("drag",v.sourceItem,v.source),!0}function T(){return!1}function B(){re.dragging&&D(v.item,v.item.parentElement)}function $(){v.grabbed=!1,b(!0),x(!0)}function A(e){if($(),re.dragging){e=e||window.event,v.clientX=d("clientX",e),v.clientY=d("clientY",e);var n=G(v.mirror,v.clientX,v.clientY),r=L(n,v.clientX,v.clientY);!r||ne.copy!==!1&&r===v.source?ne.removeOnSpill?N():H():D(v.item,r),v.targetContainer=null,v.lastElementBehindCursor&&p(v.lastElementBehindCursor,v.dragOverEvents.dragularrelease,n),ne.scope&&ne.scope.$emit("release",v.item,v.source)}}function D(n,r){if(ne.scope&&k(r)?ne.scope.$emit("cancel",n,v.source,v.sourceModel,v.initialIndex):ne.scope&&ne.scope.$emit("drop",n,r,v.source,v.sourceModel,v.initialIndex),ne.containersModel&&!k(r)){var t=n,i=g(t,r);e.$applyAsync(function(){if(r===v.source)v.sourceModel.splice(i,0,v.sourceModel.splice(v.initialIndex,1)[0]);else{var e,o=ne.copy?angular.copy(v.sourceModel[v.initialIndex]):v.sourceModel[v.initialIndex];if(v.isContainerModel)e=v.isContainerModel;else for(var a=ne.nameSpace.length;a--;)if(-1!==re.containers[ne.nameSpace[a]].indexOf(r)){e=v.containersModel[ne.nameSpace[a]][re.containers[ne.nameSpace[a]].indexOf(r)];break}r.removeChild(t),ne.copy||v.sourceModel.splice(v.initialIndex,1),e.splice(i,0,o)}n.parentElement&&n.parentElement.removeChild(n),j()})}else j()}function N(){if(re.dragging){var n=v.item.parentElement;n&&n.removeChild(v.item),ne.containersModel&&e.$applyAsync(function(){v.sourceModel.splice(v.initialIndex,1),j()}),ne.scope&&ne.scope.$emit(ne.copy?"cancel":"remove",v.item,n,v.sourceModel,v.initialIndex),ne.containersModel||j()}}function H(e){if(re.dragging){var n=arguments.length>0?e:ne.revertOnSpill,r=v.item.parentElement,t=k(r);t===!1&&ne.copy===!1&&n&&v.source.insertBefore(v.item,v.initialSibling),!ne.containersModel||ne.copy||n?ne.scope&&(t||n?ne.scope.$emit("cancel",v.item,v.source):ne.scope.$emit("drop",v.item,r,v.source)):D(v.item,r),(!ne.containersModel||ne.copy||n||t)&&j()}}function j(){$(),K(),v.item&&s(v.item,ne.classes.transit),re.dragging=!1,ne.removeOnSpill===!0&&q(),ne.scope&&(ne.scope.$emit("out",v.item,v.lastDropTarget,v.source),ne.scope.$emit("dragend",v.item)),v.source=v.item=v.sourceItem=v.initialSibling=v.currentSibling=v.sourceModel=null,v.initialIndex=v.currentIndex=v.lastDropTarget=v.isContainerModel=null}function k(e,n){var r=n||(v.mirror?v.currentSibling:o(v.item));return e===v.source&&r===v.initialSibling}function L(e,n,r){function t(){var t=!1;if(Q(i)){var o=P(i,e),a=U(i,o,n,r),l=k(i,a);t=l||ne.accepts(v.item,i,v.source,a,v.sourceModel,v.initialIndex),v.targetContainer!==i&&(v.targetContainer=i)}return t}for(var i=e;i&&!t();)i=i.parentElement;return i}function R(e){function n(e){ne.scope&&ne.scope.$emit(e,v.item,v.lastDropTarget,v.source),ne.removeOnSpill===!0&&("over"===e?W():q())}function r(){f&&n("over")}function t(){v.lastDropTarget&&n("out")}if(v.mirror){e=e||window.event,v.clientX=d("clientX",e),v.clientY=d("clientY",e);var i,a,l,c=v.clientX-v.offsetX,s=v.clientY-v.offsetY;ne.boundingBox&&(i=d("pageX",e),a=d("pageY",e),l=J(ne.boundingBox)),ne.lockY||(!ne.boundingBox||i>l.left+v.offsetX&&i<l.right+v.offsetXr?v.mirror.style.left=c+"px":ne.boundingBox&&(v.mirror.style.left=i<l.left+v.offsetX?v.clientX-(i-l.left)+"px":v.clientX-v.mirrorWidth-(i-l.right)+"px")),ne.lockX||(!ne.boundingBox||a>l.top+v.offsetY&&a<l.bottom+v.offsetYb?v.mirror.style.top=s+"px":ne.boundingBox&&(v.mirror.style.top=a<l.top+v.offsetY?v.clientY-(a-l.top)+"px":v.clientY-v.mirrorHeight-(a-l.bottom)+"px"));var u=G(v.mirror,v.clientX,v.clientY),m=L(u,v.clientX,v.clientY),f=m!==v.lastDropTarget;if(u!==v.lastElementBehindCursor&&(p(u,v.dragOverEvents.dragularenter,!!m),v.lastElementBehindCursor&&p(v.lastElementBehindCursor,v.dragOverEvents.dragularleave,u),v.lastElementBehindCursor=u),f&&(t(),v.lastDropTarget=m,r()),m===v.source&&ne.copy)return void(v.item.parentElement&&v.item.parentElement.removeChild(v.item));var g,h=P(m,u);if(null!==h)g=U(m,h,v.clientX,v.clientY);else{if(ne.revertOnSpill!==!0||ne.copy)return void(ne.copy&&null!==v.item.parentElement&&v.item.parentElement.removeChild(v.item));g=v.initialSibling,m=v.source}(null===g||g!==v.item&&g!==o(v.item)&&g!==v.currentSibling)&&(v.currentSibling=g,m.insertBefore(v.item,g),ne.scope&&ne.scope.$emit("shadow",v.item,m))}}function W(){s(v.item,ne.classes.hide)}function q(){re.dragging&&c(v.item,ne.classes.hide)}function z(e){if(v.targetContainer){var n=v.targetContainer.scrollTop;v.targetContainer.scrollTop+=e.deltaY,n!==v.targetContainer.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function F(){if(!v.mirror){var e=v.sourceItem.getBoundingClientRect();v.mirror=v.sourceItem.cloneNode(!0),v.mirrorWidth=e.width,v.mirrorHeight=e.height,v.mirror.style.width=m(e)+"px",v.mirror.style.height=f(e)+"px",s(v.mirror,ne.classes.transit),c(v.mirror,ne.classes.mirror),ne.mirrorContainer.appendChild(v.mirror),n(Z,"on","mousemove",R),c(V,ne.classes.unselectable),n(v.mirror,"on","wheel",z),ne.scope&&ne.scope.$emit("cloned",v.mirror,v.sourceItem)}}function K(){v.mirror&&(s(V,ne.classes.unselectable),n(Z,"off","mousemove",R),n(v.mirror,"off","wheel",z),v.mirror.parentElement.removeChild(v.mirror),v.mirror=null)}function P(e,n){for(var r=n;r!==e&&r.parentElement!==e;)r=r.parentElement;return r===Z?null:r}function U(e,n,r,t){function i(){var n,i,o,a=e.children.length;for(n=0;a>n;n++){if(i=e.children[n],o=i.getBoundingClientRect(),c&&o.left>r)return i;if(!c&&o.top>t)return i}return null}function a(){var e=n.getBoundingClientRect();return l(c?r>e.left+m(e)/2:t>e.top+f(e)/2)}function l(e){return e?o(n):n}var c="horizontal"===ne.direction,s=n!==e?a():i();return s}function _(e,n){return"undefined"!=typeof window[n]?window[n]:Z.clientHeight?Z[e]:V[e]}function J(e){var n=e.getBoundingClientRect(),r=_("scrollTop","pageYOffset"),t=_("scrollLeft","pageXOffset");return{left:n.left+t,right:n.right+t,top:n.top+r,bottom:n.bottom+r}}function G(e,n,r){var t,i=e||{},o=i.className;return i.className+=" "+ne.classes.hide,t=document.elementFromPoint(n,r),i.className=o,t}1!==arguments.length||Array.isArray(l)||angular.isElement(l)||l[0]||(u=l,l=[]);var Q,V=document.body,Z=document.documentElement,ee={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},ne={dragOverEventNames:["dragularenter","dragularleave","dragularrelease"],classes:ee,containers:!1,moves:t,accepts:t,isContainer:r,copy:!1,invalid:T,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1,isContainerModel:i};a(ne.boundingBox)||(ne.boundingBox=null),u&&u.classes&&(angular.extend(ee,u.classes),angular.extend(u.classes,ee)),angular.extend(ne,u),ne.mirrorContainer||(ne.mirrorContainer=document.body),l=ne.containers||l||[],l=y(l),ne.containersModel&&(ne.containersModel=Array.isArray(ne.containersModel[0])?ne.containersModel:[ne.containersModel]),ne.nameSpace||(ne.nameSpace=["dragularCommon"]),Array.isArray(ne.nameSpace)||(ne.nameSpace=[ne.nameSpace]),ne.nameSpace.forEach(function(e){h(v.containers,e,l),ne.containersModel&&h(v.containersModel,e,ne.containersModel)}),M(),angular.forEach(ne.dragOverEventNames,function(e){document.createEvent?(v.dragOverEvents[e]=document.createEvent("HTMLEvents"),v.dragOverEvents[e].initEvent(e,!0,!0)):(v.dragOverEvents[e]=document.createEventObject(),v.dragOverEvents[e].eventType=e)}),Q=function(e){for(var n=ne.nameSpace.length;n--;)if(-1!==v.containers[ne.nameSpace[n]].indexOf(e))return!0;return ne.isContainer(e)?(v.isContainerModel=ne.isContainerModel(e),!0):(v.isContainerModel=null,!1)};var re={containers:v.containers,containersModel:v.containersModel,isContainer:Q,start:I,end:B,cancel:H,remove:N,destroy:C,dragging:!1};return re};return h.cleanEnviroment=function(){v.classesCache={},v.containersModel={},v.containers={},v.mirror=void 0},h.shared=v,h}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map