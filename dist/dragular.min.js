!function e(n,t,r){function o(a,c){if(!t[a]){if(!n[a]){var l="function"==typeof require&&require;if(!c&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var s=t[a]={exports:{}};n[a][0].call(s.exports,function(e){var t=n[a][1][e];return o(t?t:e)},s,s.exports,e,n,t,r)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,t){"use strict";var r=e("./dragularModule");r.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(n,t,r){function o(e){try{return JSON.parse(e)}catch(n){return void 0}}var i=n[r.dragular]||o(r.dragular);i&&i.containersModel&&"string"==typeof i.containersModel&&(i.containersModel=n.$eval(i.containersModel)),e(t[0],i)}}}])},{"./dragularModule":2}],2:[function(e,n,t){"use strict";n.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,n,t){"use strict";var r=e("./dragularModule");r.factory("dragularService",["$rootScope",function(e){function n(e,n,t,r){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i=angular.element(e);o[t]&&i[n](o[t],r),i[n](t,r)}function t(){return!1}function r(){return!0}function o(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}return e.nextElementSibling||n()}function i(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function a(e){var n=E[e];return n?n.lastIndex=0:E[e]=n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),n}function c(e,n){var t=e.className;t.length?a(n).test(t)||(e.className+=" "+n):e.className=n}function l(e,n){e.className=e.className.replace(a(n)," ").trim()}function u(e,n){return(" "+e.className+" ").indexOf(" "+n+" ")>-1}function s(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function f(e,n){var t=s(n),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in t)&&r[e]in t&&(e=r[e]),t[e]}function p(e){return e.width||e.right-e.left}function d(e){return e.height||e.bottom-e.top}function v(e,n){return Array.prototype.indexOf.call(angular.element(n).children(),e)}function g(e,n){e&&(e.dispatchEvent?e.dispatchEvent(n):e.fireEvent("on"+n.eventType,n))}var m,h={},y={},E={};return function(a,s){function E(e,n,t,r){n[t]||(n[t]=[]),Array.prototype.push.apply(n[t],r),e[t]=n[t]}function x(e,n){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,n):[e]}function M(n){e.applyAsync(function(){var e=Array.isArray(n)?n:x(n);e.forEach(function(e){angular.forEach(Be.nameSpace,function(n){var t;t=Ce[n].indexOf(e),Ce[n].splice(t,1),Be.containersModel&&Te[n].splice(t,1)})})})}function b(e){var n;for(n in Ne.containers)if(Ne.containers.hasOwnProperty(n)&&-1!==Ne.containers[n].indexOf(e))return!0;return Be.isContainer(e)}function w(e){var t=e?"off":"on";n(Se,t,"mouseup",k),a.forEach(function(e){n(e,"on","mousedown",T)})}function O(e){var t=e?"off":"on";n(Se,t,"mousemove",$)}function S(e){var t=e?"off":"on";n(Se,t,"selectstart",C),n(Se,t,"click",C)}function A(){w(!0),M(a),k({})}function C(e){we&&e.preventDefault()}function T(e){if(e=e||window.event,!(0!==e.which&&1!==e.which||e.metaKey||e.ctrlKey)){var n=e.target,t=B(n);t&&(we=t,O(),"mousedown"===e.type&&e.preventDefault())}}function $(e){if(O(!0),S(),X(),Y(we),!Be.direction){var n=ne.parentElement,t=n.offsetHeight,r=n.offsetWidth,o=ne.clientHeight,i=ne.clientWidth;Be.direction=r/i>t/o?"horizontal":"vertical"}var a=V(ne);re=f("pageX",e)-a.left,oe=f("pageY",e)-a.top,ce=f("clientX",e),le=f("clientY",e),Be.boundingBox&&(ie=f("pageX",e)-a.right,ae=f("pageY",e)-a.bottom),e.preventDefault(),c(he||ne,Be.classes.transit),_(),m.style.left=ce-re+"px",m.style.top=le-oe+"px",F(e)}function B(e){if(!(Ne.dragging&&m||ye(e))){for(var n=e;e.parentElement&&!ye(e.parentElement);){if(Be.invalid(e,n))return;if(e=e.parentElement,!e)return}var t=e.parentElement;if(t&&t&&!Be.invalid(e,n)&&Be.moves(e,t,n,te))return{item:e,source:t}}}function N(e){var n=B(e);n&&Y(n)}function Y(e){if(Be.copy&&(he=e.item.cloneNode(!0),Be.scope&&Be.scope.$emit("cloned",he,e.item)),ee=e.source,ne=e.item,fe=pe=o(e.item),Be.containersModel){var n=a.indexOf(e.source);te=Be.containersModel[n],de=v(e.item,e.source)}return Ne.dragging=!0,Be.scope&&Be.scope.$emit("drag",ne,ee),!0}function D(){return!1}function X(){if(Ne.dragging){var e=he||ne;H(e,e.parentElement)}}function j(){we=!1,O(!0),S(!0)}function k(e){if(j(),Ne.dragging){e=e||window.event,ce=f("clientX",e),le=f("clientY",e);var n=he||ne,t=Z(m,ce,le),r=z(t,ce,le);!r||Be.copy!==!1&&r===ee?Be.removeOnSpill?L():R():H(n,r),Ee=null,Be.dragOverClasses&&ge&&(l(ge,me),ge=null),Be.scope&&Be.scope.$emit("release",n,ee)}}function H(n,t){if(Be.scope&&P(t)?Be.scope.$emit("cancel",n,ee,te):Be.scope&&Be.scope.$emit("drop",n,t,ee,te),Be.containersModel&&!P(t)){var r=he||ne,o=v(r,t);e.$applyAsync(function(){if(t===ee)te.splice(o,0,te.splice(de,1)[0]);else{var e,n=Be.copy?angular.copy(te[de]):te[de];for(var i in Ne.containers)if(Ne.containers.hasOwnProperty(i)&&-1!==Ne.containers[i].indexOf(t)){e=Te[i][Ne.containers[i].indexOf(t)];break}Be.copy||te.splice(de,1),e.splice(o,0,n),t.removeChild(r)}var a=he||ne;a.parentElement&&a.parentElement.removeChild(a),q()})}else q()}function L(){if(Ne.dragging){var n=he||ne,t=n.parentElement,r=te&&te[de];t&&t.removeChild(n),Be.containersModel&&e.$applyAsync(function(){te.splice(de,1),q()}),Be.scope&&Be.scope.$emit(Be.copy?"cancel":"remove",n,t,r,te),Be.containersModel||q()}}function R(e){if(Ne.dragging){var n=arguments.length>0?e:Be.revertOnSpill,t=he||ne,r=t.parentElement,o=P(r);o===!1&&Be.copy===!1&&n&&ee.insertBefore(t,fe),!Be.containersModel||Be.copy||n?Be.scope&&(o||n?Be.scope.$emit("cancel",t,ee):Be.scope.$emit("drop",t,r,ee)):H(t,r),(!Be.containersModel||Be.copy||n||o)&&q()}}function q(){j();var e=he||ne;I(),e&&l(e,Be.classes.transit),Ne.dragging=!1,Be.removeOnSpill===!0&&U(),Be.scope&&(Be.scope.$emit("out",e,Ae,ee),Be.scope.$emit("dragend",e)),ee=ne=he=fe=pe=te=null,de=ve=Ae=null}function P(e,n){var t=n||(m?pe:o(ne||he));return e===ee&&t===fe}function z(e,n,t){function r(){var r=!1;if(ye(o)){var i=J(o,e),a=G(o,i,n,t),s=P(o,a);r=s?!0:Be.accepts(ne,o,ee,a,te),Ee!==o&&(Ee=o)}return Be.dragOverClasses&&u(o,Be.classes.overActive)&&o!==ge&&(ge&&l(ge,me),me=r?Be.classes.overAccepts:Be.classes.overDeclines,c(o,me),ge=o),r}for(var o=e;o&&!r();)o=o.parentElement;return o}function F(e){function n(e){Be.scope&&Be.scope.$emit(e,ne,Ae,ee),Be.removeOnSpill===!0&&("over"===e?K():U())}function t(){v&&n("over")}function r(){Ae&&n("out")}if(m){e=e||window.event,ce=f("clientX",e),le=f("clientY",e);var i,a,c,l=ce-re,u=le-oe;Be.boundingBox&&(i=f("pageX",e),a=f("pageY",e),c=V(Be.boundingBox)),Be.lockY||(!Be.boundingBox||i>c.left+re&&i<c.right+ie?m.style.left=l+"px":Be.boundingBox&&(m.style.left=i<c.left+re?ce-(i-c.left)+"px":ce-ue-(i-c.right)+"px")),Be.lockX||(!Be.boundingBox||a>c.top+oe&&a<c.bottom+ae?m.style.top=u+"px":Be.boundingBox&&(m.style.top=a<c.top+oe?le-(a-c.top)+"px":le-se-(a-c.bottom)+"px"));var s=he||ne,p=Z(m,ce,le),d=z(p,ce,le),v=null!==d&&d!==Ae;if(p!==be&&(g(p,xe),be&&g(be,Me),be=p),(v||null===d)&&(r(),Ae=d,t()),d===ee&&Be.copy)return void(s.parentElement&&s.parentElement.removeChild(s));var h,y=J(d,p);if(null!==y)h=G(d,y,ce,le);else{if(Be.revertOnSpill!==!0||Be.copy)return void(Be.copy&&null!==s.parentElement&&s.parentElement.removeChild(s));h=fe,d=ee}(null===h||h!==s&&h!==o(s)&&h!==pe)&&(pe=h,d.insertBefore(s,h),Be.scope&&Be.scope.$emit("shadow",s,d))}}function K(){var e=he||ne;l(e,Be.classes.hide)}function U(){var e=he||ne;Ne.dragging&&c(e,Be.classes.hide)}function W(e){if(Ee){var n=Ee.scrollTop;Ee.scrollTop+=e.deltaY,n!==Ee.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function _(){if(!m){var e=ne.getBoundingClientRect();m=ne.cloneNode(!0),ue=e.width,se=e.height,m.style.width=p(e)+"px",m.style.height=d(e)+"px",l(m,Be.classes.transit),c(m,Be.classes.mirror),Be.mirrorContainer.appendChild(m),n(Se,"on","mousemove",F),c(Oe,Be.classes.unselectable),n(m,"on","wheel",W),Be.scope&&Be.scope.$emit("cloned",m,ne)}}function I(){m&&(l(Oe,Be.classes.unselectable),n(Se,"off","mousemove",F),n(m,"off","wheel",W),m.parentElement.removeChild(m),m=null)}function J(e,n){for(var t=n;t!==e&&t.parentElement!==e;)t=t.parentElement;return t===Se?null:t}function G(e,n,t,r){function i(){var n,o,i,a=e.children.length;for(n=0;a>n;n++){if(o=e.children[n],i=o.getBoundingClientRect(),l&&i.left>t)return o;if(!l&&i.top>r)return o}return null}function a(){var e=n.getBoundingClientRect();return c(l?t>e.left+p(e)/2:r>e.top+d(e)/2)}function c(e){return e?o(n):n}var l="horizontal"===Be.direction,u=n!==e?a():i();return u}function Q(e,n){return"undefined"!=typeof window[n]?window[n]:Se.clientHeight?Se[e]:Oe[e]}function V(e){var n=e.getBoundingClientRect(),t=Q("scrollTop","pageYOffset"),r=Q("scrollLeft","pageXOffset");return{left:n.left+r,right:n.right+r,top:n.top+t,bottom:n.bottom+t}}function Z(e,n,t){var r,o=e||{},i=o.className;return o.className+=" "+Be.classes.hide,r=document.elementFromPoint(n,t),o.className=i,r}1!==arguments.length||Array.isArray(a)||angular.isElement(a)||a[0]||(s=a,a=[]);var ee,ne,te,re,oe,ie,ae,ce,le,ue,se,fe,pe,de,ve,ge,me,he,ye,Ee,xe,Me,be,we,Oe=document.body,Se=document.documentElement,Ae=null,Ce={},Te={},$e={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit",overActive:"gu-over-active",overAccepts:"gu-over-accept",overDeclines:"gu-over-decline"},Be={classes:$e,containers:!1,moves:r,accepts:r,isContainer:t,copy:!1,invalid:D,revertOnSpill:!1,removeOnSpill:!1,dragOverClasses:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1};i(Be.boundingBox)||(Be.boundingBox=null),s&&s.classes&&(angular.extend($e,s.classes),angular.extend(s.classes,$e)),angular.extend(Be,s),Be.mirrorContainer||(Be.mirrorContainer=document.body),a=Be.containers||(a?x(a):[]),Be.containers&&(a=x(a)),Be.containersModel&&(Be.containersModel=Array.isArray(Be.containersModel[0])?Be.containersModel:[Be.containersModel]),Be.nameSpace||(Be.nameSpace=["dragularCommon"]),Array.isArray(Be.nameSpace)||(Be.nameSpace=[Be.nameSpace]),Be.nameSpace.forEach(function(e){E(Ce,h,e,a),Be.containersModel&&E(Te,y,e,Be.containersModel)}),ye=b,w(),document.createEvent?(xe=document.createEvent("HTMLEvents"),xe.initEvent("dragularenter",!0,!0),Me=document.createEvent("HTMLEvents"),Me.initEvent("dragularleave",!0,!0)):(xe=document.createEventObject(),xe.eventType="dragularenter",Me=document.createEventObject(),Me.eventType="dragularleave");var Ne={containers:Ce,containersModel:Te,start:N,end:X,cancel:R,remove:L,destroy:A,dragging:!1};return Ne}}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map