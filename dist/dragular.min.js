!function e(n,t,r){function o(a,l){if(!t[a]){if(!n[a]){var c="function"==typeof require&&require;if(!l&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var s=t[a]={exports:{}};n[a][0].call(s.exports,function(e){var t=n[a][1][e];return o(t?t:e)},s,s.exports,e,n,t,r)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,t){"use strict";var r=e("./dragularModule");r.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(n,t,r){function o(e){try{return JSON.parse(e)}catch(n){return void 0}}e(t[0],n[r.dragular||"undefined"]||o(r.dragular))}}}])},{"./dragularModule":2}],2:[function(e,n,t){"use strict";n.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,n,t){"use strict";var r=e("./dragularModule");r.factory("dragularService",function(){function e(e,n,t,r){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i=angular.element(e);"wheel"!==t&&i[n](o[t],r),i[n](t,r)}function n(){return!1}function t(){return!0}function r(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}return e.nextElementSibling||n()}function o(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function i(e,n){-1===e.className.indexOf(" "+n)&&(e.className+=" "+n)}function a(e,n){angular.element(e).removeClass(n)}function l(e,n){return(" "+e.className+" ").indexOf(" "+n+" ")>-1}function c(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function u(e,n){var t=c(n),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in t)&&r[e]in t&&(e=r[e]),t[e]}function s(e){return e.width||e.right-e.left}function d(e){return e.height||e.bottom-e.top}function f(e,n){return Array.prototype.indexOf.call(angular.element(n).children(),e)}var p,g={},v={};return function(c,m){function h(e,n,t,r){n[t]||(n[t]=[]),Array.prototype.push.apply(n[t],r),e[t]=n[t]}function y(e){if(Array.isArray(e))return e;if(e.length){for(var n=e.length,t=[];n;)n--,t.push(e[n]);return t}return[e]}function x(e){return function(n){var t=Array.isArray(n)?n:y(n);t.forEach(function(n){Ee.nameSpace?angular.forEach(Ee.nameSpace,function(t,r){"add"===e?(we[r].push(n),console.warn&&void 0):(we[r].splice(we.indexOf(n),1),console.warn&&void 0)}):"add"===e?(we.push(n),console.warn&&void 0):(we.splice(we.indexOf(n),1),console.warn&&void 0)})}}function M(e){return-1!==Ce.containers.indexOf(e)||Ee.isContainer(e)?(Ee.containersModel&&(Q=I,I=Oe[Ce.containers.indexOf(e)],Z=V,V=angular.element(e).scope()),!0):!1}function w(e){function n(n){n&&n[Ee.isContainerModel]&&(r=!0,Q=I,I=n[Ee.isContainerModel],Z=V,V=angular.element(e).scope())}var t;for(t in Ce.containers)if(Ce.containers.hasOwnProperty(t)&&-1!==Ce.containers[t].indexOf(e))return Ee.containersModel&&(Q=I,I=Oe[t][Ce.containers[t].indexOf(e)],Z=V,V=angular.element(e).scope()),!0;if(Ee.isContainer(e)){if(Ee.containersModel&&Ee.isContainerModel){var r=!1;n(angular.element(target).isolateScope()),r||n(angular.element(target).scope())}return!0}return!1}function O(n){var t=n?"off":"on";e(Me,t,"mouseup",A),c.forEach(function(n){e(n,"on","mousedown",E)})}function b(){O(!0),Ce.removeContainer(we),A({})}function E(e){e=e||window.event;var n=e.target;if(!(0!==e.which&&1!==e.which||e.metaKey||e.ctrlKey)&&S(n)===!0){if(!Ee.direction){var t=n.parentElement,r=t.offsetHeight,o=t.offsetWidth,i=n.clientHeight,a=n.clientWidth;Ee.direction=o/a>r/i?"horizontal":"vertical"}var l=K(_);ee=u("pageX",e)-l.left,ne=u("pageY",e)-l.top,oe=u("clientX",e),ie=u("clientY",e),Ee.boundingBox&&(te=u("pageX",e)-l.right,re=u("pageY",e)-l.bottom),"number"==typeof Ee.delay?me=setTimeout(function(){C(e)},Ee.delay):C(e),e.preventDefault()}}function C(e){L(),p.style.left=oe-ee+"px",p.style.top=ie-ne+"px",k(e)}function S(e){var n=e;if(Ce.dragging&&p)return!1;if(he(e))return!1;for(;!he(e.parentElement);){if(Ee.invalid(e,n))return!1;if(e=e.parentElement,!e)return}if(Ee.invalid(e,n))return!1;var t=e.parentElement;if(!Ee.moves(e,t,n,G,J))return!1;if(T(),Ee.containersModel){var o=c.indexOf(t),a=f(e,t);se=de=a,J=Ee.containersModel[o],G=J[a],Ee.copy&&(ve=angular.copy(G))}return Ee.copy?(ge=e.cloneNode(!0),i(ge,Ee.classes.transit),Ee.scope&&Ee.scope.$emit("cloned",ge,e,ve,G)):i(e,Ee.classes.transit),W=t,_=e,ce=ue=r(e),Ce.dragging=!0,Ee.scope&&Ee.scope.$emit("drag",_,W),!0}function B(e){return"A"===e.tagName||"BUTTON"===e.tagName}function T(){if(Ce.dragging){var e=ge||_;N(e,e.parentElement)}}function A(e){if(Ce.dragging){e=e||window.event,oe=u("clientX",e),ie=u("clientY",e);var n=ge||_,t=P(p,oe,ie),r=j(t,oe,ie);!r||Ee.copy!==!1&&r===W?Ee.removeOnSpill?$():Y():N(n,r),ye=null,Ee.dragOverClasses&&fe&&(a(fe,pe),fe=null)}}function N(e,n){Ee.scope&&D(n)?Ee.scope.$emit("cancel",e,W,ve||G,J,I):Ee.scope&&Ee.scope.$emit("drop",e,n,W,ve||G,J,I),X()}function $(){if(Ce.dragging){var e=ge||_,n=e.parentElement;if(Ee.containersModel){var t=ve||G;I.splice(I.indexOf(t),1)}else n&&n.removeChild(e);Ee.scope&&Ee.scope.$emit(Ee.copy?"cancel":"remove",e,n,t,J,I),X()}}function Y(e){if(Ce.dragging){var n=arguments.length>0?e:Ee.revertOnSpill,t=ge||_,r=t.parentElement;r===W&&Ee.copy&&(Ee.containersModel?I.splice(I.indexOf(ve),1,ve):r.removeChild(ge));var o=D(r);o===!1&&Ee.copy===!1&&n&&(Ee.containersModel?(Q=I,I=J,Z=V,V=angular.element(el).scope(),H(se)):W.insertBefore(t,ce)),Ee.scope&&(o||n)?Ee.scope.$emit("cancel",t,W):Ee.scope&&Ee.scope.$emit("drop",t,r,W),X()}}function X(){var e=ge||_;R(),e&&a(e,Ee.classes.transit),me&&clearTimeout(me),W=_=ge=ce=ue=J=null,G=ve=se=de=me=null,Ce.dragging=!1,Ee.scope&&Ee.scope.$emit("dragend",e)}function D(e,n){var t=n||(p?ue:r(_||ge));return e===W&&t===ce}function j(e,n,t){function r(){var r=!1;if(he(o)){ye=o;var c=U(o,e),u=z(o,c,n,t),s=D(o,u);r=s?!0:Ee.accepts(_,o,W,u,G,J)}return Ee.dragOverClasses&&l(o,Ee.classes.overActive)&&o!==fe&&(fe&&a(fe,pe),pe=r?Ee.classes.overAccepts:Ee.classes.overDeclines,i(o,pe),fe=o),r}for(var o=e;o&&!r();)o=o.parentElement;return o}function k(e){if(p){e=e||window.event,oe=u("clientX",e),ie=u("clientY",e);var n,t,o,i=oe-ee,a=ie-ne;Ee.boundingBox&&(n=u("pageX",e),t=u("pageY",e),o=K(Ee.boundingBox)),Ee.lockY||(!Ee.boundingBox||n>o.left+ee&&n<o.right+te?p.style.left=i+"px":Ee.boundingBox&&(p.style.left=n<o.left+ee?oe-(n-o.left)+"px":oe-ae-(n-o.right)+"px")),Ee.lockX||(!Ee.boundingBox||t>o.top+ne&&t<o.bottom+re?p.style.top=a+"px":Ee.boundingBox&&(p.style.top=t<o.top+ne?ie-(t-o.top)+"px":ie-le-(t-o.bottom)+"px"));var l=ge||_,c=P(p,oe,ie),s=j(c,oe,ie);if(s!==W||!Ee.copy){var d,g=U(s,c);if(Ee.containersModel){var v;Z=V||angular.element(W).scope(),V=angular.element(s).scope()}if(null!==g)d=z(s,g,oe,ie),Ee.containersModel&&(v=f(d,s));else{if(Ee.revertOnSpill!==!0||Ee.copy)return void(!Ee.copy&&Ee.removeOnSpill!==!0||null===l.parentElement||(Ee.containersModel?(I.splice(v,1),V.$apply()):l.parentElement.removeChild(l)));d=ce,s=W,Ee.containersModel&&(v=se,Q=I,I=J,Z=V,V=angular.element(s).scope())}(null===d||d!==l&&d!==r(l))&&(ue=d,Ee.containersModel?(H(v),de=v):s.insertBefore(l,d),Ee.scope&&Ee.scope.$emit("shadow",l,s))}}}function H(e){Q===I?I.splice(e,0,Q.splice(de,1)[0]):(Q.splice(de,1),I.splice(e,0,ve||G),Z.$apply()),V.$apply()}function q(e){ye&&(ye.scrollTop+=e.deltaY)}function L(){if(!p){var n=_.getBoundingClientRect();p=_.cloneNode(!0),ae=n.width,le=n.height,p.style.width=s(n)+"px",p.style.height=d(n)+"px",a(p,Ee.classes.transit),i(p,Ee.classes.mirror),xe.appendChild(p),e(Me,"on","mousemove",k),i(xe,Ee.classes.unselectable),e(p,"on","wheel",q),Ee.scope&&Ee.scope.$emit("cloned",p,_)}}function R(){p&&(a(xe,Ee.classes.unselectable),e(Me,"off","mousemove",k),e(p,"off","wheel",q),p.parentElement.removeChild(p),p=null)}function U(e,n){for(var t=n;t!==e&&t.parentElement!==e;)t=t.parentElement;return t===Me?null:t}function z(e,n,t,o){function i(){var n,r,i,a=e.children.length;for(n=0;a>n;n++){if(r=e.children[n],i=r.getBoundingClientRect(),c&&i.left>t)return r;if(!c&&i.top>o)return r}return null}function a(){var e=n.getBoundingClientRect();return l(c?t>e.left+s(e)/2:o>e.top+d(e)/2)}function l(e){return e?r(n):n}var c="horizontal"===Ee.direction,u=n!==e?a():i();return u}function F(e,n){return"undefined"!=typeof window[n]?window[n]:Me.clientHeight?Me[e]:xe[e]}function K(e){var n=e.getBoundingClientRect(),t=F("scrollTop","pageYOffset"),r=F("scrollLeft","pageXOffset");return{left:n.left+r,right:n.right+r,top:n.top+t,bottom:n.bottom+t}}function P(e,n,t){if(!n&&!t)return null;var r,o=e||{},i=o.className;return o.className+=" "+Ee.classes.hide,r=document.elementFromPoint(n,t),o.className=i,r}1!==arguments.length||Array.isArray(c)||angular.isElement(c)||c[0]||(m=c,c=[]);var W,_,J,G,I,Q,V,Z,ee,ne,te,re,oe,ie,ae,le,ce,ue,se,de,fe,pe,ge,ve,me,he,ye,xe=document.body,Me=document.documentElement,we={},Oe={},be={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit",overActive:"gu-over-active",overAccepts:"gu-over-accept",overDeclines:"gu-over-decline"},Ee={classes:be,containers:!1,moves:t,accepts:t,isContainer:n,copy:!1,delay:!1,invalid:B,revertOnSpill:!1,removeOnSpill:!1,dragOverClasses:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1};o(Ee.boundingBox)||(Ee.boundingBox=null),m&&m.classes&&(angular.extend(be,m.classes),angular.extend(m.classes,be)),angular.extend(Ee,m),Ee.delay===!0&&(Ee.delay=300),c=Ee.containers||(c?y(c):[]),Ee.containers&&(c=y(c)),Ee.containersModel&&(Ee.containersModel=y(Ee.containersModel)),Ee.nameSpace?(Array.isArray(Ee.nameSpace)||(Ee.nameSpace=[Ee.nameSpace]),Ee.nameSpace.forEach(function(e){h(we,g,e,c),Ee.containersModel&&h(Oe,v,e,Ee.containersModel)}),he=w):(we=c,he=M,Ee.containersModel&&(Oe=Ee.containersModel)),O();var Ce={addContainer:x("add"),removeContainer:x("remove"),containers:we,start:S,end:T,cancel:Y,remove:$,destroy:b,dragging:!1};return Ce}})},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map