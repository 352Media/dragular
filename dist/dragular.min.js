!function e(n,r,t){function o(l,a){if(!r[l]){if(!n[l]){var c="function"==typeof require&&require;if(!a&&c)return c(l,!0);if(i)return i(l,!0);var s=new Error("Cannot find module '"+l+"'");throw s.code="MODULE_NOT_FOUND",s}var u=r[l]={exports:{}};n[l][0].call(u.exports,function(e){var r=n[l][1][e];return o(r?r:e)},u,u.exports,e,n,r,t)}return r[l].exports}for(var i="function"==typeof require&&require,l=0;l<t.length;l++)o(t[l]);return o}({1:[function(e,n,r){"use strict";var t=e("./dragularModule");t.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(n,r,t){function o(e){try{return JSON.parse(e)}catch(n){return void 0}}var i=n[t.dragular]||o(t.dragular);i&&i.containersModel&&"string"==typeof i.containersModel&&(i.containersModel=n.$eval(i.containersModel)),e(r[0],i)}}}])},{"./dragularModule":2}],2:[function(e,n,r){"use strict";n.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,n,r){"use strict";var t=e("./dragularModule");t.factory("dragularService",["$rootScope",function(e){function n(e,n,r,t){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i=angular.element(e);o[r]&&i[n](o[r],t),i[n](r,t)}function r(){return!1}function t(){return!0}function o(){return{}}function i(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}return e.nextElementSibling||n()}function l(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function a(e){var n=v.classesCache[e];return n?n.lastIndex=0:v.classesCache[e]=n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),n}function c(e,n){var r=e.className;r.length?a(n).test(r)||(e.className+=" "+n):e.className=n}function s(e,n){e.className=e.className.replace(a(n)," ").trim()}function u(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function d(e,n){var r=u(n),t={pageX:"clientX",pageY:"clientY"};return e in t&&!(e in r)&&t[e]in r&&(e=t[e]),r[e]}function m(e){return e.width||e.right-e.left}function f(e){return e.height||e.bottom-e.top}function g(e,n){return Array.prototype.indexOf.call(angular.element(n).children(),e)}function p(e,n,r){e&&(v.extra=r,e.dispatchEvent?e.dispatchEvent(n):e.fireEvent("on"+n.eventType,n))}var v={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,sourceItem:null,sourceModel:null,lastDropTarget:null,offsetX:null,offsetY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,isContainerModel:null,targetContainer:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},h=function(a,u){function h(e,n){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,n):[e]}function x(n){e.applyAsync(function(){var e=Array.isArray(n)?n:h(n);e.forEach(function(e){angular.forEach(ee.nameSpace,function(n){var r;r=v.containers[n].indexOf(e),v.containers[n].splice(r,1),v.containersCtx[n].splice(r,1)})})})}function y(e){var r=e?"off":"on";n(V,r,"mouseup",$),a.forEach(function(e){n(e,"on","mousedown",S)})}function E(e){var r=e?"off":"on";n(V,r,"mousemove",Y)}function C(e){var r=e?"off":"on";n(V,r,"selectstart",b),n(V,r,"click",b),n(V,r,"touchmove",b)}function M(){y(!0),x(a),$({})}function b(e){v.grabbed&&e.preventDefault()}function S(e){if(e=e||window.event,!(0!==e.which&&1!==e.which||e.metaKey||e.ctrlKey)){var n=X(e.target);n&&(v.grabbed=n,E(),"mousedown"===e.type&&e.preventDefault())}}function Y(e){if(E(!0),C(),T(),I(v.grabbed),!ee.direction){var n=v.sourceItem.parentElement,r=n.offsetHeight,t=n.offsetWidth,o=v.sourceItem.clientHeight,i=v.sourceItem.clientWidth;ee.direction=t/i>r/o?"horizontal":"vertical"}var l=_(v.sourceItem);v.offsetX=d("pageX",e)-l.left,v.offsetY=d("pageY",e)-l.top,v.clientX=d("clientX",e),v.clientY=d("clientY",e),ee.boundingBox&&(v.offsetXr=d("pageX",e)-l.right,v.offsetYb=d("pageY",e)-l.bottom),e.preventDefault(),c(v.item,ee.classes.transit),z(),v.mirror.style.left=v.clientX-v.offsetX+"px",v.mirror.style.top=v.clientY-v.offsetY+"px",L(e)}function X(e){if(!ne.dragging||!v.mirror){for(var n=e;e.parentElement&&!G(e.parentElement);){if(ee.invalid(e,n))return;if(e=e.parentElement,!e)return}var r=e.parentElement;if(r&&!ee.invalid(e,n)&&ee.moves(e,r,n))return{item:e,source:r}}}function O(e){var n=X(e);n&&I(n)}function I(e){v.sourceItem=v.item=e.item,v.source=e.source,v.initialSibling=v.currentSibling=i(e.item),ee.copy&&(v.item=e.item.cloneNode(!0),ee.scope&&ee.scope.$emit("cloned",v.item,e.item));var n=a.indexOf(e.source);return v.sourceModel=ee.containersModel[n],v.initialIndex=g(e.item,e.source),ne.dragging=!0,ee.scope&&ee.scope.$emit("drag",v.sourceItem,v.source),!0}function w(){return!1}function T(){ne.dragging&&A(v.item,v.item.parentElement)}function B(){v.grabbed=!1,E(!0),C(!0)}function $(e){if(B(),ne.dragging){e=e||window.event,v.clientX=d("clientX",e),v.clientY=d("clientY",e);var n=J(v.mirror,v.clientX,v.clientY),r=k(n,v.clientX,v.clientY);!r||ee.copy!==!1&&r===v.source?ee.removeOnSpill?D():N():A(v.item,r),v.targetContainer=null,v.lastElementBehindCursor&&p(v.lastElementBehindCursor,v.dragOverEvents.dragularrelease,n),ee.scope&&ee.scope.$emit("release",v.item,v.source)}}function A(n,r){if(ee.scope&&j(r)?ee.scope.$emit("cancel",n,v.source,v.sourceModel,v.initialIndex):ee.scope&&ee.scope.$emit("drop",n,r,v.source,v.sourceModel,v.initialIndex),v.sourceModel&&!j(r)){var t=n,o=g(t,r);e.$applyAsync(function(){if(r===v.source)v.sourceModel.splice(o,0,v.sourceModel.splice(v.initialIndex,1)[0]);else{if(v.dropElmModel=ee.copy?angular.copy(v.sourceModel[v.initialIndex]):v.sourceModel[v.initialIndex],v.isContainerModel)v.targetModel=v.isContainerModel;else for(var e=ee.nameSpace.length;e--;)if(-1!==v.containers[ee.nameSpace[e]].indexOf(r)){v.targetModel=v.containersCtx[ee.nameSpace[e]][v.containers[ee.nameSpace[e]].indexOf(r)].m;break}r.removeChild(t),ee.copy||v.sourceModel.splice(v.initialIndex,1),v.targetModel.splice(o,0,v.dropElmModel)}n.parentElement&&n.parentElement.removeChild(n),H()})}else H()}function D(){if(ne.dragging){var n=v.item.parentElement;n&&n.removeChild(v.item),v.sourceModel&&e.$applyAsync(function(){v.sourceModel.splice(v.initialIndex,1),H()}),ee.scope&&ee.scope.$emit(ee.copy?"cancel":"remove",v.item,n,v.sourceModel,v.initialIndex),v.sourceModel||H()}}function N(e){if(ne.dragging){var n=arguments.length>0?e:ee.revertOnSpill,r=v.item.parentElement,t=j(r);t===!1&&ee.copy===!1&&n&&v.source.insertBefore(v.item,v.initialSibling),!v.sourceModel||ee.copy||n?ee.scope&&(t||n?ee.scope.$emit("cancel",v.item,v.source):ee.scope.$emit("drop",v.item,r,v.source)):A(v.item,r),(!v.sourceModel||ee.copy||n||t)&&H()}}function H(){B(),F(),v.item&&s(v.item,ee.classes.transit),ne.dragging=!1,ee.removeOnSpill===!0&&W(),ee.scope&&(ee.scope.$emit("out",v.item,v.lastDropTarget,v.source),ee.scope.$emit("dragend",v.item)),v.source=v.item=v.sourceItem=v.initialSibling=v.currentSibling=v.sourceModel=null,v.initialIndex=v.currentIndex=v.lastDropTarget=v.isContainerModel=v.targetModel=null,v.dropElmModel}function j(e,n){var r=n||(v.mirror?v.currentSibling:i(v.item));return e===v.source&&r===v.initialSibling}function k(e,n,r){function t(){var t=!1;if(G(o)){var i=K(o,e),l=P(o,i,n,r),a=j(o,l);t=a||ee.accepts(v.item,o,v.source,l,v.sourceModel,v.initialIndex),v.targetContainer!==o&&(v.targetContainer=o)}return t}for(var o=e;o&&!t();)o=o.parentElement;return o}function L(e){function n(e){ee.scope&&ee.scope.$emit(e,v.item,v.lastDropTarget,v.source),ee.removeOnSpill===!0&&("over"===e?R():W())}function r(){f&&n("over")}function t(){v.lastDropTarget&&n("out")}if(v.mirror){e=e||window.event,v.clientX=d("clientX",e),v.clientY=d("clientY",e);var o,l,a,c=v.clientX-v.offsetX,s=v.clientY-v.offsetY;ee.boundingBox&&(o=d("pageX",e),l=d("pageY",e),a=_(ee.boundingBox)),ee.lockY||(!ee.boundingBox||o>a.left+v.offsetX&&o<a.right+v.offsetXr?v.mirror.style.left=c+"px":ee.boundingBox&&(v.mirror.style.left=o<a.left+v.offsetX?v.clientX-(o-a.left)+"px":v.clientX-v.mirrorWidth-(o-a.right)+"px")),ee.lockX||(!ee.boundingBox||l>a.top+v.offsetY&&l<a.bottom+v.offsetYb?v.mirror.style.top=s+"px":ee.boundingBox&&(v.mirror.style.top=l<a.top+v.offsetY?v.clientY-(l-a.top)+"px":v.clientY-v.mirrorHeight-(l-a.bottom)+"px"));var u=J(v.mirror,v.clientX,v.clientY),m=k(u,v.clientX,v.clientY),f=m!==v.lastDropTarget;if(u!==v.lastElementBehindCursor&&(p(u,v.dragOverEvents.dragularenter,!!m),v.lastElementBehindCursor&&p(v.lastElementBehindCursor,v.dragOverEvents.dragularleave,u),v.lastElementBehindCursor=u),f&&(t(),v.lastDropTarget=m,r()),m===v.source&&ee.copy)return void(v.item.parentElement&&v.item.parentElement.removeChild(v.item));var g,h=K(m,u);if(null!==h)g=P(m,h,v.clientX,v.clientY);else{if(ee.revertOnSpill!==!0||ee.copy)return void(ee.copy&&null!==v.item.parentElement&&v.item.parentElement.removeChild(v.item));g=v.initialSibling,m=v.source}(null===g||g!==v.item&&g!==i(v.item)&&g!==v.currentSibling)&&(v.currentSibling=g,m.insertBefore(v.item,g),ee.scope&&ee.scope.$emit("shadow",v.item,m))}}function R(){s(v.item,ee.classes.hide)}function W(){ne.dragging&&c(v.item,ee.classes.hide)}function q(e){if(v.targetContainer){var n=v.targetContainer.scrollTop;v.targetContainer.scrollTop+=e.deltaY,n!==v.targetContainer.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function z(){if(!v.mirror){var e=v.sourceItem.getBoundingClientRect();v.mirror=v.sourceItem.cloneNode(!0),v.mirrorWidth=e.width,v.mirrorHeight=e.height,v.mirror.style.width=m(e)+"px",v.mirror.style.height=f(e)+"px",s(v.mirror,ee.classes.transit),c(v.mirror,ee.classes.mirror),ee.mirrorContainer.appendChild(v.mirror),n(V,"on","mousemove",L),c(Q,ee.classes.unselectable),n(v.mirror,"on","wheel",q),ee.scope&&ee.scope.$emit("cloned",v.mirror,v.sourceItem)}}function F(){v.mirror&&(s(Q,ee.classes.unselectable),n(V,"off","mousemove",L),n(v.mirror,"off","wheel",q),v.mirror.parentElement.removeChild(v.mirror),v.mirror=null)}function K(e,n){for(var r=n;r!==e&&r.parentElement!==e;)r=r.parentElement;return r===V?null:r}function P(e,n,r,t){function o(){var n,o,i,l=e.children.length;for(n=0;l>n;n++){if(o=e.children[n],i=o.getBoundingClientRect(),c&&i.left>r)return o;if(!c&&i.top>t)return o}return null}function l(){var e=n.getBoundingClientRect();return a(c?r>e.left+m(e)/2:t>e.top+f(e)/2)}function a(e){return e?i(n):n}var c="horizontal"===ee.direction,s=n!==e?l():o();return s}function U(e,n){return"undefined"!=typeof window[n]?window[n]:V.clientHeight?V[e]:Q[e]}function _(e){var n=e.getBoundingClientRect(),r=U("scrollTop","pageYOffset"),t=U("scrollLeft","pageXOffset");return{left:n.left+t,right:n.right+t,top:n.top+r,bottom:n.bottom+r}}function J(e,n,r){var t,o=e||{},i=o.className;return o.className+=" "+ee.classes.hide,t=document.elementFromPoint(n,r),o.className=i,t}1!==arguments.length||Array.isArray(a)||angular.isElement(a)||a[0]||(u=a,a=[]);var G,Q=document.body,V=document.documentElement,Z={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},ee={dragOverEventNames:["dragularenter","dragularleave","dragularrelease"],classes:Z,containers:!1,moves:t,accepts:t,isContainer:r,copy:!1,invalid:w,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1,isContainerModel:o};l(ee.boundingBox)||(ee.boundingBox=null),u&&u.classes&&(angular.extend(Z,u.classes),angular.extend(u.classes,Z)),angular.extend(ee,u),ee.mirrorContainer||(ee.mirrorContainer=document.body),a=ee.containers||a||[],a=h(a),ee.containersModel=ee.containersModel?Array.isArray(ee.containersModel[0])?ee.containersModel:[ee.containersModel]:[],ee.nameSpace||(ee.nameSpace=["dragularCommon"]),Array.isArray(ee.nameSpace)||(ee.nameSpace=[ee.nameSpace]),ee.nameSpace.forEach(function(e){v.containers[e]||(v.containers[e]=[],v.containersCtx[e]=[]);for(var n=a.length,r=v.containers[e].length,t=0;n>t;t++)v.containers[e][t+r]=a[t],v.containersCtx[e][t+r]={o:ee,m:ee.containersModel[t]}}),y(),angular.forEach(ee.dragOverEventNames,function(e){document.createEvent?(v.dragOverEvents[e]=document.createEvent("HTMLEvents"),v.dragOverEvents[e].initEvent(e,!0,!0)):(v.dragOverEvents[e]=document.createEventObject(),v.dragOverEvents[e].eventType=e)}),G=function(e){for(var n=ee.nameSpace.length;n--;)if(-1!==v.containers[ee.nameSpace[n]].indexOf(e))return!0;return ee.isContainer(e)?(v.isContainerModel=ee.isContainerModel(e),!0):(v.isContainerModel=null,!1)};var ne={containers:v.containers,containersCtx:v.containersCtx,isContainer:G,start:O,end:T,cancel:N,remove:D,destroy:M,dragging:!1};return ne};return h.cleanEnviroment=function(){v.classesCache={},v.containersCtx={},v.containers={},v.mirror=void 0},h.shared=v,h}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map