!function e(t,r,n){function o(a,l){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!l&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var s=r[a]={exports:{}};t[a][0].call(s.exports,function(e){var r=t[a][1][e];return o(r?r:e)},s,s.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){"use strict";var n=e("./dragularModule");n.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(t,r,n){function o(e){try{return JSON.parse(e)}catch(t){return}}var i=t.$eval(n.dragular)||o(n.dragular)||{};n.dragularModel?i=angular.extend({containersModel:t.$eval(n.dragularModel)},i):i&&i.containersModel&&"string"==typeof i.containersModel&&(i.containersModel=t.$eval(i.containersModel)),e(r[0],i)}}}])},{"./dragularModule":2}],2:[function(e,t,r){"use strict";t.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,t,r){"use strict";var n=e("./dragularModule");n.factory("dragularService",["$rootScope",function(e){function t(e,t,r,n){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i=angular.element(e);o[r]&&i[t](o[r],n),i[t](r,n)}function r(){return!1}function n(){return!0}function o(e){return e.width||e.right-e.left}function i(e){return e.height||e.bottom-e.top}function a(){return{}}function l(e){function t(){var t=e;do t=t.nextSibling;while(t&&1!==t.nodeType);return t}return e?e.nextElementSibling||t():e}function c(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function u(e){var t=v.classesCache[e];return t?t.lastIndex=0:v.classesCache[e]=t=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),t}function s(e,t){var r=e.className;r.length?u(t).test(r)||(e.className+=" "+t):e.className=t}function d(e,t){e.className=e.className.replace(u(t)," ").trim()}function m(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function f(e,t){var r=m(t),n={pageX:"clientX",pageY:"clientY"};return e in n&&!(e in r)&&n[e]in r&&(e=n[e]),r.type.indexOf("touch")<0?r[e]:r.type.indexOf("end")>-1?void 0:r.originalEvent.touches[0][e.replace("client","page")]}function g(e,t){return Array.prototype.indexOf.call(angular.element(t).children(),e)}function p(e,t,r){e&&(v.extra=r,e.dispatchEvent?e.dispatchEvent(t):e.fireEvent("on"+t.eventType,t))}var v={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,copy:null,sourceItem:null,sourceModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,isContainerModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},h=function(u,m){function h(e,t){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,t):[e]}function y(t){e.applyAsync(function(){var e=Array.isArray(t)?t:h(t);e.forEach(function(e){angular.forEach(te.nameSpace,function(t){var r;r=v.containers[t].indexOf(e),v.containers[t].splice(r,1),v.containersCtx[t].splice(r,1)})})})}function x(e){var r=e?"off":"on";t(Z,r,"mouseup",A),u.forEach(function(e){t(e,"on","mousedown",S)})}function E(e){var r=e?"off":"on";t(Z,r,"mousemove",X)}function M(e){var r=e?"off":"on";t(Z,r,"selectstart",b),t(Z,r,"click",b),t(Z,r,"touchmove",b)}function C(){x(!0),y(u),A({})}function b(e){v.grabbed&&e.preventDefault()}function S(e){if(e=e||window.event,!(0!==e.which&&1!==e.which||e.metaKey||e.ctrlKey)){var t=Y(e.target);t&&(v.grabbed=t,E(),"mousedown"===e.type&&(e.preventDefault(),"INPUT"!==t.item.tagName&&"TEXTAREA"!==t.item.tagName||t.item.focus()))}}function X(e){var t=v.grabbed;if(E(!0),M(),w(),I(t),!te.direction){var r=v.sourceItem.parentElement,n=r.offsetHeight,o=r.offsetWidth,i=v.sourceItem.clientHeight,a=v.sourceItem.clientWidth;te.direction=o/a>n/i?"horizontal":"vertical"}var l=J(v.sourceItem);v.offsetX=f("pageX",e)-l.left,v.offsetY=f("pageY",e)-l.top,v.clientX=f("clientX",e),v.clientY=f("clientY",e),te.boundingBox&&(v.offsetXr=f("pageX",e)-l.right,v.offsetYb=f("pageY",e)-l.bottom),e.preventDefault(),s(v.item,te.classes.transit),P(),v.mirror.style.left=v.clientX-v.offsetX+"px",v.mirror.style.top=v.clientY-v.offsetY+"px",L(e)}function Y(e){if(!re.dragging||!v.mirror){for(var t=e;e.parentElement&&!Q(e.parentElement);){if(te.invalid(e,t))return;if(e=e.parentElement,!e)return}var r=e.parentElement;if(r&&!te.invalid(e,t)&&te.moves(e,r,t))return{item:e,source:r}}}function O(e){var t=Y(e);t&&I(t)}function I(e){v.sourceItem=v.item=e.item,v.source=e.source,v.initialSibling=v.currentSibling=l(e.item),document.addEventListener("touchmove",function(e){v.touch=v.touch||{},v.touch.x=e.touches[0].pageX,v.touch.y=e.touches[0].pageY}),K(e.item,e.source)?(v.item=e.item.cloneNode(!0),v.copy=!0,te.scope&&te.scope.$emit("dragularcloned",v.item,e.item)):v.copy=!1;var t=u.indexOf(e.source);return v.sourceModel=te.containersModel[t],v.initialIndex=g(e.item,e.source),re.dragging=!0,te.scope&&te.scope.$emit("dragulardrag",v.sourceItem,v.source),!0}function T(){return!1}function w(){re.dragging&&$(v.item,v.item.parentElement)}function B(){v.grabbed=!1,E(!0),M(!0)}function A(e){if(B(),re.dragging){e=e||window.event,e.type.indexOf("touch")<0?(v.clientX=f("clientX",e),v.clientY=f("clientY",e)):(v.clientX=v.touch.x,v.clientY=v.touch.y);var t=G(v.mirror,v.clientX,v.clientY),r=k(t,v.clientX,v.clientY);!r||v.copy&&r===v.source?te.removeOnSpill?N():D(null,e):$(v.item,r),v.target=null,v.lastElementBehindCursor&&p(v.lastElementBehindCursor,v.dragOverEvents.dragularrelease,t),te.scope&&te.scope.$emit("dragularrelease",v.item,v.source)}}function $(t,r){function n(){te.scope&&(j(r)?te.scope.$emit("dragularcancel",t,v.source,v.sourceModel,v.initialIndex):te.scope.$emit("dragulardrop",t,r,v.source,v.sourceModel,v.initialIndex,v.targetModel))}if(v.sourceModel&&!j(r)){var o=t,i=g(o,r);e.$applyAsync(function(){r===v.source?v.sourceModel.splice(i,0,v.sourceModel.splice(v.initialIndex,1)[0]):(v.dropElmModel=v.copy?angular.copy(v.sourceModel[v.initialIndex]):v.sourceModel[v.initialIndex],v.isContainerModel?v.targetModel=v.isContainerModel:v.targetModel=v.targetCtx.m,r.removeChild(o),v.copy||v.sourceModel.splice(v.initialIndex,1),v.targetModel.splice(i,0,v.dropElmModel)),t.parentElement&&t.parentElement.removeChild(t),n(),H()})}else n(),H()}function N(){if(re.dragging){var t=v.item.parentElement;t&&t.removeChild(v.item),v.sourceModel&&e.$applyAsync(function(){v.sourceModel.splice(v.initialIndex,1),H()}),te.scope&&te.scope.$emit(v.copy?"dragularcancel":"dragularremove",v.item,t,v.sourceModel,v.initialIndex),v.sourceModel||H()}}function D(e,t){if(re.dragging){var r=arguments.length>0?e:te.revertOnSpill,n=v.item?v.item.parentElement:null,o=j(n);o===!1&&v.copy===!1&&r&&v.source.insertBefore(v.item,v.initialSibling),!v.sourceModel||v.copy||r?te.scope&&((o||r)&&te.scope.$emit("dragularcancel",v.item,v.source),t&&"touchend"===t.type&&te.scope.$emit("dragulartouchend",v.item,v.source)):$(v.item,n),(!v.sourceModel||v.copy||r||o)&&H()}}function H(){B(),U(),v.item&&d(v.item,te.classes.transit),re.dragging=!1,te.removeOnSpill===!0&&q(),te.scope&&(te.scope.$emit("dragularout",v.item,v.lastDropTarget,v.source),te.scope.$emit("dragulardragend",v.item)),v.source=v.item=v.sourceItem=v.initialSibling=v.currentSibling=v.sourceModel=null,v.initialIndex=v.currentIndex=v.lastDropTarget=v.isContainerModel=v.targetModel=null,v.dropElmModel=v.targetCtx=v.copy=null}function j(e,t){var r=t||(v.mirror?v.currentSibling:l(v.item));return e===v.source&&r===v.initialSibling}function k(e,t,r){function n(){var n=!1;if(Q(o)){for(var i=z(o,e),a=F(o,i,t,r),l=j(o,a),c=te.nameSpace.length;c--;){if(-1!==v.containers[te.nameSpace[c]].indexOf(o)){v.targetCtx=v.containersCtx[te.nameSpace[c]][v.containers[te.nameSpace[c]].indexOf(o)];break}v.targetCtx||(v.targetCtx=v.containersCtx.dragularCommon[v.containers.dragularCommon.indexOf(o)])}n=l||v.targetCtx.o.accepts(v.item,o,v.source,a,v.sourceModel,v.initialIndex)&&te.canBeAccepted(v.item,o,v.source,a,v.sourceModel,v.initialIndex),v.target!==o&&(v.target=o)}return n}for(var o=e;o&&!n();)o=o.parentElement;return o}function L(e){function t(e){te.scope&&te.scope.$emit("dragular"+e,v.item,v.lastDropTarget,v.source),te.removeOnSpill===!0&&("over"===e?R():q())}function r(){m&&t("over")}function n(){v.lastDropTarget&&t("out")}if(v.mirror){e=e||window.event,v.clientX=f("clientX",e),v.clientY=f("clientY",e);var o,i,a,c=v.clientX-v.offsetX,u=v.clientY-v.offsetY;te.boundingBox&&(o=f("pageX",e),i=f("pageY",e),a=J(te.boundingBox)),te.lockY||(!te.boundingBox||o>a.left+v.offsetX&&o<a.right+v.offsetXr?v.mirror.style.left=c+"px":te.boundingBox&&(o<a.left+v.offsetX?v.mirror.style.left=v.clientX-(o-a.left)+"px":v.mirror.style.left=v.clientX-v.mirrorWidth-(o-a.right)+"px")),te.lockX||(!te.boundingBox||i>a.top+v.offsetY&&i<a.bottom+v.offsetYb?v.mirror.style.top=u+"px":te.boundingBox&&(i<a.top+v.offsetY?v.mirror.style.top=v.clientY-(i-a.top)+"px":v.mirror.style.top=v.clientY-v.mirrorHeight-(i-a.bottom)+"px"));var s=G(v.mirror,v.clientX,v.clientY),d=k(s,v.clientX,v.clientY),m=d!==v.lastDropTarget;if(s!==v.lastElementBehindCursor&&(p(s,v.dragOverEvents.dragularenter,!!d),v.lastElementBehindCursor&&p(v.lastElementBehindCursor,v.dragOverEvents.dragularleave,s),v.lastElementBehindCursor=s),m&&(n(),v.lastDropTarget=d,r()),d===v.source&&v.copy)return void(v.item.parentElement&&v.item.parentElement.removeChild(v.item));var g,h=z(d,s);if(null!==h)g=F(d,h,v.clientX,v.clientY);else{if(te.revertOnSpill!==!0||v.copy)return void(v.copy&&null!==v.item.parentElement&&v.item.parentElement.removeChild(v.item));g=v.initialSibling,d=v.source}(null===g||g!==v.item&&g!==l(v.item)&&g!==v.currentSibling)&&(v.currentSibling=g,d&&d.insertBefore(v.item,g),te.scope&&te.scope.$emit("dragularshadow",v.item,d))}}function R(){d(v.item,te.classes.hide)}function q(){re.dragging&&s(v.item,te.classes.hide)}function W(e){if(v.target){var t=v.target.scrollTop;v.target.scrollTop+=e.deltaY,t!==v.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function P(){if(!v.mirror){var e=v.sourceItem.getBoundingClientRect();v.mirror=v.sourceItem.cloneNode(!0),v.mirrorWidth=e.width,v.mirrorHeight=e.height,v.mirror.style.width=o(e)+"px",v.mirror.style.height=i(e)+"px",d(v.mirror,te.classes.transit),s(v.mirror,te.classes.mirror),te.mirrorContainer.appendChild(v.mirror),t(Z,"on","mousemove",L),s(V,te.classes.unselectable),t(v.mirror,"on","wheel",W),te.scope&&te.scope.$emit("dragularcloned",v.mirror,v.sourceItem)}}function U(){v.mirror&&(d(V,te.classes.unselectable),t(Z,"off","mousemove",L),t(v.mirror,"off","wheel",W),v.mirror.parentElement.removeChild(v.mirror),v.mirror=null)}function z(e,t){for(var r=t;r!==e&&r.parentElement!==e;)r=r.parentElement;return r===Z?null:r}function F(e,t,r,n){function a(){var t,o,i,a=e.children.length;for(t=0;a>t;t++){if(o=e.children[t],i=o.getBoundingClientRect(),s&&i.left>r)return o;if(!s&&i.top>n)return o}return null}function c(){var e=t.getBoundingClientRect();return u(s?r>e.left+o(e)/2:n>e.top+i(e)/2)}function u(e){return e?l(t):t}var s="horizontal"===te.direction,d=t!==e?c():a();return d}function K(e,t){return"boolean"==typeof te.copy?te.copy:te.copy(e,t)}function _(e,t){return"undefined"!=typeof window[t]?window[t]:Z.clientHeight?Z[e]:V[e]}function J(e){var t=e.getBoundingClientRect(),r=_("scrollTop","pageYOffset"),n=_("scrollLeft","pageXOffset");return{left:t.left+n,right:t.right+n,top:t.top+r,bottom:t.bottom+r}}function G(e,t,r){var n,o=e||{},i=o.className;return o.className+=" "+te.classes.hide,n=document.elementFromPoint(t,r),o.className=i,n}1!==arguments.length||Array.isArray(u)||angular.isElement(u)||u[0]||"string"==typeof u?"string"==typeof u&&(u=document.querySelectorAll(u)):(m=u,u=[]);var Q,V=document.body,Z=document.documentElement,ee={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},te={dragOverEventNames:["dragularenter","dragularleave","dragularrelease"],classes:ee,containers:!1,moves:n,accepts:n,canBeAccepted:n,isContainer:r,copy:!1,invalid:T,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1,isContainerModel:a};c(te.boundingBox)||(te.boundingBox=null),m&&m.classes&&(angular.extend(ee,m.classes),angular.extend(m.classes,ee)),angular.extend(te,m),te.mirrorContainer||(te.mirrorContainer=document.body),u=te.containers||u||[],u=h(u),te.containersModel?te.containersModel=Array.isArray(te.containersModel[0])?te.containersModel:[te.containersModel]:te.containersModel=[],te.nameSpace||(te.nameSpace=["dragularCommon"]),Array.isArray(te.nameSpace)||(te.nameSpace=[te.nameSpace]),te.nameSpace.forEach(function(e){v.containers[e]||(v.containers[e]=[],v.containersCtx[e]=[]);for(var t=u.length,r=v.containers[e].length,n=0;t>n;n++)v.containers[e][n+r]=u[n],v.containersCtx[e][n+r]={o:te,m:te.containersModel[n]}}),x(),angular.forEach(te.dragOverEventNames,function(e){document.createEvent?(v.dragOverEvents[e]=document.createEvent("HTMLEvents"),v.dragOverEvents[e].initEvent(e,!0,!0)):(v.dragOverEvents[e]=document.createEventObject(),v.dragOverEvents[e].eventType=e)}),Q=function(e){for(var t=te.nameSpace.length;t--;)if(-1!==v.containers[te.nameSpace[t]].indexOf(e))return!0;return te.isContainer(e)?(v.isContainerModel=te.isContainerModel(e),!0):(v.isContainerModel=null,!1)};var re={containers:v.containers,containersCtx:v.containersCtx,isContainer:Q,start:O,end:w,cancel:D,remove:N,destroy:C,dragging:!1};return re};return h.cleanEnviroment=function(){v.classesCache={},v.containersCtx={},v.containers={},v.mirror=void 0},h.shared=v,h}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map
