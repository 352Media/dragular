!function e(n,r,t){function o(i,l){if(!r[i]){if(!n[i]){var c="function"==typeof require&&require;if(!l&&c)return c(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var s=r[i]={exports:{}};n[i][0].call(s.exports,function(e){var r=n[i][1][e];return o(r?r:e)},s,s.exports,e,n,r,t)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({"/home/alferov/www/dragular/src/dragularDirective.js":[function(e,n,r){"use strict";var t=e("./dragularModule");t.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(n,r,t){function o(e){try{return JSON.parse(e)}catch(n){return void 0}}e(r[0],n[t.dragular||"undefined"]||o(t.dragular))}}}])},{"./dragularModule":"/home/alferov/www/dragular/src/dragularModule.js"}],"/home/alferov/www/dragular/src/dragularModule.js":[function(e,n,r){"use strict";n.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":"/home/alferov/www/dragular/src/dragularDirective.js","./dragularService.js":"/home/alferov/www/dragular/src/dragularService.js"}],"/home/alferov/www/dragular/src/dragularService.js":[function(e,n,r){"use strict";var t=e("./dragularModule");t.factory("dragularService",function(){function e(e,n,r,t){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},a=angular.element(e);"wheel"!==r&&a[n](o[r],t),a[n](r,t)}function n(){return!1}function r(){return!0}function t(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}return e.nextElementSibling||n()}function o(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function a(e,n){-1===e.className.indexOf(" "+n)&&(e.className+=" "+n)}function i(e,n){angular.element(e).removeClass(n)}function l(e,n){return(" "+e.className+" ").indexOf(" "+n+" ")>-1}function c(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function u(e,n){var r=c(n),t={pageX:"clientX",pageY:"clientY"};return e in t&&!(e in r)&&t[e]in r&&(e=t[e]),r[e]}function s(e){return e.width||e.right-e.left}function d(e){return e.height||e.bottom-e.top}function f(e,n){return Array.prototype.indexOf.call(angular.element(n).children(),e)}var p,g={},v={};return function(c,m){function h(e,n,r,t){n[r]||(n[r]=[]),Array.prototype.push.apply(n[r],t),e[r]=n[r]}function y(e){if(Array.isArray(e))return e;if(e.length){for(var n=e.length,r=[];n;)n--,r.push(e[n]);return r}return[e]}function w(e){return function(n){var r=Array.isArray(n)?n:y(n);r.forEach(function(n){Ee.nameSpace?angular.forEach(Ee.nameSpace,function(r,t){"add"===e?(Me[t].push(n),console.warn&&void 0):(Me[t].splice(Me.indexOf(n),1),console.warn&&void 0)}):"add"===e?(Me.push(n),console.warn&&void 0):(Me.splice(Me.indexOf(n),1),console.warn&&void 0)})}}function x(e){return-1!==Se.containers.indexOf(e)||Ee.isContainer(e)?(Ee.containersModel&&(Q=I,I=Oe[Se.containers.indexOf(e)],Z=V,V=angular.element(e).scope()),!0):!1}function M(e){function n(n){n&&n[Ee.isContainerModel]&&(t=!0,Q=I,I=n[Ee.isContainerModel],Z=V,V=angular.element(e).scope())}var r;for(r in Se.containers)if(Se.containers.hasOwnProperty(r)&&-1!==Se.containers[r].indexOf(e))return Ee.containersModel&&(Q=I,I=Oe[r][Se.containers[r].indexOf(e)],Z=V,V=angular.element(e).scope()),!0;if(Ee.isContainer(e)){if(Ee.containersModel&&Ee.isContainerModel){var t=!1;n(angular.element(target).isolateScope()),t||n(angular.element(target).scope())}return!0}return!1}function O(n){var r=n?"off":"on";e(xe,r,"mouseup",A),c.forEach(function(n){e(n,"on","mousedown",E)})}function b(){O(!0),Se.removeContainer(Me),A({})}function E(e){e=e||window.event;var n=e.target;if(!(0!==e.which&&1!==e.which||e.metaKey||e.ctrlKey)&&C(n)===!0){if(!Ee.direction){var r=n.parentElement,t=r.offsetHeight,o=r.offsetWidth,a=n.clientHeight,i=n.clientWidth;Ee.direction=o/i>t/a?"horizontal":"vertical"}var l=K(_);ee=u("pageX",e)-l.left,ne=u("pageY",e)-l.top,oe=u("clientX",e),ae=u("clientY",e),Ee.boundingBox&&(re=u("pageX",e)-l.right,te=u("pageY",e)-l.bottom),"number"==typeof Ee.delay?me=setTimeout(function(){S(e)},Ee.delay):S(e),e.preventDefault()}}function S(e){L(),p.style.left=oe-ee+"px",p.style.top=ae-ne+"px",k(e)}function C(e){var n=e;if(Se.dragging&&p)return!1;if(he(e))return!1;for(;!he(e.parentElement);){if(Ee.invalid(e,n))return!1;if(e=e.parentElement,!e)return}if(Ee.invalid(e,n))return!1;var r=e.parentElement;if(!Ee.moves(e,r,n,G,J))return!1;if(T(),Ee.containersModel){var o=c.indexOf(r),i=f(e,r);se=de=i,J=Ee.containersModel[o],G=J[i],Ee.copy&&(ve=angular.copy(G))}return Ee.copy?(ge=e.cloneNode(!0),a(ge,Ee.classes.transit),Ee.scope&&Ee.scope.$emit("cloned",ge,e,ve,G)):a(e,Ee.classes.transit),W=r,_=e,ce=ue=t(e),Se.dragging=!0,Ee.scope&&Ee.scope.$emit("drag",_,W),!0}function B(e){return"A"===e.tagName||"BUTTON"===e.tagName}function T(){if(Se.dragging){var e=ge||_;N(e,e.parentElement)}}function A(e){if(Se.dragging){e=e||window.event,oe=u("clientX",e),ae=u("clientY",e);var n=ge||_,r=P(p,oe,ae),t=D(r,oe,ae);!t||Ee.copy!==!1&&t===W?Ee.removeOnSpill?j():$():N(n,t),ye=null,Ee.dragOverClasses&&fe&&(i(fe,pe),fe=null)}}function N(e,n){Ee.scope&&X(n)?Ee.scope.$emit("cancel",e,W,ve||G,J,I):Ee.scope&&Ee.scope.$emit("drop",e,n,W,ve||G,J,I),Y()}function j(){if(Se.dragging){var e=ge||_,n=e.parentElement;if(Ee.containersModel){var r=ve||G;I.splice(I.indexOf(r),1)}else n&&n.removeChild(e);Ee.scope&&Ee.scope.$emit(Ee.copy?"cancel":"remove",e,n,r,J,I),Y()}}function $(e){if(Se.dragging){var n=arguments.length>0?e:Ee.revertOnSpill,r=ge||_,t=r.parentElement;t===W&&Ee.copy&&(Ee.containersModel?I.splice(I.indexOf(ve),1,ve):t.removeChild(ge));var o=X(t);o===!1&&Ee.copy===!1&&n&&(Ee.containersModel?(Q=I,I=J,Z=V,V=angular.element(el).scope(),H(se)):W.insertBefore(r,ce)),Ee.scope&&(o||n)?Ee.scope.$emit("cancel",r,W):Ee.scope&&Ee.scope.$emit("drop",r,t,W),Y()}}function Y(){var e=ge||_;R(),e&&i(e,Ee.classes.transit),me&&clearTimeout(me),W=_=ge=ce=ue=J=null,G=ve=se=de=me=null,Se.dragging=!1,Ee.scope&&Ee.scope.$emit("dragend",e)}function X(e,n){var r=n||(p?ue:t(_||ge));return e===W&&r===ce}function D(e,n,r){function t(){var t=!1;if(he(o)){ye=o;var c=U(o,e),u=z(o,c,n,r),s=X(o,u);t=s?!0:Ee.accepts(_,o,W,u,G,J)}return Ee.dragOverClasses&&l(o,Ee.classes.overActive)&&o!==fe&&(fe&&i(fe,pe),pe=t?Ee.classes.overAccepts:Ee.classes.overDeclines,a(o,pe),fe=o),t}for(var o=e;o&&!t();)o=o.parentElement;return o}function k(e){if(p){e=e||window.event,oe=u("clientX",e),ae=u("clientY",e);var n,r,o,a=oe-ee,i=ae-ne;Ee.boundingBox&&(n=u("pageX",e),r=u("pageY",e),o=K(Ee.boundingBox)),Ee.lockY||(!Ee.boundingBox||n>o.left+ee&&n<o.right+re?p.style.left=a+"px":Ee.boundingBox&&(p.style.left=n<o.left+ee?oe-(n-o.left)+"px":oe-ie-(n-o.right)+"px")),Ee.lockX||(!Ee.boundingBox||r>o.top+ne&&r<o.bottom+te?p.style.top=i+"px":Ee.boundingBox&&(p.style.top=r<o.top+ne?ae-(r-o.top)+"px":ae-le-(r-o.bottom)+"px"));var l=ge||_,c=P(p,oe,ae),s=D(c,oe,ae);if(s!==W||!Ee.copy){var d,g=U(s,c);if(Ee.containersModel){var v;Z=V||angular.element(W).scope(),V=angular.element(s).scope()}if(null!==g)d=z(s,g,oe,ae),Ee.containersModel&&(v=f(d,s));else{if(Ee.revertOnSpill!==!0||Ee.copy)return void(!Ee.copy&&Ee.removeOnSpill!==!0||null===l.parentElement||(Ee.containersModel?(I.splice(v,1),V.$apply()):l.parentElement.removeChild(l)));d=ce,s=W,Ee.containersModel&&(v=se,Q=I,I=J,Z=V,V=angular.element(s).scope())}(null===d||d!==l&&d!==t(l))&&(ue=d,Ee.containersModel?(H(v),de=v):s.insertBefore(l,d),Ee.scope&&Ee.scope.$emit("shadow",l,s))}}}function H(e){Q===I?I.splice(e,0,Q.splice(de,1)[0]):(Q.splice(de,1),I.splice(e,1,ve||G),Z.$apply()),V.$apply()}function q(e){ye&&(ye.scrollTop+=e.deltaY)}function L(){if(!p){var n=_.getBoundingClientRect();p=_.cloneNode(!0),ie=n.width,le=n.height,p.style.width=s(n)+"px",p.style.height=d(n)+"px",i(p,Ee.classes.transit),a(p,Ee.classes.mirror),we.appendChild(p),e(xe,"on","mousemove",k),a(we,Ee.classes.unselectable),e(p,"on","wheel",q),Ee.scope&&Ee.scope.$emit("cloned",p,_)}}function R(){p&&(i(we,Ee.classes.unselectable),e(xe,"off","mousemove",k),e(p,"off","wheel",q),p.parentElement.removeChild(p),p=null)}function U(e,n){for(var r=n;r!==e&&r.parentElement!==e;)r=r.parentElement;return r===xe?null:r}function z(e,n,r,o){function a(){var n,t,a,i=e.children.length;for(n=0;i>n;n++){if(t=e.children[n],a=t.getBoundingClientRect(),c&&a.left>r)return t;if(!c&&a.top>o)return t}return null}function i(){var e=n.getBoundingClientRect();return l(c?r>e.left+s(e)/2:o>e.top+d(e)/2)}function l(e){return e?t(n):n}var c="horizontal"===Ee.direction,u=n!==e?i():a();return u}function F(e,n){return"undefined"!=typeof window[n]?window[n]:xe.clientHeight?xe[e]:we[e]}function K(e){var n=e.getBoundingClientRect(),r=F("scrollTop","pageYOffset"),t=F("scrollLeft","pageXOffset");return{left:n.left+t,right:n.right+t,top:n.top+r,bottom:n.bottom+r}}function P(e,n,r){if(!n&&!r)return null;var t,o=e||{},a=o.className;return o.className+=" "+Ee.classes.hide,t=document.elementFromPoint(n,r),o.className=a,t}1!==arguments.length||Array.isArray(c)||angular.isElement(c)||c[0]||(m=c,c=[]);var W,_,J,G,I,Q,V,Z,ee,ne,re,te,oe,ae,ie,le,ce,ue,se,de,fe,pe,ge,ve,me,he,ye,we=document.body,xe=document.documentElement,Me={},Oe={},be={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit",overActive:"gu-over-active",overAccepts:"gu-over-accept",overDeclines:"gu-over-decline"},Ee={classes:be,containers:!1,moves:r,accepts:r,isContainer:n,copy:!1,delay:!1,invalid:B,revertOnSpill:!1,removeOnSpill:!1,dragOverClasses:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1};o(Ee.boundingBox)||(Ee.boundingBox=null),m&&m.classes&&(angular.extend(be,m.classes),angular.extend(m.classes,be)),angular.extend(Ee,m),Ee.delay===!0&&(Ee.delay=300),c=Ee.containers||(c?y(c):[]),Ee.containers&&(c=y(c)),Ee.containersModel&&(Ee.containersModel=y(Ee.containersModel)),Ee.nameSpace?(Array.isArray(Ee.nameSpace)||(Ee.nameSpace=[Ee.nameSpace]),Ee.nameSpace.forEach(function(e){h(Me,g,e,c),Ee.containersModel&&h(Oe,v,e,Ee.containersModel)}),he=M):(Me=c,he=x,Ee.containersModel&&(Oe=Ee.containersModel)),O();var Se={addContainer:w("add"),removeContainer:w("remove"),containers:Me,start:C,end:T,cancel:$,remove:j,destroy:b,dragging:!1};return Se}})},{"./dragularModule":"/home/alferov/www/dragular/src/dragularModule.js"}]},{},["/home/alferov/www/dragular/src/dragularModule.js"]);
//# sourceMappingURL=dragular.min.js.map